function decimalAdjust(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||c%1!==0?NaN:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))}function hexToRgbA(a,b){var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),d="rgba(";return d+=parseInt(c[1],16)+",",d+=parseInt(c[2],16)+",",d+=parseInt(c[3],16)+",",d+=b+")"}function refreshRNG(a){function b(a){var b=a;CPXC=new Chance(b),CPX.chanceMixin()}function c(){var a=Math.random();CPXC=new Chance(a),CPX.chanceMixin()}a="undefined"==typeof a?function(){}:a,$.ajax({url:"https://www.random.org/integers/",data:{num:"1",col:"1",min:"1",max:"1000000000",base:"10",format:"plain",rnd:"new"},success:b,error:c,complete:a,timeout:3e3})}function start(a){CPX.SW.mdbBuild().then(function(a){console.log(a)}),refreshRNG(a)}function mapLocation(a){var b=a.hex,c=a.map._hexradius,d=a.map._pointy,e=-90;a.map._pointy||(e=0);var f=CPX.hex.center(c,b,d),g=a.map.bounds;return f.x+=g.x/2,f.y+=g.y/2,objExists(a.viewcenter)&&(f.x-=a.viewcenter.x,f.y-=a.viewcenter.y),f}function makeHex(a){var b=(a.size,a.stroke),c=a.fill,d=mapLocation(a),e=-90;a.map.class.includes("pointy")||(e=0);var f=new createjs.Graphics;return f.setStrokeStyle(1).beginStroke(b),a.map.class.includes("gradient")||a.map.selected.includes(a.hex.id)?(f.beginRadialGradientFill(["white",c],[.3,.9],d.x,d.y,0,d.x,d.y,a.map._hexradius),objExists(a.unit)&&f.beginFill(c)):f.beginFill(c),f.drawPolyStar(d.x,d.y,a.map._hexradius,6,0,e),f}function makeShape(a){var b=a.size,c=a.stroke,d=a.fill,e=mapLocation(a),f=new createjs.Graphics;return f.setStrokeStyle(1).beginStroke(c).beginFill(d),"circle"==a.shape?f.drawCircle(e.x,e.y,b):"square"==a.shape?f.drawRect(e.x-b/2,e.y-b/2,b,b):"triangle"==a.token.shape&&f.drawPolyStar(e.x,e.y,b,3,0,0),f}function initialize(){CPX.vue.page.open("c-cpxrpg","wide")}function start(a){refreshRNG(a)}function initialize(){vMainMenu.open()}const CPX={DW:{},OSR:{},SW:{},FP:{},hex:{},display:{},gen:{},user:{},vue:{},realm:{},data:{}},CPXSAVE=localforage.createInstance({name:"CPXSave",storeName:"CPXsave"}),CPXDB={};var CPXC;DATA=CPX.data;const base62="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",RANKS=["common","uncommon","rare","legendary","epic"],DIERANKS=[["1d4"],["1d6"],["1d8"],["1d10"],["1d12"],["1d6","1d8"],["1d8","1d8"],["1d8","1d10"],["1d10","1d10"],["1d6","1d8","1d8"],["1d8","1d8","1d8"],["1d10","1d8","1d8"],["1d10","1d10","1d8"],["1d10","1d10","1d10"]],COLORS={red:{rgba:"rgba(255,0,0,1)",element:["stength","mighty","fire","sun","war","force","spirit"]},orange:{rgba:"rgba(255,165,0,1)",element:["constitution","subtle","earth","healing","night","fertility","animal"]},yellow:{rgba:"rgba(255,255,0,1)",element:["dexterity","quick","weather","lightning","time","travel","wealth"]},green:{rgba:"rgba(0,128,0,1)",element:["intelligence","clever","air","knowledge","artifice","magic","winter"]},blue:{rgba:"rgba(0,0,255,1)",element:["wisdom","wise","water","mind","righteousness","law","protection"]},indigo:{rgba:"rgba(75,0,130,1)",element:["charisma","bold","charm","community","glory","luck","nobility"]}};Math.round10=function(a,b){return decimalAdjust("round",a,b)},Math.floor10=function(a,b){return decimalAdjust("floor",a,b)},Math.ceil10=function(a,b){return decimalAdjust("ceil",a,b)},objExists=function(a){return"undefined"!=typeof a},objCopy=function(a){return JSON.parse(JSON.stringify(a))},Array.prototype.unique=function(){for(var a=this.concat(),b=0;b<a.length;++b)for(var c=b+1;c<a.length;++c)a[b]===a[c]&&a.splice(c--,1);return a},Array.prototype.findOne=function(a){return this.some(function(b){return a.indexOf(b)>=0})},CPX.obj=function(a,b){var c={class:[],seed:"undefined"==typeof a.seed?[CPXC.string({length:32,pool:base62})]:a.seed,scale:"undefined"==typeof a.scale?3:a.scale,parent:"undefined"==typeof a.parent?{}:a.parent};c._id=c.seed.join(""),b="undefined"==typeof b?{}:b;for(var d in b)c[d]="undefined"==typeof a[d]?b[d]:a[d];return c},CPX.obj.applyTemplate=function(a,b){if(objExists(b.template))for(var c in b.template)a[c]=b.template[c]},CPX.size=function(a){var b=a.weighted([1,2,3,4,5],[.1,.45,.34,.1,.01]),c=a.normal({mean:0,dev:.3});return b+=1==b?Math.abs(c):c},CPX.chanceMixin=function(){CPXC.mixin({dF:function(){return CPXC.rpg("4d3",{sum:!0})-8},DW:function(){return CPXC.rpg("2d6",{sum:!0})},diceSum:function(a){return CPXC.rpg(a,{sum:!0})},diceEx:function(a){for(var b=0,c=0,d=0,e=a.length,f=0;f<e;f++)d=Number(a[f][a[f].length-1]),c=CPXC.diceSum(a[f]),b+=c,c==d&&(a.push(a[f]),e++);return b}})},setInterval(function(){refreshRNG()},6e5);var HUB=new Vue;CPX.data.quickpowers={fly:function(a){return{id:"flight",rank:a}},curse:function(a){return{id:"curse",rank:a}},armor:function(a){return{id:"armor",rank:a}},MU:function(a,b){return{id:"MU",rank:a,schools:b}},BW:function(a,b,c){return{id:"ablast",rank:a,element:b,area:c}},undead:function(){return{id:"undead",rank:0}},blast:function(a,b){return{id:"blast",rank:a,element:b}},aura:function(a,b){return{id:"aura",rank:a,element:b}},regen:function(a){return{id:"regen",rank:a}},immune:function(a){return{id:"immune",rank:1,immunity:a}}},CPX.data.powertags=["element","animal","bug","undead","ghost","dragon","fey","earth","fire","air","water","sun","night","poison","disease","death","life","armor","healing","mind","charm","luck","sneaky","magic","speed"],CPX.data.powers=[{id:"blast",dmg:["1d10","4d6","6d6","8d6"],range:["near","near","far","sight"],tags:["element"],input:["rank","element"],replace:["dmg","range","element"],html:"Blast (dmg) [range,element]"},{id:"ablast",dmg:["1d8","2d8","3d8","4d8"],tags:["element","dragon"],input:["rank","area","element"],replace:["dmg","area","element"],html:"Area Blast (dmg) [area,near,element]"},{id:"armor",AAC:[15,17,19,21],DRval:[4,8,12,16],tags:["animal","armor","dragon","earth"],input:["rank"],replace:["AAC","DRval"],html:"Armor [AAC] DR[DRval]"},{id:"aura",dmg:["1d6","2d6","3d6","4d6"],tags:["element"],input:["rank","element"],replace:["dmg","element"],html:"Aura (dmg) [touch,element]"},{id:"bless",tags:["magic","luck"],bonus:["1","2","2","2"],duration:["1d6 rounds","1d6 turns","1d6 hours","1d6 days"],range:["close","near","far","sight"],input:["rank"],replace:["bonus","range","duration"],html:"Bless (+bonus) [range,duration]"},{id:"curse",pen:["-1","-2","-2","-2"],tags:["magic","undead","luck"],duration:["1d6 rounds","1d6 turns","1d6 hours","permanent"],range:["close","near","far","sight"],input:["rank"],replace:["pen","svpen","range","duration"],html:"Curse (pen) [svpenWIS save,range,duration]"},{id:"charm",tags:["charm","mind"],duration:["1d6 rounds","1d6 turns","1d6 hours","permanent"],range:["close","near","far","sight"],input:["rank"],replace:["svpen","range","duration"],html:"Charm Person [svpenCHA save,range,duration]"},{id:"darkness",size:[15,30,90,300],tags:["night","undead"],replace:["size"],html:"Darkness (sizeft radius)"},{id:"dazzle",sv:"DEX",svpen:!0,tags:["fire","sun","fey"],size:[5,10,30,100],range:["near","near","far","sight"],duration:["1d6 rounds","1d6 turns","1d6 hours","permanent"],input:["rank"],replace:["size","svpen","range","duration"],html:"Dazzle (sizeft radius) [svpenDEX save,range,duration]"},{id:"disease",tags:["disease","undead"],range:["touch","touch","touch","near"],input:["rank"],replace:["svpen","range"],html:"Disease [svpenCON save,range]"},{id:"disintegrate",dmg:["1d8+4","2d8+8","3d8+12","4d8+16"],tags:["death","undead"],range:["close","near","far","sight"],input:["rank"],replace:["dmg","range"],html:"Disintegrate (dmg) [range]"},{id:"deathsv",dmg:["1d6","2d6","3d6","4d6"],tags:["death","undead"],range:["close","near","far","sight"],input:["rank"],replace:["dmg","range"],html:"Death (dmg) [CON save,range]"},{id:"flight",mv:[12,24,72,240],tags:["air","animal","dragon"],input:["rank"],replace:["mv"],html:"Flight (mv)"},{id:"gasform",rank:1,tags:["air"],html:"Gaseous Form"},{id:"haste",nact:[0,1,2],tags:["speed"],input:["rank"],replace:["nact"],html:"Haste (+nact Actions)"},{id:"heal",heal:["1d6","2d6","3d6","4d6"],tags:["life","healing"],range:["touch","touch","close","near"],input:["rank"],replace:["heal","range"],html:"Healing (heal) [range]"},{id:"intangible",rank:1,tags:["ghost","air","sun"],html:"Intangible"},{id:"immune",rank:1,tags:["element","armor"],input:["immunity"],replace:["immunity"],html:"Immune (immunity)"},{id:"immunewp",rank:1,tags:["armor","undead"],html:"Immune to non-magical weapons"},{id:"invis",extra:["","","5ft radius","20ft radius"],tags:["sneaky"],input:["rank"],replace:["extra"],html:"Invisibility extra"},{id:"lvdrain",save:["+4 WIS save","+2 WIS save","WIS save","nosave"],tags:["death","undead"],input:["rank"],replace:["save"],html:"Level Drain [save]"},{id:"lifedrain",dmg:["1d4","2d4","3d4","4d4"],tags:["death","undead"],range:["touch","touch","close","near"],input:["rank"],replace:["dmg","range"],html:"Life Drain (dmg) [range]"},{id:"lifespt",rank:1,tags:["life","armor"],html:"Full Life Support"},{id:"liquid",rank:1,tags:["water"],html:"Liquid Form"},{id:"MU",tags:["magic"],level:["","2nd level spells","4th level spells","9th level spells"],input:["rank","schools"],replace:["level","schools"],html:"Magic User (level) [schools]"},{id:"mindblast",dmg:["1d6","2d6","3d6","4d6"],tags:["mind"],range:["close","near","far","sight"],input:["rank"],replace:["dmg","range"],html:"Mind Blast (dmg) [CHA Save,range]"},{id:"mindctl",tags:["mind"],range:["close","near","far","sight"],input:["rank"],replace:["range","svpen"],html:"Mind Control [svpenCHA Save,range]"},{id:"poison",saveval:["","","","-2 "],tags:["bug","poison"],dmg:["1d6","2d6","death","death"],input:["rank"],replace:["saveval","dmg"],html:"Poison (dmg) [savevalCON save,touch]"},{id:"polymorph",sv:"CON",svpen:!0,tags:["magic","transmutation"],range:["touch","near","far","sight"],duration:["1d6 rounds","1d6 turns","1d6 hours","permanent"],input:["rank"],replace:["svpen","range","duration"],html:"Polymorph [svpenCON Save,range,duration]"},{id:"regen",heal:[0,1,3],tags:["life","armor","healing"],input:["rank"],replace:["heal"],html:"Regeneration (heal hp/round)"},{id:"resist",save:[2,4],DRval:[4,8],tags:["element","armor"],input:["rank","element"],replace:["save","DRval","element"],html:"Resist (element) +save DR[DRval]"},{id:"shapeshift",rank:1,tags:["transmutation","sneaky"],html:"Shapeshifter"},{id:"sleep",tags:["mind","charm"],range:["close","near","far","sight"],input:["rank"],replace:["svpen","range"],html:"Sleep [svpenCHA save,range]"},{id:"stealmem",tags:["mind"],duration:["1d4 rounds","1d4 turns","1d4 hours","permanent"],range:["touch","close","near","far"],input:["rank"],replace:["duration","svpen","range"],html:"Steal Memories [svpenWIS save,range,duration]"},{id:"stun",tags:["bug","poison","lightning","ice"],duration:["1d4 rounds","1d4 turns","1d4 hours","permanent"],range:["touch","touch","touch","near"],input:["rank"],replace:["duration","svpen","range"],html:"Stun [svpenCON save,range,duration]"},{id:"summon",tags:["summon"],nCL:[2,6,9,12],input:["rank"],replace:["nCL"],html:"Summon Creature (nCL CL)"},{id:"supperattr",tags:["super"],mult:[1,2,3,4],input:["rank","attr"],replace:["attr","mult"],html:"Super attr (multX)"},{id:"strike",tags:["might","animal","combat"],dmg:["1d10","4d6","6d6","8d6"],bonus:[0,1,3,5],input:["rank"],replace:["dmg","bonus"],html:"Strike (dmg) [+bonus to hit/dmg]"},{id:"swim",mv:[6,12,36],bonus:[0,2,4],tags:["animal","swim","water"],input:["rank"],replace:["mv"],html:"Swimmer [Swim (mv)]"},{id:"TK",sv:"STR",svpen:!0,tags:["mind","force"],dmg:["1d6","3d6","5d6","7d6"],llb:["1500 lb","1.5 ton","15 ton","100 ton"],htlb:["150 lb","300 lb","1.5 ton","10 ton"],input:["rank"],replace:["llb","htlb"],html:"Telekinesis (Lift llb, Hold/Throw htlb)"},{id:"TP",tags:["mind"],range:["far","10 miles","same world","galaxy sector"],input:["rank"],replace:["range"],html:"Telepathy [range]"},{id:"teleport",tags:["speed","teleport"],range:["far","10 miles","same world","galaxy sector"],input:["rank"],replace:["range"],html:"Teleport [range]"},{id:"truesight",rank:1,tags:["magic","sight"],html:"True Sight"},{id:"wallcrl",rank:1,tags:[""],html:"Wall Crawling"},{id:"weather",tags:["air","storm"],size:["1 mile","10 mile","30 mile","100 mile"],input:["rank"],replace:["size"],html:"Weather Control [size radius]"},{id:"snare",tags:["sneaky","combat"],range:["close","near","far","sight"],input:["rank"],replace:["svpen","range"],html:"Snare [svpenSTR save,range]"},{id:"undead",rank:0,tags:["undead"],html:"Undead"}],CPX.data.feats=["Analytic Taste","Chameleon","Danger Sense","Detect Supernatural","Doesn’t Eat or Drink","Doesn’t Sleep","Extra Arms or Prehensile Tail","Extra Legs","Heightened Smell","Heightened Hearing","Immortality","Micro-Vision","Omni-Lingual","Radar","Radio","Sensory Protection","Sonar","Super Vision","Swinging","Tiny","Water Breathing "],CPX.data.aspect=[["strength","power","might"],["trickery","dexterity","alacrity","journeying"],["time","wealth","luck"],["constitution","endurance"],["knowledge","intelligence","artifice"],["nature","wisdom","beasts","fertility"],["culture","charisma","command"],["bow","sword"],["sorcery","force","fire"],["sea","earth","sky","sun","night"],["death","health"],["war","lies","discord","deception"],["peace","truth","balance"],["hate","envy"],["love","admiration","passion"].telekinesis],CPX.data.element=[["air","sky","cloud","wind","storm"],["earth","stone","mountain"],["fire","sun","desert","light"],["water","sea","storm"],["ice","winter"],["lightning","storm","cloud"],["poison","disease"],["life","death"],["force","sorcery"]],CPX.data.magic=["divination","enchantment","evocation","abjuration","conjuration","illusion","necromancy","transmutation","summoning"],CPX.data.traps=["alarm","ensnaring/paralyzing","pit","crushing","piercing/puncturing","chopping/slashing","confusing (maze, etc.)","gas (poison, etc.)","element","ambush","magic"],CPX.data.challenges=["burglary","corruption","disorder","investigation","invention","labor","performance","persuasion","puzzle"],CPX.data.rarity=["common","uncommon","rare","legendary","epic"],CPX.data.wealth=["middle class individual","wealthy professional","town","city","metropolis","state/provence","nation","large nation/multinational corp","national alliance","planet"],CPX.data.GBWords=["alacrity","artifice","beasts","bow","command","death","deception","earth","endurance","fertility","fire","health","journeying","knowledge","luck","might","night","passion","sea","sky","sorcery","sun","sword","time","wealth"],CPX.elementType=function(a){return["air","sky","cloud","wind","storm"].includes(a)?"air":["earth","stone","mountain"].includes(a)?"earth":["fire","sun","desert","light"].includes(a)?"fire":["water","sea","storm"].includes(a)?"water":["ice","winter"].includes(a)?"ice":["lightning","storm","cloud"].includes(a)?"electricity":["poison","disease"].includes(a)?"disease":["life","death"].includes(a)?a:["force","sorcery"].includes(a)?a:void 0},CPX.powerArray=function(a){var b=[];return Array.isArray(a)?a.forEach(function(a){CPX.data.powers.forEach(function(c){c.tags.includes(a)&&b.push(c.id)})}):CPX.data.powers.forEach(function(c){c.tags.includes(a)&&b.push(c.id)}),b},CPX.powerText=function(a){var b=CPX.data.powers.find(function(b){return b.id==a.id}),c=b.html;return objExists(b.replace)||(b.replace=[]),b.replace.forEach(function(d){if("svpen"==d){var e=["+2 ","","-2 ","-4 "][a.rank];c=c.replace(d,e)}else c=objExists(a[d])?c.replace(d,a[d]):Array.isArray(b[d])?c.replace(d,b[d][a.rank]):c.replace(d,b[d])}),c},CPX.gen.actor=function(a){return CPXC.pickone(CPX.data.actorCommon)},CPX.gen.aspect=function(a){for(var b=[],c="";b.length<a;)c=CPXC.pickone(CPXC.pickone(CPX.data.aspect)),b.includes(c)||b.push(c);return b},CPX.gen.element=function(a){for(var b=[],c="";b.length<a;)c=CPXC.pickone(CPXC.pickone(CPX.data.element)),b.includes(c)||b.push(c);return b},CPX.gen.magic=function(a){for(var b=[].concat(CPX.data.magic),c=[],d=0;d<a;d++)c.push(CPXC.pickone(b)),b.splice(b.indexOf(c[d]),1);return c},CPX.gen.ally=function(a,b){a="undefined"==typeof a?CPXC:a,b="undefined"==typeof b?b:1;var c=a.weighted([1,2,3,4,5],[1,.3,.075,.02,.005]),d=CPX.data.rarity[c-1],e={1:["hireling"],2:["hireling","veteran"],3:["hireling","veteran","elite"],4:["veteran","elite"],5:["cosmic","elite"]};return A={class:["ally"],R:c,text:a.pickone(e[c])},"veteran"==A.text||"elite"==A.text,A.text+=" ("+d+")",A},CPX.gen.treasure=function(a){a="undefined"==typeof a?CPXC:a;var b=a.weighted([1,2,3,4,5],[1,.3,.075,.02,.005]),c=CPX.data.rarity[b-1],d={1:["CPX","trinkets","tools","coins/gems/jewelry","supplies/trade goods"],2:["magic item","poisons/potions","CPX","coins/gems/jewelry","supplies/trade goods","weapons/armor","scroll"],3:["magic item","poisons/potions","CPX","coins/gems/jewelry","weapons/armor","scroll"],4:["magic item","artifact","coins/gems/jewelry","weapons/armor","book/scroll"],5:["magic item","artifact","coins/gems/jewelry","weapons/armor","book/scroll"]};if(T={class:["treasure"],R:b,text:a.pickone(d[b])},["trinkets","coins/gems/jewelry","supplies/trade goods"].includes(T.text)){var e=" (the wealth of a ",f=CPXC.pickone([0,1])+2*(b-1);e+=DATA.wealth[f]+")",T.text+=e}else T.text+=" ("+c+")";return T},CPX.gen.trap=function(a,b){a="undefined"==typeof a?CPXC:a;var c=a.weighted([1,2,3,4,5],[4,2,1,.5,.1]),d=0,e={class:["trap"],D:0,dmg:4,text:a.pickone(DATA.traps)};return d=1==c?a.weighted([0,1],[1,1]):a.natural({min:1,max:c}),e.D+=2*d,e.dmg+=2*(c-d),objExists(CPX.gen[e.text])&&(e.text=e.text+" ("+CPX.gen[e.text](1)[0]+")"),"ambush"!=e.text&&(e.text+=" [-"+e.D+"/"+b+"d"+e.dmg+"]"),e},CPX.gen.challenge=function(a,b){a="undefined"==typeof a?CPXC:a,b="undefined"==typeof b?1:b;var c=Math.floor(b/4),d=[1,2,3,4,5].slice(c),e=[4,2,1,.5,.1].slice(c),f=a.weighted(d,e),g=a.pickone(CPX.data.challenges),h={class:["challenge",g],D:0,S:1},i=0;return 2==f?h.D+=2:3==f?(i=a.weighted([1,2],[2,1]),h.D+=2*i,h.S+=2-i):4==f?(i=a.weighted([1,2,3],[1,1,1]),h.D+=2*i,1==i&&h.S++):5==f&&(i=a.weighted([1,2,3,4],[1,1,1,1]),h.D+=2*i,h.S++,i<3&&h.S++),h.text="[-"+h.D+"/"+h.S+"]",h},CPX.gen.fight=function(a){var b=CPXC.diceSum("3d6"),c=Number(a.T),d={class:["encounter"],HD:{m:0,e:0},text:""};return b<5?(d.HD.e=CPXC.diceSum("2d4")+c,d.text="Special foe ["+d.HD.e+" HD]"):b<9?(d.HD.m=CPXC.d4()+c,d.text="Minions ["+d.HD.m+" HD]"):b<13?(d.HD.m=CPXC.diceSum("2d4")+c,d.text="Minions ["+d.HD.m+" HD]"):b<16?(d.HD.m=CPXC.diceSum("1d6")+c,d.text="Minions ["+d.HD.m+" HD]",CPXC.bool()&&(d.HD.m+=c,d.text+="Minions ["+d.HD.m+" HD] & Beasts/Allies")):b<18?(d.HD.m=CPXC.diceSum("2d4"),d.HD.e=2*c,d.text="Elites ["+d.HD.e+" HD] & Minions ["+d.HD.m+" HD]"):(d.HD.e=c+3,d.text="Lieutenant ["+d.HD.e+" HD]",CPXC.bool()&&(d.HD.m=CPXC.diceSum("3d6"),d.text+=" & Minions ["+d.HD.m+" HD]")),d.text="Fight: "+d.text+".",d};const axialDirections=[[1,-1],[1,0],[0,1],[-1,1],[-1,0],[0,-1]];var Zone=function(a,b){this.id=b,this.cells=[],this.color=a.RNG.color({format:"hex"}),this.visible=!1,this.special=[],this.class=["zone"],this.parent=[a]},HCell=function(a,b,c,d){this.id=a+"_"+b,this.q=a,this.r=b,this.terrain=c,this.climate=-1,this.zone=-1,this.special=[],this.doom=0,objExists(d)&&(this.zone=d.id)};CPX.hex.center=function(a,b,c){return c="undefined"==typeof c||c,x=a*Math.sqrt(3)*(b.q+b.r/2),y=3*a/2*b.r,c||(x=3*a/2*b.q,y=a*Math.sqrt(3)*(b.r+b.q/2)),{x:x,y:y}},CPX.hex.mapBounds=function(a){var b=CPX.hex.center(a._hexradius,{q:a.r,r:a.q},a._pointy),c=CPX.hex.center(a._hexradius,{q:a.r+a.dw,r:a.q+a.dh},a._pointy),d={x:c.x-b.x+2*a._hexradius,y:c.y-b.y+2*a._hexradius};return d},CPX.hex.axialD=function(a,b){return(Math.abs(a.q-b.q)+Math.abs(a.q+a.r-b.q-b.r)+Math.abs(a.r-b.r))/2},CPX.hex.neighboorIDs=function(a){for(var b=[],c=0,d=0,e=0;e<axialDirections.length;e++)c=a.q+axialDirections[e][0],d=a.r+axialDirections[e][1],b.push(c+"_"+d);return b},CPX.hex.withinX=function(a,b){var c=[],d=[],e="",f=0,g=0,h={};c.push(a.id),d[0]=[a];for(var i=1;i<=b;i++){d[i]=[];for(var j=0;j<d[i-1].length;j++){h=d[i-1][j];for(var k=0;k<axialDirections.length;k++)f=h.q+axialDirections[k][0],g=h.r+axialDirections[k][1],e=f+"_"+g,c.includes(e)||(c.push(e),d[i].push({id:e,q:f,r:g}))}}return d.all=c,d},CPX.hex.cellQR=function(a){var b=a.indexOf("_"),c=Number(a.substr(0,b)),d=Number(a.substr(b+1));return{q:c,r:d}},CPX.hex.pop=function(a,b,c){var d=b.special.length,e=c,f={type:"pop",seed:a.seed.concat([b.id,"p"+d]),terrain:b.terrain,visible:!1};"atlas"==a._type&&(e=a.RNG.weighted([c-1,c,c+1],[.25,.6,.15])),f.scale=e,CPX.basicVisibility(a,e)&&(f.visible=!0),"hexPlane"==a._type&&(f.template={people:CPX.people({seed:f.seed.concat(["pop"]),terrain:b.terrain})}),b.special.push(f)},CPX.hex.hideout=function(a,b,c){var d=b.special.length,e={type:"pop",subtype:"hideout",seed:a.seed.concat([b.id,"h"+d]),terrain:b.terrain,scale:c[0],level:c[1],visible:!1};b.special.push(e)},CPX.hex.order=function(a,b,c){var d=b.special.length,e=c[0];"atlas"==a._type&&(e=a.RNG.weighted([c[0]-1,c[0],c[0]+1],[.25,.6,.15]));var f={type:"pop",subtype:"order",seed:a.seed.concat([b.id,"d"+d]),terrain:b.terrain,scale:e,level:c[1],visible:!1};CPX.basicVisibility(a,e)&&(f.visible=!0),b.special.push(f)},CPX.hex.lair=function(a,b,c){var d=b.special.length,e={type:"lair",seed:a.seed.concat([b.id,"l"+d]),terrain:b.terrain,scale:4,level:c,visible:!1};b.special.push(e)},CPX.hex.ruin=function(a,b,c){var d=b.special.length,e=c;e=a.RNG.weighted([c[0]-2,c[0]-1,c[0],c[0]+1,c[0]+2],[.05,.2,.5,.2,.05]);var f={type:"ruin",seed:a.seed.concat([b.id,"r"+d]),terrain:b.terrain,scale:e,level:c[1],visible:!1};CPX.basicVisibility(a,e)&&(f.visible=!0),b.special.push(f)},CPX.hex.site=function(a,b,c){var d=b.special.length,e=c[0];"hexPlane"==a._type?e=a.RNG.weighted([c[0]-1,c[0],c[0]+1],[.2,.6,.2]):"atlas"==a._type&&(e=a.RNG.weighted([c[0]-2,c[0]-1,c[0],c[0]+1],[.1,.45,.4,.05]));var f=b.terrain;a.RNG.bool()&&(f=a.RNG.pickone(TERRAINS));var g={type:"site",seed:a.seed.concat([b.id,"s"+d]),terrain:f,level:c[1],scale:e,visible:!1};CPX.basicVisibility(a,e)&&(g.visible=!0),b.special.push(g)},CPX.cellArray=function(a){var b=[];for(var c in a.cells)b.push(c);return b};const TERRAINS=["water","swamp","desert","plain","forest","hill","mountain"],terrainColors=["aqua","CadetBlue","Beige","LightGreen","ForestGreen","Brown","DarkGrey"],CLIMATES=["arctic","sub-arctic","temperate","sub-tropical","tropical"];CPX.display.makeGraphics=function(a){var b=new createjs.Shape;b.data=a.data.data,b.graphics=a.dtype(a.data),a.container.addChild(b),b.addEventListener("click",a.onClick)},CPX.display.centerAdjust=function(a){a.display.stage.children.forEach(function(b){b.x-=a.center.x,b.y-=a.center.y}),a.display.stage.update()},CPX.display.clearActive=function(a){if(objExists(a.display)){var b=["map","siteMarkers","tokens"];b.forEach(function(b){a.display[b].children.forEach(function(a){a.removeAllEventListeners()})}),delete a.display}},Vue.component("c-menubar",{props:["id","show"],template:'<div class="btn-group btn-group-justified top-header" role="group"><div class="btn-group" role="group" v-if="show.new"><button @click="new" type="button" class="btn btn-info">New</button></div><div class="btn-group" role="group" v-if="show.load"><button @click="load" type="button" class="btn btn-info">Load</button></div><div class="btn-group" role="group" v-if="show.save"><button @click="save" type="button" class="btn btn-info">Save</button></div><div class="btn-group" role="group" v-if="show.close"><button @click="close" type="button" class="btn btn-info">Close</button></div></div>',methods:{new:function(){HUB.$emit(this.id+"-new","")},close:function(){HUB.$emit(this.id+"-close","")},save:function(){HUB.$emit(this.id+"-save","")},load:function(){HUB.$emit(this.id+"-showload","")}}}),Vue.component("c-loadselect",{props:["id","list","show"],template:'  <div class="center content" v-show="show"><select v-model="loadID">  <option class="center" v-for="(key,val) in list" v-bind:value="key">{{val}}</option> </select>  <button v-on:click="load" type="button" class="btn btn-info">Load</button></div>  ',data:function(){return{loadID:""}},methods:{load:function(){var a=this;CPXSAVE.getItem(this.loadID).then(function(b){HUB.$emit(a.id+"-loadObj",b)})}}});var vMainMenu=new Vue({el:"#mainmenu",data:{show:!1},methods:{open:function(){this.show=!0},About:function(){this.show=!1,CPX.vue.page.open("c-txt","wide")},hexArea:function(){this.show=!1,CPX.vue.page.open("c-cha","")},Sector:function(){this.show=!1,CPX.vue.page.open("c-cps","")},HeroEd:function(){this.show=!1,CPX.vue.page.open("c-che","slim")},IncursionGen:function(){this.show=!1,CPX.vue.page.open("c-cpi","slim")},InvestigationGen:function(){this.show=!1,CPX.vue.page.open("c-cpv","slim")},cityGen:function(){this.show=!1,CPX.vue.page.open("c-cfp","slim")},areaBuilder:function(){this.show=!1,CPX.vue.page.open("c-cab","slim")},SystemGen:function(a){this.show=!1,CPX.vue.page.open("c-cpy","slim")},PWDGen:function(){this.show=!1,CPX.vue.page.open("c-pwd","slim")},PandCGen:function(){this.show=!1,CPX.vue.page.open("c-pnc","slim")},fpGen:function(a){this.show=!1,CPX.vue.page.open("c-fpg","slim")},clearAllData:function(){var a="Clear All Saved Data",b='<div class="center">This will clear all saved data (heroes, generated content, etc.) - everything. </br>Are you sure?</div>';CPX.vue.notify.open(a,b,!1,"c-deleteall"),CPX.vue.notify.deleteall=!0},close:function(a){this.show=!1}}});Vue.component("c-deleteall",{template:'<div class="center content"><button v-on:click="deleteAll" type="button" class="pad-y btn btn-danger">Yes</button><button v-on:click="close" type="button" class="pad-y btn btn-success">Cancel</button></div>',methods:{close:function(){CPX.vue.notify.close()},deleteAll:function(){CPXSAVE.clear(),CPX.vue.notify.close()}}}),CPX.vue.notify=new Vue({el:"#mainNotify",data:{show:!1,showclose:!1,header:"",content:"",deleteall:"false",currentView:""},methods:{open:function(a,b,c,d){null!=d&&(this.currentView=d),this.header=a,this.content=b,this.showclose=c,this.show=!0},close:function(a){this.header="",this.content="",this.deleteall=!1,this.show=!1}}}),Vue.component("c-ogl",{template:"#OGL",methods:{close:function(){CPX.vue.page.close()}}}),Vue.component("c-txt",{template:"#about",methods:{close:function(){CPX.vue.page.close()},showOGL:function(){CPX.vue.page.show=!1,CPX.vue.page.open("c-ogl","wide")}}}),CPX.vue.page=new Vue({el:"#cpxpage",data:{show:!1,width:"",currentView:""},methods:{onCreated:function(a){var b=a.vid;objExists(a.loadids)&&(b=a.loadids),this.loadall(b).then(function(b){a.allgens=b}),a.new(),HUB.$on(a.vid+"-new",a.new),HUB.$on(a.vid+"-close",a.close),HUB.$on(a.vid+"-save",a.save),HUB.$on(a.vid+"-loadObj",a.load),HUB.$on(a.vid+"-remove",a.remove),HUB.$on(a.vid+"-add",a.add),HUB.$on(a.vid+"-mod",a.mod),HUB.$on(a.vid+"-showload",function(){a.showlist.load=!a.showlist.load})},onBeforeDestroy:function(a){HUB.$off(a.vid+"-new",a.new),HUB.$off(a.vid+"-close",a.close),HUB.$off(a.vid+"-save",a.save),HUB.$off(a.vid+"-loadObj",a.load),HUB.$off(a.vid+"-remove",a.remove),HUB.$off(a.vid+"-add",a.add),HUB.$off(a.vid+"-mod",a.mod),HUB.$off(a.vid+"-showload",function(){a.showlist.load=!a.showlist.load})},loadall:function(a){return new Promise(function(b,c){var d={};CPXSAVE.iterate(function(b,c,e){Array.isArray(a)?a.forEach(function(a){c.includes(a+"-")&&(d[c]=b.name)}):c.includes(a+"-")&&(d[c]=b.name)}).then(function(){b(d)})})},newGen:function(a){a.seed=[a.vid,"-",CPXC.string({length:21,pool:base62})],a.generate()},open:function(a,b){this.show=!0,this.currentView=a,this.width=b},close:function(){this.show=!1,this.currentView="",this.allgens={},vMainMenu.open()}}});var CHS={};CHS.DATA={size:[8,16,32,48,64,80,96,112,128,144,160],g:[0,.05,.15,.25,.35,.45,.7,.9,1,1.25,1.4],atm:[[0,"None","0.00","Vacc Suit"],[1,"Trace","0.001 to 0.09","Vacc Suit"],[2,"Very Thin, Tainted","0.1 to 0.42","Respirator, Filter"],[3,"Very Thin","0.1 to 0.42","Respirator"],[4,"Thin, Tainted","0.43 to 0.7","Filter"],[5,"Thin","0.43 to 0.7",""],[6,"Standard","0.71–1.49",""],[7,"Standard, Tainted","0.71–1.49","Filter"],[8,"Dense","1.5 to 2.49",""],[9,"Dense, Tainted","1.5 to 2.49","Filter"],["A","Exotic","Varies","Air Supply"],["B","Corrosive","Varies","Vacc Suit"],["C","Insidious","Varies","Vacc Suit"],["D","Dense, High","2.5+",""],["E","Thin, Low","0.5 or less",""],["F","Unusual","Varies","Varies"]],hydro:[["0%–5%","Desert world"],["6%–15%","Dry world"],["16%–25%","A few small seas."],["26%–35%","Small seas and oceans."],["36%–45%","Wet world"],["46%–55%","Large oceans"],["56%–65%","Large oceans"],["66%–75%","Earth-like world"],["76%–85%","Water world"],["86%–95%","Only a few small islands and archipelagos."],["96–100%","Almost entirely water."]],starport:{X:["None","None","No","None","None"],E:["Frontier","None","No","None","None"],D:["Poor","Unrefined","No","None","Scout"],C:["Routine","Unrefined","No","Can perform reasonable repairs","Scout"],B:["Good","Refined","Yes","Can construct non-starships","Naval, Scout"],A:["Excellent","Refined","Yes","Can construct starships and non-starships","Naval, Scout"]},govt:[[0,"None"],[1,"Company/Corporation"],[2,"Participating Democracy"],[3,"Self-Perpetuating Oligarchy"],[4,"Representative Democracy"],[5,"Feudal Technocracy"],[6,"Captive Government"],[7,"Balkanization"],[8,"Civil Service Bureaucracy"],[9,"Impersonal Bureaucracy"],["A","Charismatic Dictator"],["B","Non-Charismatic Leader"],["C","Charismatic Oligarchy"],["D","Religious Dictatorship"],["E","Religious Autocracy"],["F","Totalitarian Oligarchy"]],law:[[0,"No Law","No restrictions; candidate for Amber Zone status"],[1,"Low Law","Poison gas, explosives, undetectable weapons, weapons or mass destruction"],[2,"Low Law","Portable energy weapons (except ship-mounted weapons)"],[3,"Low Law","Heavy weapons"],[4,"Medium Law","Light assault weapons and submachine guns"],[5,"Medium Law","Personal concealable weapons"],[6,"Medium Law","All firearms except shotguns and stunners; carrying weapons discouraged"],[7,"High Law","Shotguns"],[8,"High Law","All bladed weapons, stunners"],[9,"High Law","Any weapons outside one’s residence; candidate for Amber Zone status"],["A","Extreme Law","Any weapons allowed at all; candidate for Amber Zone status"]],pop:["None","Few","Hundreds","Thousands","Tens of thousands","Hundreds of thousands","Millions","Tens of millions","Hundreds of millions","Billions","Tens of billions"]},CHS.system=function(a){var b={seed:a,planets:[]};b._id=a.join(""),b.RNG=new Chance(b._id),b.name=CPXC.capitalize(b.RNG.word()),b.stars=[b.RNG.weighted(HABSTARS[0],HABSTARS[1])];var c=[STARS[b.stars[0]][0][1],STARS[b.stars[0]][0][2]],d=[],e=[];b.HZone={min:c[0],max:c[1]};var f=0,g=0,h=0;b.RNG.diceSum("2d6")>4&&(f=b.RNG.d6()-2,f<1&&(f=1)),h=f>0?b.RNG.diceSum("2d6"):b.RNG.diceSum("3d6"),b.RNG.diceSum("2d6")>3&&(g=b.RNG.d6()-3,g<1&&(g=1));var i=f+g+h,j=0;e[0]=(b.RNG.d4()+1)/10,e[1]=e[0]+.3;for(var k=2;k<i;k++)j=Math.round10(e[0]+.3*Math.pow(2,k-1),-1),e[k]=j,j>=c[0]&&j<=c[1]&&d.push(j);0==d.length&&(j=c[0]+(c[1]-c[0])*b.RNG.d20()/20,e.push(j),d.push(j),e.sort(function(a,b){return a-b}));for(var k=0;k<f;k++)b.planets.push({class:["planet","gasgiant"]});for(var k=0;k<g;k++)b.planets.push({class:["belt"]});for(var k=0;k<h-1;k++)b.planets.push({class:["planet","terran"]});b.planets=b.RNG.shuffle(b.planets);var l=e.indexOf(b.RNG.pickone(d));return b.planets.push(b.planets[l]),b.planets[l]={class:["planet","terran"]},b.RNG=null,delete b.RNG,b.planets.forEach(function(a,c){b.planets[c].orbit=e[c],CHS.planet(b,c)}),b},CHS.planet=function(a,b){function c(){return d.orbit>a.HZone.min&&d.orbit<a.HZone.max}var d=a.planets[b];d.RNG=new Chance(a._id+"-"+b),"terran"==d.class[1]?c()?CHS.main(d.RNG,d):CHS.terran(d.RNG,d):"gasgiant"==d.class[1]&&(CHS.gasGiant(d.RNG,d),c()&&(d.moons=[{class:["planet","terran"]}],CHS.main(d.RNG,d.moons[0]))),d.RNG=null,delete d.RNG},CHS.gasGiant=function(a,b){b.class.push(b.RNG.weighted(["SJ","JJ","TJ"],[3,6,1])),
b.mass=a.weighted(PLANETS[b.class[2]].mass[0],PLANETS[b.class[2]].mass[1])},CHS.terran=function(a,b){b.size=a.diceSum("2d6")-2,b.size>0?b.atm=a.diceSum("2d6")-7+b.size:b.atm=0,b.atm<0&&(b.atm=0)},CHS.main=function(a,b){b.class.push("main"),b.size=a.diceSum("2d6")-2,b.size>0?b.atm=a.diceSum("2d6")-7+b.size:b.atm=0,b.atm<0&&(b.atm=0),b.hydro=a.diceSum("2d6")-7+b.size,[0,1,10,11,12].includes(b.atm)?b.hydro-=4:14==b.atm&&(b.hydro-=2),b.size<2&&(b.hydro=0),b.hydro<0&&(b.hydro=0),b.pop=a.diceSum("2d6")-2,b.size<3&&(b.pop-=1),b.atm<4&&0===b.hydro&&(b.pop-=2),b.atm>9?b.pop-=2:6==b.atm?b.pop+=3:[5,8].includes(b.atm)&&(b.pop+=1),b.pop>10&&(b.pop=10),b.pop<1&&(b.pop=1),b.starport=a.diceSum("2d6")-7+b.pop,b.starport<3?b.starport="X":b.starport<5?b.starport="E":b.starport<7?b.starport="D":b.starport<9?b.starport="C":b.starport<11?b.starport="B":b.starport="A",b.gov=a.diceSum("2d6")-7+b.pop,b.gov<0&&(b.gov=0),b.law=a.diceSum("2d6")-7+b.pop,b.law>10&&(b.law=10),b.law<0&&(b.law=0),b.TL=a.d6();var c={A:6,B:4,C:2,D:0,E:0,X:-4};b.TL+=c[b.starport],b.size<2?b.TL+=2:b.size<5&&(b.TL+=1),[0,1,2,3,10,11,12,13,14,15].includes(b.atm)&&(b.TL+=1),[0,9].includes(b.hydro)?b.TL+=1:10==b.hydro&&(b.TL+=2),[2,3,4,5,6,7].includes(b.pop)?b.TL+=1:8==b.pop?b.TL+=2:9==b.pop?b.TL+=3:10==b.pop&&(b.TL+=4),[0,5].includes(b.gov)?b.TL+=1:[13,14].includes(b.gov)?b.TL-=2:7==b.gov&&(b.TL+=2)},Vue.component("c-chs-star",{props:["S","i"],template:'<div class="header strong">{{head | capitalize}} Main Sequence</div>',computed:{head:function(){return STARS[this.S][1]}}}),Vue.component("c-chs-planet",{props:["P","i","O","HZ"],template:'  <div class="header strong">{{head | capitalize}} ({{P.orbit}} AU)   <div class="pull-right" v-if="HZone">[HabZone]</div></div>  <div v-if="P.class.includes(`main`)" class="bottom-pad"><input class="form-control center" type="text" v-model="P.name" placeholder="NAME"></div>  <div v-if="P.class[1] == `terran`">  <div class="center"><strong>Diameter:</strong> {{D.size[P.size]*100}} km   ({{Math.round10(D.size[P.size]*100/12742,-2)}} earth) <strong>Gravity:</strong> {{D.g[P.size]}}g</div>  <div class="center"><strong>Atmosphere:</strong> {{D.atm[P.atm][1]}}</div>  <div v-if="main">  <div class="center"><strong>Hydrosphere:</strong> {{D.hydro[P.hydro][1]}} ({{D.hydro[P.hydro][0]}} water)</div>  <div class="content">  <div><strong>Population:</strong> {{D.pop[P.pop]}} [<strong>Tech:</strong> {{P.TL}}]</div>  <div><strong>Starport:</strong> {{D.starport[P.starport][1]}}</div>  <div><strong>Government:</strong> {{D.govt[P.gov][1]}}</div>  <div><strong>Law:</strong> {{D.law[P.law][1]}}</div>  </div></div></div>  ',data:function(){return{D:CHS.DATA}},computed:{HZone:function(){return this.P.orbit>this.HZ.min&&this.P.orbit<this.HZ.max},main:function(){return!!this.P.class.includes("main")},head:function(){return"planet"==this.P.class[0]?"gasgiant"==this.P.class[1]?PLANETS[this.P.class[2]].name+" ["+this.P.mass+"x Juptier]":this.P.class[1]:this.P.class[0]}}}),CPX.data.cityExtras=["school","barracks","fortified","market","militia","temple","guild","resource"],CPX.city=function(a){var b={seed:a.seed,size:a.size,class:["city"],name:"undefined"==typeof a.name?"":a.name,notes:"undefined"==typeof a.notes?"":a.notes,people:"undefined"==typeof a.people?[]:a.people,terrain:"undefined"==typeof a.terrain?[]:a.terrain};b._id=b.seed.join(""),b.RNG=new Chance(b._id);var c=b.RNG.weighted(["aspect","magic","element"],[2,1,1]);if(b.aspect=CPX.creature.special(b.RNG,c),0==b.people.length)for(var d=b.RNG.weighted([1,2,3],[7,2.5,.5]),e=0;e<d;e++)b.people.push(CPX.people(b.RNG,{terrain:a.terrain}));var f=b.RNG.weighted([1,2,3],[7,2.5,.5]);b.extras=[];for(var e=0;e<f;e++)b.extras.push(b.RNG.pickone(CPX.data.cityExtras));var g=b.RNG.pickone(CPX.data.troubleCategories);return b.trouble=b.RNG.pickone(CPX.data["t"+g]).id,b.RNG=null,delete b.RNG,b},Vue.component("c-cfp-CPC",{props:["obj"],template:'<div class="content"><input class="form-control input-lg center" type="text" v-model="obj.name" placeholder="NAME"><textarea class="form-control" type="textarea" v-model="obj.notes" placeholder="ADD NOTES"></textarea><div class="content-minor box"><div class="header strong center">Population</div><c-cfp-ppl v-for="ppl in obj.people" v-bind:P="ppl"></c-cfp-ppl></div><div class="input-group"><span class="input-group-addon strong">Aspect</span><input class="form-control center" type="text" v-model="obj.aspect"></div><div class="input-group" v-for="e in obj.extras"><span class="input-group-addon strong">Extra</span><input class="form-control center" type="text" v-model="e"></div><div class="input-group"><span class="input-group-addon strong">Trouble</span><select class="form-control" v-model="obj.trouble"><option  v-for="t in trouble" v-bind:value="t.id">{{t.id | capitalize}}</option></select></div><div class="center bottom-pad">{{tinfo(obj.trouble)}}</div></div>',computed:{trouble:function(){var a=[];return CPX.data.troubleCategories.forEach(function(b){a=a.concat(CPX.data["t"+b])}),a}},methods:{tinfo:function(a){return this.trouble.find(function(b){return b.id==a}).text}}}),Vue.component("c-cpxrpg-chg",{template:"#challenge",methods:{close:function(){CPX.vue.page.show=!1,CPX.vue.page.open("c-cpxrpg","wide")}}}),Vue.component("c-cpxrpg-inc",{template:"#incursion",methods:{close:function(){CPX.vue.page.show=!1,CPX.vue.page.open("c-cpxrpg","wide")}}}),Vue.component("c-cpxrpg",{template:"#cpxrpg",methods:{incursion:function(){CPX.vue.page.show=!1,CPX.vue.page.open("c-cpxrpg-inc","wide")},challenge:function(){CPX.vue.page.show=!1,CPX.vue.page.open("c-cpxrpg-chg","wide")},investigation:function(){CPX.vue.page.show=!1,CPX.vue.page.open("c-ogl","wide")}}}),CPX.data.DWCREATURES={beast:[["land","air","water"],[7,3,2]],land:["termite","tick","snail","slug","worm","ant","centipede","scorpion","snake","lizard","rat","weasel","boar","dog","fox","wolf","cat","lion","panther","deer","horse","ox","rhino","bear","gorilla","ape","mammoth","dinosaur"],air:["mosquito","firefly","locust","dragonfly","moth","bee","wasp","chicken","duck","goose","jay","parrot","gull","pelican","crane","raven","falcon","eagle","owl","condor","pteranodon"],water:["jellyfish","clam","eel","frog","fish","crab","lobster","turtle","alligator","shark","squid","octopus","whale"],professions:["Adventurer","Bandit","Berserker","Brigand","Merchant","Caveman","Guard","Pilgrim","Priest","Wizard","Ranger","Mercenary"],humanoid:{common:[[["halfling"],["goblin","kobold"],["dwarf","gnome"],["orc","hobgoblin","gnoll"],["half-elf","half-orc"],["elf"]],[3,2,2,2,2,1]],uncommon:[[["fey"],["catfolk","dogfolk"],["lizardfolk","merfolk","birdfolk"],["ogre","troll"],["cyclops","giant"]],[1,2,3,3,2]],hybrid:[[["centaur"],["werewolf","werebear"],["were"],["beast+1"],["beast+2"]],[2,3,1,4,2]]},monster:{unusual:[[["plant","fungus"],["undead","human"],["undead","humanoid"],["beast","beast"],["beast","ability"],["beast","feature"]],[3,2,1,2,2,2]],rare:[[["slime","ooze"],["creation"],["beast","oddity"],["unnatural"]],[3,3,3,3]],legendary:[[["dragon"],["colossus"],["unusual","+huge"],["rare","+huge"],["dragon","beast"],["dragon","unusual"],["dragon","rare"]],[1.5,1.5,3,3,1,1,1]]},undead:[[["haunt","wisp"],["ghost","spectre"],["banshee"],["wraith","wight"],["spirit lord","spirit master"],["zombie","skeleton"]],[4,4,1,2,1,4]],planar:[["imp","lesser elemental","lesser horror","greater elemental","greater horror","elemental lord"],[3,3,3,1,1,1]],divine:[["agent","champion","army","avatar"],[5,4,2,1]]},CPX.data.DWSPECIAL={ability:[["bless","curse"],["entangle","snare"],["poison","disease"],["paralyze","petrify"],["mimic","camouflage"],["seduce","hypnotize"],["dissolve","disintegrate"],["magic"],["drain life","drain magic"],["immunity"],["control minds","read minds"]],feature:[["heavily armored"],["flying","winged"],["multiple heads","headless"],["many eyes","one eye"],["many limbs","tail"],["tentacles"],["aspect"],["element"],["magic"],["oddity"],["great strength"],["offense"],["defense"],["deftness"],["durability"],["trickery"],["adaptation"],["divine favor"]],tag:["amorphous","cautious","construct","devious","intelligent","magical","organized","planar","stealthy","terrifying"],aspect:CPX.data.aspect.concat(["element"]),oddity:[["weird color","weird smell","weird sound"],["geometric"],["web","network","system"],["crystalline","glass-like"],["fungal"],["gaseous","smokey"],["mirage","illusion"],["volcanic","explosive"],["magnetic","repellant"],["devoid of life"],["unexpectedly alive"]],element:["air","earth","fire","water","life","death"],magic:["divination","enchantment","evocation","illusion","necromancy","summoning"]},CPX.DW.number=function(a,b){"undefined"==typeof b?a.n=CPXC.weighted(["solitary","group","horde"],[4,5,3]):a.n=b,"solitary"==a.n?(a.HP=12,a.dmg={d:10,b:0,p:0}):"group"==a.n?(a.HP=6,a.dmg={d:8,b:0,p:0}):(a.HP=3,a.dmg={d:6,b:0,p:0})},CPX.DW.size=function(a,b){"undefined"==typeof b?a.size=CPXC.weighted(["tiny","small","standard","large","huge"],[1,2,6,2,1]):a.size=b,"tiny"==a.size?(a.dmg.b-=2,a.range="hand"):"small"==a.size?a.range="close":"standard"==a.size?a.range="close":"large"==a.size?(a.range="close, reach",a.HP+=4,a.dmg.b+=1):"huge"==a.size&&(a.range="reach",a.HP+=8,a.dmg.b+=3)},CPX.DW.beast=function(){var a=CPXC.weighted(CPX.data.DWCREATURES.beast[0],CPX.data.DWCREATURES.beast[1]),b={name:CPXC.pickone(CPX.data.DWCREATURES[a]),class:["beast"],special:[],notes:""};return CPX.DW.number(b),CPX.DW.size(b),b.armor=CPXC.weighted([0,1,2,3],[1,5,5,1]),b},CPX.DW.human=function(){var a=CPXC.pickone(CPX.data.DWCREATURES.professions),b={name:"Human "+a,class:["human"],special:[],notes:""};return["Priest","Wizard"].includes(a)&&(b.special=CPX.DW.special("magic")),CPX.DW.number(b),CPX.DW.size(b,"standard"),b.armor=CPXC.weighted([0,1,2,3],[1,5,5,1]),b},CPX.DW.werefolk=function(){var a=CPX.DW.beast();return a.name="Were-"+a.name,a.class.push("were","humanoid"),a},CPX.DW.beastfolk=function(a){var b=[CPX.DW.beast()];2==a&&(b.push(CPX.DW.beast()),b=CPXC.shuffle(b));var c=b[0];return 2==a&&(c.name=b[0].name+"-"+b[1].name),c.name+=" folk",c.class.push("humanoid"),c},CPX.DW.humanoid=function(){var a=CPXC.weighted(["common","uncommon","hybrid"],[7,3,2]),b=CPXC.weighted(CPX.data.DWCREATURES.humanoid[a][0],CPX.data.DWCREATURES.humanoid[a][1]);b=CPXC.pickone(b);var c={special:[],notes:"",class:["humanoid"]};return["were","beast+1","beast+2"].includes(b)?c="were"==b?CPX.DW.werefolk():"1"==b[6]?CPX.DW.beastfolk(1):CPX.DW.beastfolk(2):["halfling","goblin","kobold","dwarf","gnome"].includes(b)?(c.name=b,CPX.DW.number(c),CPX.DW.size(c,"small")):["ogre","troll","cyclops","giant"].includes(b)?(c.class.push("giant-kin"),c.name=b,CPX.DW.number(c),CPX.DW.size(c,"large")):"fey"==b?(c.class.push("fey"),c.name=b,CPX.DW.number(c),CPX.DW.size(c,"tiny")):(c.name=b,CPX.DW.number(c),CPX.DW.size(c,"standard")),c.armor=CPXC.weighted([0,1,2,3],[1,5,5,1]),CPX.DW.specialMod(c),c},CPX.DW.monster=function(a){"undefined"==typeof a&&(a=CPXC.weighted(["unusual","rare","legendary"],[7,3,2]));var b=CPXC.weighted(CPX.data.DWCREATURES.monster[a][0],CPX.data.DWCREATURES.monster[a][1]),c={};return["undead","unnatural"].includes(b[0])?c=CPX.DW[b[0]]():"beast"==b[0]?c=CPX.DW.mosterBeast(b):b.includes("dragon")?c=CPX.DW.dragon(b):b.includes("+huge")?(c=CPX.DW.monster(b[0]),CPX.DW.number(c,c.n),CPX.DW.size(c,"huge")):b.includes("plant")?(c={name:CPXC.pickone(b),special:CPX.DW.special("oddity"),notes:""},c.class=[c.name],CPX.DW.number(c),CPX.DW.size(c),c.armor=CPXC.weighted([0,1,2,3],[1,5,5,1]),CPX.DW.specialMod(c)):b.includes("slime")?(c={name:CPXC.pickone(b),special:["amorphous"],notes:""},c.class=[c.name],CPX.DW.number(c),CPX.DW.size(c),c.armor=CPXC.weighted([1,2,3,4],[1,5,5,1]),CPX.DW.specialMod(c)):"colossus"==b[0]?c=CPX.DW.colossus():"creation"==b[0]&&(c=CPX.DW.creation()),c},CPX.DW.mosterBeast=function(a){var b=CPX.DW.beast();if("+huge"==a[1])b=CPX.DW.beast(),CPX.DW.number(b,b.n),CPX.DW.size(b,"huge");else if("beast"==a[1]){var c=CPX.DW.beast();b.name+="-"+c.name,b.special=b.special.concat(CPX.DW.special("feature"))}else b.special=b.special.concat(CPX.DW.special(a[1]));return CPX.DW.specialMod(b),b},CPX.DW.chimerae=function(){return CPX.DW.mosterBeast(["beast","beast"])},CPX.DW.colossus=function(){var a=CPXC.weighted(["human","beast","humanoid"],[3,3,2]),b=CPX.DW[a]();return b.name+=" colossus",b.class.push("colossus"),CPX.DW.number(b,"solitary"),b.HP="X",b.dmg[0]=12,b.range=["far"],b.armor="X",b.special=b.special.concat(CPX.DW.special("ability"),CPX.DW.special("aspect"),CPX.DW.special("element"),CPX.DW.special("feature")),CPX.DW.specialMod(b),b},CPX.DW.creation=function(){var a=CPXC.weighted(["human","beast","humanoid"],[3,3,2]),b=CPX.DW[a]();return b.name+=" construct",b.class=["construct"],CPX.DW.number(b),CPX.DW.size(b),b.special.push("construct"),b.special=b.special.concat(CPX.DW.special("ability"),CPX.DW.special("feature")),b.armor=CPXC.weighted([1,2,3,4],[1,5,5,1]),CPX.DW.specialMod(b),b},CPX.DW.undead=function(a){"undefined"==typeof a&&(a=CPXC.weighted(["human","humanoid","beast"],[2,1,1]));var b=CPX.DW[a](),c=CPXC.weighted(CPX.data.DWCREATURES.undead[0],CPX.data.DWCREATURES.undead[1]);return b.name+=" "+CPXC.pickone(c),b.class.push("undead"),b.special=b.special.concat(CPX.DW.special("ability")),b.armor=CPXC.weighted([1,2,3,4],[1,5,5,1]),CPX.DW.specialMod(b),b},CPX.DW.unnatural=function(a){"undefined"==typeof a&&(a=CPXC.weighted(["undead","planar","divine"],[8,3,1]));var b={special:[],class:[],notes:""};return"undead"==a?(b=CPX.DW.undead(),b.special=b.special.concat(CPX.DW.special("feature"))):(b.name=CPXC.weighted(CPX.data.DWCREATURES[a][0],CPX.data.DWCREATURES[a][1]),"divine"==a?(b.name="divine "+b.name,b.class.push("divine"),b.special=b.special.concat(CPX.DW.special("ability"),CPX.DW.special("aspect"),CPX.DW.special("element"),CPX.DW.special("feature"),CPX.DW.special("tag"))):(b.class.push("planar"),b.special=b.special.concat(CPX.DW.special("ability"),CPX.DW.special("element"),CPX.DW.special("feature"),CPX.DW.special("tag"))),CPX.DW.number(b),b.name.includes("army")&&CPX.DW.number(b,"horde"),CPX.DW.size(b),b.name.includes("imp")&&(CPX.DW.number(b,b.n),CPX.DW.size(b,"tiny")),b.armor=CPXC.weighted([2,3,4,5],[1,5,5,1])),CPX.DW.specialMod(b),b},CPX.DW.dragon=function(a){var b={name:"Dragon",class:[],special:[],notes:""};return a.length>1?["unusual","rare"].includes(a[1])?(b=CPX.DW.monster(a[1]),b.name+=" dragon"):(b=CPX.DW[a[1]](),b.name+=" dragon"):b.special=b.special.concat(CPX.DW.special("ability"),CPX.DW.special("feature")),b.class.push("dragon"),b.armor=CPXC.weighted([2,3,4,5],[1,5,5,1]),CPX.DW.number(b,"solitary"),CPX.DW.size(b,"huge"),b.special=b.special.concat(CPX.DW.special("element"),CPX.DW.special("magic")),CPX.DW.specialMod(b),b},CPX.DW.specialMod=function(a){a.special.forEach(function(b){"heavily armored"==b&&(a.armor+=2),"great strength"==b&&(a.dmg.b+=2,a.special.push("forceful")),"offense"==b&&(a.notes+="Use better of two damage rolls. "),"defense"==b&&(a.armor+=1),"deftness"==b&&(a.dmg[2]+=1),"durability"==b&&(a.HP+=4),"trickery"==b&&(a.special.push("stealthy"),a.notes+="+1 tricky move. "),"adaptation"==b&&(a.notes+="+1 special quality. "),"divine favor"==b&&(a.special=a.special.concat(CPX.DW.special("magic"))),b.includes("magic")&&(a.notes+="+1 spell move. "),b.includes("element")&&(a.notes+="+1 elemental move. ")})},CPX.DW.special=function(a){var b=["ability","feature","tag","aspect","oddity"],c=["ability","feature","tag","aspect","oddity","element","magic"],d=CPX.data.DWSPECIAL[a],e=[CPXC.pickone(d)];return b.includes(a)&&CPXC.bool({likelihood:100/12})&&e.push(CPXC.pickone(d)),e.forEach(function(b,d){if(["ability","feature","aspect","oddity"].includes(a)&&(b=CPXC.pickone(b),e[d]=b),c.includes(b)){var f=CPX.DW.special(b);e.splice(d,1),e=e.concat(f)}["element","magic","aspect"].includes(a)?e[d]=a+" ("+b+")":"immunity"==b&&(e[d]=b+" ("+CPXC.pickone(CPX.data.DWSPECIAL.element)+")")}),e},CPX.DW.creature=function(){var a=CPXC.weighted(["beast","human","humanoid","monster"],[4,2,2,4]);return CPX.DW[a]()},CPX.DW.beingGen=function(a){var b={};return b="dragon"==a.type?CPX.DW[a.type](CPXC.pickone([["dragon"],["dragon","beast"],["dragon","unusual"],["dragon","rare"]])):CPX.DW[a.type](),b.seed=a.seed,b._id=b.seed.join(""),b},Vue.component("c-pnc-dwb-short",{props:["obj"],template:'  <div class="content-minor"> <strong>{{obj.name | capitalize}}</strong>     <div><strong>#: </strong>{{obj.n}}, <strong>Sz: </strong>{{obj.size}}, <span v-if="obj.special.length>0"><strong>Tags: </strong>      {{obj.special.join(`, `)}},</span> <strong>HP:</strong> {{obj.HP}}, <strong>Armor:</strong> {{obj.armor}},       <strong>DMG:</strong> 1d{{obj.dmg.d}}<span v-if="obj.dmg.b>0">+{{obj.dmg.b}}</span>      <span v-if="obj.dmg.p>0"> Piercing {{obj.dmg.p}}</span> <strong>Rng: </strong>{{obj.range}}    </div>  </div>  '}),Vue.component("c-pnc-DWB",{props:["obj"],template:'  <div class="content-minor">    <c-pnc-generic v-bind:obj="obj" hname="Tags"></c-pnc-generic>    <div class="input-group">       <span class="input-group-addon strong"># Appearing</span>       <select v-model="obj.n" class="form-control">         <option v-for="nid in n" v-bind:value="nid">{{nid}}</option>       </select>       <span class="input-group-addon strong">Size</span>       <select v-model="obj.size" class="form-control">         <option v-for="s in sizes" v-bind:value="s">{{s}}</option>       </select>    </div>    <div class="input-group">       <span class="input-group-addon strong">HP</span>       <input class="form-control center" type="text" v-model="obj.HP">       <span class="input-group-addon strong">Armor</span>       <input class="form-control center" type="text" v-model="obj.armor">    </div>    <div class="content-minor">      <div class="header strong center">Damage</div>      <div class="input-group">        <span class="input-group-addon strong">Die</span>        <select v-model="obj.dmg.d" class="form-control">          <option v-for="d in dice" v-bind:value="d">1d{{d}}</option>        </select>        <span class="input-group-addon strong">+</span>        <input class="form-control" type="text" v-model="obj.dmg.b">      </div>      <div class="input-group">        <span class="input-group-addon strong">Piercing</span>        <input class="form-control center" type="number" v-model="obj.dmg.p">        <span class="input-group-addon strong">Range</span>        <input class="form-control center" type="text" v-model="obj.range">      </div>    </div>    <c-pnc-dwb-short v-bind:obj="obj"></c-pnc-dwb-short>  </div>  ',data:function(){return{sizes:["tiny","small","standard","large","huge"],n:["solitary","group","horde"],dice:[2,4,6,8,10,12]}},computed:{},methods:{addtag:function(){this.obj.special.push("NEW")},remove:function(a){this.obj.special.splice(a,1)}}}),CPX.data.DWSteadings={basic:["village","town","keep","city"],bp:[5,3,3,1],village:{core:["Poor","Steady","Militia","Resource (type)","Oath (steading)"],extra:[[0,"Natural defenses",["Safe","-Defenses"]],[1,"Abundant resources",["+Prosperity","Resource (type)","Enmity (steading)"]],[2,"Protected by another steading",["Oath (steading)","+Defenses"]],[3,"On a major road",["Trade (steading)","+Prosperity"]],[4,"Built around a wizard’s tower",["Personage (wizard)","Blight (arcane creatures)"]],[5,"Built on a site of religious significance",["Divine","History"]]],ep:[3,3,2,2,1,1],trouble:[[0,"Surrounded by arid or uncultivable land",["Need (food)"]],[1,"Dedicated to a deity",["Religious (that deity)","Enmity (steading of opposing deity)"]],[2,"Recently at war",["-Population","-Prosperityif they fought to the end","-Defenses if they lost"]],[3,"Monster problem",["Blight (that monster)","Need (adventurers)"]],[4,"Absorbed another village",["+Population","Lawless"]],[5,"Remote or unwelcoming",["-Prosperity","Dwarven or Elven or other non-human"]]]},town:{core:["Moderate","Steady","Watch","Trade (steading)","Trade (steading)"],extra:[[0,"Booming",["Booming","Lawless"]],[1,"At a crossroads",["Market","+Prosperity"]],[2,"Defended by another steading",["Oath (steading)","+Defenses"]],[3,"Built around a church",["Power (divine)"]],[4,"Built around a craft",["Craft (type)","Resource (something required for that craft)"]],[5,"Built around a military post",["+Defenses"]]],ep:[1,2,2,2,3,2],trouble:[[0,"Outgrowing a vital resource",["Need (type)","Trade (steading with need)"]],[1,"Offers defense to others",["Oath (steading)","-Defenses"]],[2,"Outlaw rumored to live there",["Personage (outlaw)","Enmity (steading preyed upon)"]],[3,"Controls a good/service",["Exotic (good/service)","Enmity (steading)"]],[4,"Suffers from disease",["-Population"]],[5,"Popular meeting place",["+Population","Lawless"]]]},keep:{core:["Poor","Shrinking","Guard","Need (supplies)","Trade (steading)","Oath (steading)"],extra:[[0,"Belongs to a noble family",["+Prosperity","Power (political)"]],[1,"Run by a skilled commander",["Personage (commander)","+Defenses"]],[2,"Stands watch over a trade road",["+Prosperity","Guild (trade)"]],[3,"Used to train special troops",["Arcane","-Population"]],[4,"Surrounded by fertile land",["-Need (Supplies)"]],[5,"Stands on a border",["+Defenses","Enmity (steading)"]]],ep:[2,2,2,2,2,2],trouble:[[0,"Built on a naturally defensible position",["Safe","-Population"]],[1,"Formerly occupied by another power",["Enmity (steading)"]],[2,"Safe haven for brigands",["Lawless"]],[3,"Built to defend from a specific threat",["Blight (threat)"]],[4,"Has seen horrible bloody war",["History (battle)","Blight (restless spirits)"]],[5,"Is given the worst of the worst",["Need (skilled recruits)"]],[6,"Suffers from disease","-Population"],[7,"Popular meeting place",["+Population","-Law"]]]},city:{core:["Moderate","Steady","Guard","Market","Guild (type)","Oath (steading)","Oath (steading)"],extra:[[0,"Permanent defenses, such as walls",["+Defenses","Oath (steading)"]],[1,"Ruled by a single individual",["Personage (ruler)","Power (political)"]],[2,"Diverse",["Dwarven or Elven or both"]],[3,"Trade hub",["Trade (every nearby steading)","+Prosperity"]],[4,"Ancient, built on top of its own ruins",["History (your choice)","Divine"]],[5,"Center of learning",["Arcane","Craft (your choice)","Power (arcane)"]]],ep:[3,3,1,3,1,1],trouble:[[0,"Outgrown its resources",["+Population","Need (food)"]],[1,"Designs on nearby territory",["Enmity (nearby steadings)","+Defenses"]],[2,"Ruled by a theocracy",["-Defenses","Power (divine)"]],[3,"Ruled by the people",["-Defenses","+Population"]],[4,"Supernatural defenses",["+Defenses","Blight (related supernatural creatures)"]],[5,"Occupies a place of power",["Arcane","Personage (whoever watches the place of power)","Blight (arcane creatures)"]]]}},CPX.DWSteading=function(a){var b={seed:a.seed,class:["steading",a.type],name:"undefined"==typeof a.name?"":a.name,notes:"undefined"==typeof a.notes?"":a.notes,people:"undefined"==typeof a.people?[]:a.people,terrain:"undefined"==typeof a.people?3:a.terrain};b._id=b.seed.join(""),b.RNG=new Chance(b._id);var c=CPX.data.DWSteadings[a.type];if(b.extra=b.RNG.weighted(c.extra,c.ep)[0],b.trouble=b.RNG.pickone(c.trouble)[0],b.tags=c.core.concat([]).join(", "),0==b.people.length)for(var d=b.RNG.weighted([1,2,3],[7,2.5,.5]),e=0;e<d;e++)b.people.push(CPX.people(b.RNG,{terrain:a.terrain}));return b.RNG=null,delete b.RNG,b},Vue.component("c-cfp-DWS",{props:["obj"],template:'<div class="content"><input class="form-control input-lg center" type="text" v-model="obj.name" placeholder="NAME"><textarea class="form-control" type="textarea" v-model="obj.notes" placeholder="ADD NOTES"></textarea><div class="input-group"><span class="input-group-addon strong">Tags</span><textarea class="center form-control" type="textarea" lines="3" v-model="obj.tags"></textarea></div><div class="content-minor box"><div class="header strong center">Population</div><c-cfp-ppl v-for="ppl in obj.people" v-bind:P="ppl"></c-cfp-ppl></div><div class="input-group"><span class="input-group-addon strong">Extra</span><select class="form-control" v-model="obj.extra"><option  v-for="e in extras" v-bind:value="$index">{{e[1]}}</option></select></div><div class="center bottom-pad">{{extras[obj.extra][2].join(`, `)}}</div><div class="input-group"><span class="input-group-addon strong">Trouble</span><select class="form-control" v-model="obj.trouble"><option  v-for="t in trouble" v-bind:value="$index">{{t[1]}}</option></select></div><div class="center bottom-pad">{{trouble[obj.trouble][2].join(`, `)}}</div></div>',data:function(){return{extras:CPX.data.DWSteadings[this.obj.class[1]].extra,trouble:CPX.data.DWSteadings[this.obj.class[1]].trouble}}});var CREATURES={creature:[["beast","monster"],[1,1]],beast:[["land","air","water"],[7/12,.25,2/12]],land:["termite","tick","snail","slug","worm","ant","centipede","scorpion","snake","lizard","rat","weasel","boar","dog","fox","wolf","cat","lion","panther","deer","horse","ox","rhino","bear","gorilla","ape","mammoth","dinosaur"],air:["mosquito","firefly","locust","dragonfly","moth","bee","wasp","chicken","duck","goose","jay","parrot","gull","pelican","crane","raven","falcon","eagle","owl","condor","pteranodon"],water:["jellyfish","clam","eel","frog","fish","crab","lobster","turtle","alligator","shark","squid","octopus","whale"],unnatural:[["undead","planar","divine"],[8/12,.25,1/12]],undead:[["haunt","wisp","ghost","banshee","wraith","wight","spirit lord","skeleton"],[1,1,1,1,1,1,1,1]],planar:[["imp","lesser elemental","lesser horror","greater elemental","greater horror","elemental lord"],[.25,.25,.25,1/12,1/12,1/12]],divine:[["agent","champion","army","avatar"],[5/12,4/12,2/12,1/12]],monster:[["uncommon","rare","legendary"],[7/12,.25,2/12]],uncommon:[["plant","fungus",["*beast","*undead"],["*beast","*beast"],["*beast","+ability"],["*beast","+feature"]],[1,1,1,1,1,1]],rare:[["slime",["*beast","+construct"],["*beast","+element"],["*beast","*unnatural"]],[1,1,1,1]],legendary:[[["*dragon"],"colossus",["#uncommon","+huge"],["#rare","+huge"],["*beast","*dragon"],["#uncommon","*dragon"],["#rare","*dragon"]],[1/8,1/8,.25,.25,1/12,1/12,1/12]]},SPECIALNATURE={nature:["brute","blaster","skirmisher","soldier","stalker","controller"],ability:["bless","curse","entangle","poison","disease","paralyze","petrify","mimic","camouflage","hypnotize","dissolve","disintegrate","ignores armor","ranged","flying","armored","slicing","great strength","master combatant","deft","drain life","drain magic","immunity","control minds","piercing","*magic","rolltwice"],aspect:["strength","trickery","dexterity","time","constitution","knowledge","intelligence","nature","wisdom","culture","charisma","war","lies","discord","peace","truth","balance","hate","envy","love","admiration","*element","rolltwice"],element:["air","earth","fire","water","life","death"],feature:["vicious","multiple heads","headless","many eyes","one eye","many limbs","tail","tentacles","*aspect","*element","*magic","*oddity","rolltwice"],magic:["divination","enchantment","evocation","illusion","necromancy","summoning"],nappearing:["solitary","group","horde"],size:["tiny","small","standard","large","huge"],tag:["amorphous","construct","devious","intelligent","magical","organized","planar","stealthy","terrifying","rolltwice"],oddity:["particle swarm","geometric","chaotic","crystalline","fungal","gaseous","smoke","illusionary"]},COLORDESCRIPTORS=["Inferno","Flame","Blaze","Pyre","Desert","War","Strife","Ravage","Crimson","Scarlet","Ruby","Dire","Thorny","Proto","Storm","Lightning","Wind","Gale","Emerald","Moss","Malachite","Veridian","Azure","Cobalt","Sapphire","Devious","Night","Shadow","Fear","Ice","Snow","Blizzard","Stone","Cunning","Crystal","Rock","Crag","Doom","Death","Ruin","Null","Amber","Gold","Citrine","Aurulent","Iron","Law","Protection","Void","Righteousness","Strong","Pale","Ashen","Ghost","Silver","Alabaster","Ivory","Ghastly","Hoary","Pallid"],MINIONS={brute:{skills:{Physique:0,Fight:-1},class:["foe"]},blaster:{skills:{Shoot:0,Athletics:-1},class:["foe"]},skirmisher:{skills:{Athletics:0,Fight:-1},class:["foe"]},soldier:{skills:{Fight:0,Physique:-1},class:["foe"]},stalker:{skills:{Athletics:0,Fight:-1},class:["foe"]},controller:{skills:{Will:0},class:["foe"]},Laborer:{id:"Laborer",cost:1,skills:{Craft:1},special:[],class:["basic","general"],inventory:["tools","Club"]},Soldier:{id:"Soldier",cost:1,skills:{Fight:1,Might:0,Fortitude:0},special:[],class:["basic","general","combatant"],inventory:["Longsword","Leather Armor"]},Scout:{id:"Scout",cost:1,skills:{Notice:1,Fight:-1},special:[],class:["basic","general"],inventory:["Dagger","Leather Armor"]},Diplomat:{id:"Diplomat",cost:1,skills:{Rapport:1,Investigate:0,Will:0},special:[],class:["basic","special"],inventory:["Staff"]}};CPX.encounter=function(a,b){var b="undefined"==typeof b?{}:b,c="undefined"==typeof b.terrain?-1:b.terrain,d=a.weighted(["common","uncommon","rare","legendary"],[10,4,.8,.2]);objExists(b.rank)&&(d=b.rank),c==-1&&(c=a.natural({min:0,max:6}));var e=a.pickone(["beast","people","monster"]),f={};return f="beast"==e?CPX.creature.beastEnhanced(a,c,d):"people"==e?CPX.people(a,{terrain:c,rank:d}):CPX.creature(a,{terrain:c,rank:d})},CPX.creature=function(a,b){var b="undefined"==typeof b?{}:b,c="undefined"==typeof b.terrain?-1:b.terrain,d=a.weighted(["common","uncommon","rare","legendary"],[10,4,.8,.2]);objExists(b.rank)&&(d=b.rank),c==-1&&(c=a.natural({min:0,max:6}));var e={};return"common"==d?e=CPX.creature.beast(a,c,d):"uncommon"==d?e=CPX.creature.monster(a,c,"uncommon"):"rare"==d?e=CPX.creature.monster(a,c,"rare"):"legendary"==d&&(e=CPX.creature.monster(a,c,"legendary")),e},CPX.creature.standard=function(a,b){if(b.text=a.pickone(COLORDESCRIPTORS),b.name=b.text+" ",b.name+=b.creature.join(" "),b.scale=0,b.special.includes("tiny"))b.scale--;else if(b.special.includes("huge"))b.scale++;else{var c=a.weighted(SPECIALNATURE.size,[1,2,6,2,1]);"tiny"==c?b.scale--:"huge"==c&&b.scale++,"standard"!=c&&b.special.push(c)}b.name.includes("colossus")&&(b.scale+=2,b.special.push("colossal")),b.nappearing=a.weighted(SPECIALNATURE.nappearing,[.3,.5,.2]),b.nature=a.pickone(SPECIALNATURE.nature),b.class=b.class.unique(),b.special=b.special.unique()},CPX.creature.constructor=function(a,b,c,d,e){function f(c){var f={};f=CPX.creature.constructor(a,b,c,d,e),g[a]=g[a].concat(f[a]),g.special=g.special.concat(f.special),g.class=g.class.concat(f.class)}var g={special:[],class:[]},h={},i="",j="";return g[a]=[],"creature"==a?h=CREATURES:"people"==a&&(h=PEOPLES),objExists(h[c])?(j=b.pickone(h[c]),f(j)):"#"==c[0]?(i=c.slice(1),j=b.weighted(h[i][0],h[i][1]),Array.isArray(j)?j.forEach(function(a){f(a)}):g=CPX.creature.constructor(a,b,j,d,e)):"*"==c[0]?(i=c.slice(1),g=CPX[a][i](b,d,e)):"+"==c[0]?(i=c.slice(1),objExists(SPECIALNATURE[i])?g.special=CPX.creature.special(b,i):g.special.push(i)):g[a].push(c),g},CPX.creature.special=function(a,b){function c(b){return a.pickone(b)}var d=[];if(d.push(c(SPECIALNATURE[b])),d.includes("rolltwice")){var e=SPECIALNATURE[b].slice(0,-1);d.length=0,d.push(c(e)),d.push(c(e))}return d.forEach(function(a,e){var f=["aspect","element","magic"];if("*"==a[0]){var g=a.slice(1);d[e]=c(SPECIALNATURE[g]),f.includes(g)&&(d[e]=CPXC.capitalize(g)+" ("+d[e]+")")}else f.includes(b)&&(d[e]=CPXC.capitalize(b)+" ("+a+")")}),d},CPX.creature.beastEnhanced=function(a,b,c){for(var d=CPX.creature.beast(a,b,c),e=[],f={common:0,uncommon:1,rare:3,legendary:6},g=["element","feature","tag","ability"],h=0;h<f[c];h++)e=e.concat(CPX.creature.special(a,a.pickone(g)));return d.special=e,d},CPX.creature.beast=function(a,b,c){var d=CREATURES.beast[1];0==b&&(d=[.25,1/12,7/12]);var e=a.weighted(CREATURES.beast[0],d),f=a.pickone(CREATURES[e]),g={creature:[f],class:["creature","beast"],rank:c,special:[]};return CPX.creature.standard(a,g),g},CPX.creature.monster=function(a,b,c){objExists(c)||(c=a.weighted(CREATURES.monster[0],CREATURES.monster[1])),mb=a.weighted(CREATURES[c][0],CREATURES[c][1]);var d={creature:[],class:["creature","monster"],special:[]
},e={};return Array.isArray(mb)?mb.forEach(function(f){e=CPX.creature.constructor("creature",a,f,b,c),d.creature=d.creature.concat(e.creature),d.special=d.special.concat(e.special),d.class=d.class.concat(e.class)}):d=CPX.creature.constructor("creature",a,mb,b,c),d.rank=c,CPX.creature.standard(a,d),d},CPX.creature.dragon=function(a,b,c){var d=CPX.creature.special(a,"ability");d=d.concat(CPX.creature.special(a,"element"),CPX.creature.special(a,"feature"),CPX.creature.special(a,"tag"));var e={creature:["dragon"],class:["dragon"],special:d};return e},CPX.creature.unnatural=function(a,b,c){var d=a.weighted(CREATURES.unnatural[0],CREATURES.unnatural[1]);return CPX.creature[d](a)},CPX.creature.undead=function(a,b,c){var d=a.weighted(CREATURES.undead[0],CREATURES.undead[1]),e=CPX.creature.special(a,"ability");e.push("undead");var f={creature:[d],class:["undead"],special:e};return f},CPX.creature.planar=function(a,b,c){var d=a.weighted(CREATURES.planar[0],CREATURES.planar[1]),e=CPX.creature.special(a,"ability");e=e.concat(CPX.creature.special(a,"element"),CPX.creature.special(a,"feature"),CPX.creature.special(a,"tag"));var f={creature:[d],class:["planar"],special:e};return f},CPX.creature.divine=function(a,b,c){var d=a.weighted(CREATURES.divine[0],CREATURES.divine[1]),e=CPX.creature.special(a,"aspect");e=e.concat(CPX.creature.special(a,"ability"),CPX.creature.special(a,"element"),CPX.creature.special(a,"feature"),CPX.creature.special(a,"tag"));var f={creature:[d],class:["divine"],special:e};return f};var PEOPLES={human:["Human"],demi:["Elf","Dwarf"],smallfolk:["Gnome","Halfling","Kobold"],monstrous:["Nightelf","Orc","Goblin","Hobgoblin","Ogre","Troll","Gnoll","Minotaur","Lizard-people","Snake-people","Dog-people","Cat-people","Mantis-people","Naga"],hybrid:["Ape","Badger","Bat","Bear","Beetle","Boar","Cat","Cetnipede","Deer","Dog","Eagle","Elephant","Frog","Goat","Horse","Lion","Mantis","Owl","Panther","Rat","Raven","Rhinoceros","Scorpion","Snake","Spider","Tiger","Vulture","Wasp","Weasel","Wolf","Crab","Crocodile","Octopus","Shark","Eel"],uncommonraces:["Plant-people","Fungus-people"],rareraces:["*elemental","*giant"],common:[["human","demi","smallfolk","monstrous"],[.5,.25,.1,.15]],uncommon:[["uncommonraces","hybrid",["#common","+element"]],[1,2,2]],rare:[["rareraces",["#common","+construct"],["hybrid","uncommonraces"],["hybrid","hybrid"],["hybrid","+element"],["#common","+ability","+element","+aspect"]],[1,1,1,1,1,1]],legendary:[["*dragon",["#rare","+element","+ability","+aspect"]],[1,2]]};CPX.professions=function(a,b){b="undefined"==typeof b?[]:b;var c=["Mystic Knights","Knights","Wizards","Priests","Monks"];return a.pickone(c.concat(b))},CPX.people=function(a,b){var b="undefined"==typeof b?{}:b,c="undefined"==typeof b.terrain?-1:b.terrain,d=a.weighted(["common","uncommon","rare","legendary"],[10,4,.8,.2]);objExists(b.rank)&&(d=b.rank),c==-1&&(c=a.natural({min:0,max:6}));var e=a.weighted(PEOPLES[d][0],PEOPLES[d][1]),f={people:[],special:[]},g={};if(Array.isArray(e)?e.forEach(function(b){g=CPX.creature.constructor("people",a,b,c,d),f.people=f.people.concat(g.people),f.special=f.special.concat(g.special)}):f=CPX.creature.constructor("people",a,e,c,d),f.text=a.pickone(COLORDESCRIPTORS),e.includes("hybrid")?f.name=CPXC.capitalize(f.people.join("-"))+" people":f.name=CPXC.capitalize(f.people.join(" ")),f.class=["people"],f.scale=0,f.special.includes("tiny"))f.scale--;else if(f.special.includes("huge"))f.scale++;else{var h=a.weighted(SPECIALNATURE.size,[1,2,6,2,1]);"tiny"==h?f.scale--:"huge"==h&&f.scale++,"standard"!=h&&f.special.push(h)}return f.rank=d,f.nappearing=a.weighted(SPECIALNATURE.nappearing,[.3,.5,.2]),f.nature=a.pickone(SPECIALNATURE.nature),f.class=f.class.unique(),f.special=f.special.unique(),f.tags=f.special.join(", "),f},CPX.people.elemental=function(a){var b=CPX.creature.special(a,"element");return b=b.concat(CPX.creature.special(a,"ability"),CPX.creature.special(a,"tag")),{people:["elemental"],special:b}},CPX.people.giant=function(a){var b=CPX.creature.special(a,"element");return b.push("huge"),{people:["giant"],special:b}},CPX.people.dragon=function(a,b,c){var d=CPX.creature.special(a,"ability");return d=d.concat(CPX.creature.special(a,"element"),CPX.creature.special(a,"feature"),CPX.creature.special(a,"tag")),{people:["dragon"],special:d}},CPX.CFP={densities:["dense","scattered","frontier","unsettled","desolate"],citysizes:["single dwelling","thorp","hamlet","village","town, small","town, large","city, small","city, large","metropolis, small","metropolis, large"],habitation:["uninhabited","single dwelling","thorp","hamlet","village","town, small","town, large","city, small","city, large","stronghold","temple","ruin","special"],special:{water:"achored boat",swamp:"unihabited",desert:"nomad camp",plain:"nomad camp",forest:"logging camp",hill:"military outpost",mountain:"mine"},dense:{items:[1,2,3,4,5,6,7,8,9,10,11,12],p:[4,3,3,2,2,1,1,3,3,3,2,1],special:{items:["manor","peasant long house","orphanage","traders’ village","mill","military barracks","church","chapterhouse","bath house","alehouse/tavern/inn"],p:[4,3,3,3,2,3,3,3,3,2]}},scattered:{items:[0,1,2,3,4,5,6,7,9,10,11,12],p:[5,7,3,3,2,2,1,1,2,2,1,1],special:{items:["manor","farmstead","farmstead","migrant camp","mill","military structure","abbey","priory","nunnery","bath house","inn"],p:[4,3,3,3,2,1,1,1,2,9]}},frontier:{items:[0,1,2,3,4,5,6,9,10,11,12],p:[10,3,3,2,2,2,1,1,1,4,1],special:{items:["manor","trading outpost","military outpost","military camp","work camp","abbey","priory","nunnery","hermitage","nomad camp"],p:[3,8,5,2,2,1,1,1,3,4]}},unsettled:{items:[0,1,2,3,4,5,11,12],p:[13,6,2,2,2,1,3,1],special:{items:["hermit","trading outpost","military outpost","military camp","work camp","prison","hermitage","nomad camp","monastery","re-roll on “Desolate”"],p:[1,5,6,3,2,2,3,3,4,1]}},desolate:{items:[0,1,2,3,11],p:[23,2,1,1,3],special:{items:["abandoned/forgotten tower","abandoned/forgotten castle/fortress","abandoned/forgotten temple","abandoned/forgotten town","abandoned/forgotten city","sunken city (partially submerged in ground)","lost city (below ground)","shrine (1-2 on 1d3 = inactive)","hermit","monastery"],p:[6,5,2,1,2,1,1,3,7,1]}},govt:[["anarchy","lawless society"],["argentocracy","money - all decisions made by financial prudence"],["aristarchy","the best - through contest"],["aristocracy","nobility"],["autocracy","individual with absolute power (e.g., emperor/dictator)"],["cryptarchy","secret rulership"],["democracy","the people"],["demonocracy","demons (or representatives of demons)"],["ecclesiarchy","clerics"],["ethnocracy","a particular race (among mixed races)"],["gerontocracy","eldest citizens (age-based)"],["gynocracy","women"],["heroarchy","heroes"],["heterarchy","foreign ruler"],["matriarchy","eldest females"],["militocracy","military rulers"],["monarchy","individual, usually hereditary (e.g., queen/king)"],["oligarchy","the few (usually co-equal)"],["patriarchy","eldest males"],["pedantocracy","strict rule-bound scholars"],["pedocracy","learned, savants, and scholars"],["phallocracy","government by men"],["plutocracy","the wealthy"],["prophetocracy","government by a prophet"],["quangocracy","quasi-autonomous non-governmental organizations"],["statocracy","the state alone, without ecclesiastical influence"],["thearchy","a god or gods (or through 1 or more representatives)"],["theocracy","priests or religious law"],["tritheocracy","three gods (or representatives thereof)"],["xenocracy","a body of foreigners"]],outsiders:["accepting of","aggravated by","amused by","annoyed with","anxious around","apathetic toward","bored by","curious about","cynical of","enraged by","enthralled with","envious of","excited by","frustrated with","grumpy around","impressed by","indifferent to","infuriated by","irritated by","melancholy about","peaceful around","pissed off with","predatory of","rejecting of","restless around","sympathetic toward","tired of","uncomfortable around","unimpressed by","weird around"],economy:["booming","bullish/hopeful","depressed","doomed","expanding","inflationary","overheated/growing too fast","recessionary","uncontrolled/fluctuating","weak"],taxes:["low","average","exorbitant"],issues:["beggars/vagrancy","drunkards","corruption","disease","feuding","fire","prostitution","theft (pickpockets)","unrest (general)","waste issues"],issuedegree:["minor/contained","moderate/widespread","major/pervasive"],threats:["bandits (thieves)","barbarians (horde)","beetles, giant","bugbears","chimera","clerics (evil)","dragon","elves (evil)","ettin","gargoyles","ghouls","giant(s)","gnolls","goblins","harpie(s)","hobgoblins","kobolds","lizard men","mage (hostile)","manticore","ogre(s)","ogre mage","pterodactyl","roc","skeletons","troglodytes","trolls","witch","wolves","zombies"],leader:{class:["fighter","magic-user","cleric","dwarf","elf","halfling"],p:[8,6,10,2,2,2],levelstart:[9,11,7,9,9,9]},stype:{fighter:["castle","keep/square","keep/round","keep/shell","towers/square","towers/round","concentric"],"magic-user":["tower","round/sloped","round/straight","round/stepped","square/sloped","square/straight","square/stepped"],dwarf:["mountain stronghold","centralized/flat","spread/concave","spread/convex","modular/towered","hidden/disguised","concentric"],halfling:["shire","mounds/walled","mounds/hidden","mounds & trees/walled","mounds & trees/hidden","castle/walled","castle/hidden"]},ssize:{fighter:{levels:[["1d2",1],["1d3",2],["1d3",4],["1d5",6],["1d6",10]],rings:[["1d2",1],["1d2",2],["1d2",3],["1d2",4],["1d2",5]]},"magic-user":[["1d2",1],["1d3",2],["1d3",4],["1d5",6],["1d6",10]],elf:{trees:[["1d2",0],["1d2",1],["1d3",3],["1d5",6],["1d6",10]],levels:[1,2,3,5,6,10]},dwarf:[["1d2",0],["1d2",1],["1d3",3],["1d5",6],["1d6",10]],halfling:[["1d2",1],["1d3",2],["1d3",4],["1d5",6],["1d6",10]]},ruin:[]},CPX.CFP.stronghold=function(a){var b={seed:a.seed,class:["stronghold"],name:"undefined"==typeof a.name?"":a.name,notes:"undefined"==typeof a.notes?"":a.notes};b._id=b.seed.join(""),b.RNG=new Chance(b._id);var c=CPX.CFP.leader;lt=b.RNG.weighted(c.class,c.p),li=c.class.indexOf(lt),b.leader={class:lt},b.leader.level=c.levelstart[li]+b.RNG.rpg("1d"+c.p[li])[0],b.type=b.RNG.d6(),b.size=b.RNG.rpg("1d5")[0]-1;var d=[];return["magic-user","dwarf","halfling"].includes(lt)?(b.class.push(CPX.CFP.stype[lt][0]),d=CPX.CFP.ssize[lt][b.size],b.size=b.RNG.rpg(d[0])[0]+d[1],b.type=CPX.CFP.stype[lt][b.type]):["fighter","cleric"].includes(lt)?(b.class.push(CPX.CFP.stype.fighter[0]),d=[0,1,3,4].includes(b.type-1)?CPX.CFP.ssize.fighter.levels[b.size]:CPX.CFP.ssize.fighter.rings[b.size],b.size=b.RNG.rpg(d[0])[0]+d[1],b.type=CPX.CFP.stype.fighter[b.type]):(b.class.push("Tree Stronghold"),d=CPX.CFP.ssize.elf.trees[b.size],b.size=b.RNG.rpg(d[0])[0]+d[1],b.type>1&&(b.type=b.RNG.rpg("1d"+CPX.CFP.ssize.elf.levels[b.type-1])),b.type+=" trees"),b.RNG=null,delete b.RNG,b},CPX.CFP.city=function(a){var b=(CPX.CFP,{seed:a.seed,type:a.type,class:["city",CPX.CFP.habitation[a.type]],name:"undefined"==typeof a.name?"":a.name,notes:"undefined"==typeof a.notes?"":a.notes,people:"undefined"==typeof a.people?[]:a.people,govt:"undefined"==typeof a.govt?-1:a.govt});b._id=b.seed.join(""),b.RNG=new Chance(b._id);var c=[[50,500],[500,1e3],[500,5e3],[5e3,1e4],[5e3,5e4],[5e4,1e5],[5e4,5e5]];if(2==a.type?b.pop=10*b.RNG.rpg("1d5"):3==a.type?b.pop=30*b.RNG.rpg("1d12"):b.pop=(b.RNG.diceSum("2d6")-2)*c[a.type-4][0]+c[a.type-4][1],0==b.people.length)for(var d=b.RNG.weighted([1,2,3],[7,2.5,.5]),e=0;e<d;e++)b.people.push(CPX.people(b.RNG,{terrain:a.terrain}));return b.economy=b.RNG.pickone(CPX.CFP.economy),b.taxes=b.RNG.pickone(CPX.CFP.taxes),b.government=b.RNG.natural({min:0,max:CPX.CFP.govt.length-1}),b.outsiders=b.RNG.pickone(CPX.CFP.outsiders),b.issue=b.RNG.pickone(CPX.CFP.issues),b.idegree=b.RNG.pickone(CPX.CFP.issuedegree),b.threat=b.RNG.pickone(CPX.CFP.threats),b.RNG=null,delete b.RNG,b},Vue.component("c-cfp-ppl",{props:["P"],template:'<div class="content-minor box"><input class="center form-control strong" type="text" v-model="P.name"><div class="input-group" v-if="P.tags.length>0"><span class="input-group-addon strong">Tags</span><input class="center form-control" type="text" v-model="P.tags"></div><div>'}),Vue.component("c-cfp-30S",{props:["obj"],template:'<div class="content-minor"><input class="form-control input-lg center" type="text" v-model="obj.name" placeholder="NAME"><textarea class="form-control" type="textarea" v-model="obj.notes" placeholder="ADD NOTES"></textarea><div class="input-group"><span class="input-group-addon strong">Leader</span><input class="center form-control" type="text" v-model="obj.leader.class"><span class="input-group-addon strong">Level</span><input class="center form-control" type="number" v-model="obj.leader.level"></div><div class="input-group"><span class="input-group-addon strong">Type</span><input class="center form-control" type="text" v-model="obj.type"><span class="input-group-addon strong">Size</span><input class="center form-control" type="text" v-model="obj.size"></div></div>',data:function(){return{}}}),Vue.component("c-cfp-30C",{props:["obj"],template:'<div class="content-minor"><input class="form-control input-lg center" type="text" v-model="obj.name" placeholder="NAME"><textarea class="form-control" type="textarea" v-model="obj.notes" placeholder="ADD NOTES"></textarea><div class="content-minor box"><div class="header strong center">Population ({{obj.pop}})</div><c-cfp-ppl v-for="ppl in obj.people" v-bind:P="ppl"></c-cfp-ppl></div><div class="input-group"><span class="input-group-addon strong">Government</span><select class="form-control" v-model="obj.government"><option  v-for="g in govt" v-bind:value="$index">{{g[0]}}</option></select></div><div class="center strong bottom-pad">{{govt[obj.government][1]}}</div><div v-for="key in keys" class="input-group"><span class="input-group-addon strong">{{titles[$index] | capitalize}}</span><input class="center form-control" type="text" v-model="obj[key]"></div></div>',data:function(){return{keys:["economy","taxes","issue","idegree","threat"],titles:["economy","taxes","issue","Issue Degree","threat"],govt:CPX.CFP.govt}}}),Vue.component("c-cfp-result",{props:["obj","idx","allgens"],template:'<div><h4 class="center header">{{obj.name}} {{obj.class[1] | capitalize}}<button v-on:click="remove" type="button" class="close"><span aria-hidden="true">&times;</span></button></h4><button v-on:click="save" type="button" class="btn btn-info btn-block bottom-pad">Save</button><component v-bind:is="type" v-bind:obj="obj" v-bind:idx="idx"></component></div>',computed:{type:function(){return objExists(this.obj)?"c-cfp-"+this.obj.seed[0]:"c-cfp-30S"}},methods:{save:function(){CPXSAVE.setItem(this.obj._id,this.obj).then(function(){}),objExists(this.allgens[this.obj._id])||Vue.set(this.allgens,this.obj._id,this.obj.name)},remove:function(){HUB.$emit("CFP-remove",this.idx)}}}),Vue.component("c-cfp",{template:'<div><h2 class="center">City/Stronghold Generator</h2><c-menubar id="CFP" v-bind:show="showmenu"></c-menubar><c-loadselect id="CFP" v-bind:list="allgens" v-bind:show="showlist.load"></c-loadselect><div class="center content-minor"><div class="btn-group bottom-pad" role="group" aria-label="..."><button v-on:click="d30C" type="button" class="btn btn-info">d30 City</button><button v-on:click="d30S" type="button" class="btn btn-info">d30 Stronghold</button></div><div class="btn-group bottom-pad" role="group" aria-label="..."><button v-on:click="DWS" type="button" class="btn btn-info">DW Stading</button><button v-on:click="CPC" type="button" class="btn btn-info">CPX City</button></div></div><c-cfp-result v-for="obj in current" v-bind:obj="obj" v-bind:type="type" v-bind:idx="$index" v-bind:allgens="allgens"></c-cfp-result></div>',data:function(){return{vid:"CFP",loadids:["30C","30S","DWS","CPC"],showmenu:{new:!0,load:!0,save:!1,close:!0},type:"",showlist:{load:!1},current:[],allgens:{}}},created:function(){CPX.vue.page.onCreated(this)},beforeDestroy:function(){CPX.vue.page.onBeforeDestroy(this)},methods:{load:function(a){var b=[a].concat(this.current);this.current=b},new:function(){this.current=[]},d30C:function(){this.current=[];for(var a=0;a<4;a++)this.current.push(CPX.CFP.city({seed:["30C","-",CPXC.string({length:27,pool:base62})],type:CPXC.rpg("1d9")[0]+1}))},d30S:function(){this.current=[];for(var a=0;a<4;a++)this.current.push(CPX.CFP.stronghold({seed:["30S","-",CPXC.string({length:27,pool:base62})]}))},DWS:function(){this.current=[];for(var a=0;a<4;a++)this.current.push(CPX.DWSteading({seed:["DWS","-",CPXC.string({length:27,pool:base62})],type:CPXC.pickone(CPX.data.DWSteadings.basic)}))},CPC:function(){this.current=[];for(var a=0;a<4;a++)this.current.push(CPX.city({seed:["CPC","-",CPXC.string({length:27,pool:base62})],size:CPXC.natural({min:1,max:5})}))},generate:function(){},remove:function(a){this.current.splice(a,1)},close:function(){CPX.vue.page.close(),this.current=[],this.allgens={}}}}),CPX.FP.factions=["Refugees","Bandits","Pirates","Halfings","Gnolls","Goblins","Lycantrophes","Ogres","Orcs","Hobgoblins","Trolls","Kobolds","Lizardfolk","Sahuagin","Gargoyles","Harpies","Minotaurs","Yeti","Giant Insects","Giant Spiders","Giant Bugs","Demi-humans","Monstrous Humaniods","Beasts","Elves","Dwarves","Gnomes","Merfolk","Secret Brotherhood","Assassins","Monks","Dark Elves","Deep Dwarves","Ghouls","Wights","Wraiths","Ghosts","Vampires","Aliens (Hive)","Aliens (Conquerors)","Aliens (Breeders)","Aliens (Experimentors)","Undead","Constructs","Elementals","Wizards","Cultists","Dragons","Golems","Liches","Genies","Outsiders (Positive)","Outsiders (Negative)","Outsiders (Neutral)","Aliens (Alien)","Foreigners","Evil Empire","Snake Men"],CPX.FP.threats=["Bandit","Monstrous Humanoid","Demi-human","Beast","Alien Predator","Intelligent Alien","Dragon","Elemental","Outsider","Undead","Construct","Wizard","Vermin"],CPX.FP.villains=["Gang Lord","Murderer","Internal Faction","Cult Leader","Ruler of Lost Civilization","Wicked Foreigner","Thief","Assassin","Femme Fatale","Law Official","Dictator","Foreign Allied Faction","Powerful Noble","Merchant","Crime Lord","Pirate","Anarchist","Royal","Government Official","Mastermind","Nemesis","Creature","Ruler","Former Ally","Monstrous Humanoid","Fanatic","Friend","Barbarian","Enemy","Shadowy Figure","Ally","Priest","Gang","Stranger","Nation","Mercenary","Criminals","Warrior","Watchmen","Spy","Military Veteran","Lunatic","Adventurer","Warlord","Recurring NPC","Champion","Construct","Undead","Giant","Invader","Demi-human","Immortal","Guild","Monster","Abberation","Outlaw","Traitor","Cult","Wizard","Supernatural Threat","Mad Alchemist","Alien","Dragon","Magic User","Magical Beast","Artifact","Outsider","Sorcerer","Deity","Hazardous Environment","Time","War","Conspiracy","Puzzle"],CPX.FP.agendas=["Radical","Fiend","Destroyer","Invader","Collaborator"],CPX.FP.hooks=["Solicitation","Dead Body","Disaster","Attack","Bizarre Occurrence","News","Friend in Need","Up To Their Necks"],CPX.DW.DangerTypes=["Ambitious Organization","Planar Force","Arcane Enemy","Horde","Cursed Place"],CPX.DW.DangerList=[[["Misguided Good","To do what is 'right' no matter the cost"],["Thieves Guild","To take by subterfuge"],["Cult","To infest from within"],["Religious Organization","To establish and follow doctrine"],["Corrupt Government","To maintain the status quo"],["Cabal ","To absorb those in power, to grow"]],[["God","To gather worshippers"],["Demon Prince","To open the gates of Hell"],["Elemental Lord","To tear down creation to its component parts"],["Force of Chaos","To destroy all semblance of order"],["Choir of Angels","To pass judgement"],["Construct of Law","To eliminate perceived disorder"]],[["Lord of the Undead","To seek true immortality"],["Power-mad Wizard","To seek magical power"],["Sentient Artifact","To find a worthy wielder"],["Ancient Curse","To ensnare"],["Chosen One","To fulfill or resent their destiny"],["Dragon","To hoard gold and jewels, to protect the clutch"]],[["Wandering Barbarians","To grow strong, to drive their enemies before them"],["Humanoid Vermin","To breed, to multiply and consume"],["Underground Dwellers","To defend the complex from outsiders"],["Plague of the Undead","To spread"]],[["Abandoned Tower","To draw in the weak-willed"],["Unholy Ground","To spawn evil"],["Elemental Vortex","To grow, to tear apart reality"],["Dark Portal","To disgorge demons"],["Shadowland","To corrupt or consume the living"],["Place of Power","To be controlled or tamed"]]],CPX.DW.ImpendingDoom=[["Tyranny","rule of the strong over the weak or the few over the many"],["Pestilence","the spread of sickness and disease, the end of wellness"],["Destruction","apocalypse, ruin and woe"],["Usurpation","the chain of order comes apart, someone rightful is displaced"],["Impoverishment","enslavement, the abandonment of goodness and right"],["Rampant Chaos","the laws of reality, of society, or any order is dissolved"]],CPX.FP.Villain=function(a){var b=[],c={};return 1==a.d10()?(b=a.pickone(CPX.DW.DangerList[4]),c.name=b[0],c.reason=b[1],c.class=["danger"]):1==a.rpg("1d3")[0]?(b=a.pickone(CPX.DW.DangerList[a.d4()-1]),c.name=b[0],c.class=["danger"],c.reason=a.pickone(SAG.vreason)):(c=CPX.people(a,{rank:a.weighted(["uncommon","rare","legendary"],[4,.8,.2])}),c.reason=a.pickone(SAG.vreason)),c.doom=a.pickone(CPX.DW.ImpendingDoom),c.tags=[a.pickone(COLORDESCRIPTORS)].concat(CPX.creature.special(a,"aspect"),CPX.creature.special(a,"ability"),CPX.creature.special(a,"element"),CPX.creature.special(a,"magic")),c.tags=c.tags.join(", "),c},CPX.FP.Location=function(a){var b="",c=["Mountains","Forest/Jungle","Desert/ Wasteland","...by the Sea","Island","Plains","Swamp","Hills","Underground"],d=["Another Plane","Distant Kingdom","The South","The North","The West","The East","Frontier","Foreign Land","Border","Across the Sea","Nearby Kingdom","Fabled Land"],e=["Wilderness","Town","Fortification","Ruins"];return a.bool({likelihood:25})&&(b+=a.pickone(d)+": "),a.bool({likelihood:33})&&(b+=a.pickone(c)+" & "),b+=a.pickone(c)+" ("+a.pickone(e)+") "},CPX.FP.Plot=function(a){var b=["Assassinate","Combat","Guide","Chase","Disguise","Move","Conceal","Strike","Assist","Discover","Avenge","Quest For","Travel with","Track","Obliterate","Reveal","Find","Protect","Liberate","Escort","Deliver","Aid","Encounter","Beset","Retrieve","Attack","Foil","Rescue","Defeat","Assault","Oppose","Shield","Race","Serve","Guard","Meet","Investigate","Get Past","Speak with","Contend with","Negotiate with","Defend","Explore","Resist","Support","Fight","Observe","Infiltrate","Join","Take","Journey to/with","Repel","Destroy","Protect","Fight","Kill","Steal","Escape from","Create","Safeguard","Battle","Trap","Locate","Save","Manipulate","Sell","Acquire","Kill","Control","Steal","Create","Hunt","Terrorize","Infiltrate","Overthrow","Obliterate","Ransom","Blackmail","Hijack","Bomb","Smuggle","Murder","Rob","Attack","Rule","Take","Destroy","Extort"],c=["Angel","Demon","Treasure","Wizard","God","Army","Monster","New Race","Princess","Thief","Friend","Magical Beast","Soldiers","Bard","Monk","Magical Event","Organization","Giant","Enemy","Undead","Villain","Rogue","Barbarian","Merchant","Secret","Warlord","Gem or Jewel","Ally","Village","Warrior","Stranger","Woman","Item","Secret","Rival","Peasants","Magic","Artifact","Noble","Man","Construct","Priest","Oracle","Dragon","Dungeon","Kingdom","Child","Creature","Ruler","Map","Guards","Humanoid","Castle","Weapon","Animal","Magic Item","Monster","Government","Abberation","Outsider","Love Interest","Sorcerer","Humanoid","Prophecy","Monster","Building","People","a Country","Treasure","an Enemy","an Object","an Invention","a Woman","a Man","the Hero (or team)","Money","a City","the World","a Vehicle","a Business","a Lost World","Jewels","a Ruler","Someone famous","a Rival","the Law","Innocent Victims","Hero's Friends or Family"];return a.pickone(b)+" "+a.pickone(c)},CPX.FP.Faction=function(a,b){for(var c=a.weighted(["uncommon","rare","legendary"],[4,1,.2]),d=CPX.people(a,{rank:c}),e=["want to protect their territory","are hunting","are raiding","are warring","are seeking","are increasing in number","are scheming","are hiding","are seeking to trade"],f=0;f<4;f++)e.push("want to "+CPX.FP.Plot(a));return b.length>1&&e.push("allied to the "+a.pickone(b).name),d.profession=CPX.professions(a,["Bandits","Refugees","Cult","Mob","Mystics"]),d.desire=a.pickone(e),d},CPX.FP.SupportingCast=function(a){for(var b=a.diceSum("2d4"),c=[],d="",e=["Neat","Foreign","Ambitious","Wild","Patriotic","Hard-boiled","Urban","Old","Native","Secretive","Quirky","Big","Small","Young"],f=["Trustworthy","Lucky","Beautiful","Talented","Highly Trained","Helpful","Professional","Athletic","Agile","Famous","Well Connected","Empathetic","Sharp Eyed","Quick Thinking","Logical","Smart","Educated","Strong","Tough","Intimidating","Powerful","Understanding","Smooth Talking","Charming","Rich","Nimble Footed","Strong Willed"],g=["Evil","Odd","Amateur","Violent","Feisty","Ugly","Shifty","Helpless","Troublesome","Sloppy","Dense","Cold","Impulsive","Clumsy","Dangerous","Weak","Unlucky","Menacing","Weak-willed","Slow","Deceptive","Shifty","Unperceptive","Sickly","Unimpressive","Bumbling","Poor"],h=["Actor","Captain","Soldier","Government Official","Contact","Burglar","Merchant","Guide","Servant","Noble","Wizard","Healer","Criminal","Investigator","Spouse","Expert","Informant","Farmer","Thug","Fanatic","Academic","Assistant","Worker","Henchman","Kid","Fighter","Barbarian","Monk","Cleric","Priest","Thief","Scout","Explorer","Ranger","Bard","Royal","Druid","Foreigner"],i=0;i<b;i++)d=a.pickone(e),a.bool({likelihood:15})&&(d+=" and "+a.pickone(f)),d+=" but "+a.pickone(g)+" "+a.pickone(h),c.push(d);return c},CPX.FP.PlotTwist=function(a){var b=["Betrayal!","New Location: "+CPX.FP.Location(a),"Greater Villain","Hidden Plot: "+CPX.FP.Plot(a),"Reversal!","Bizarre Occurrence","Deus Ex Machina"],c=a.pickone(b);if("Greater Villain"==c){var d=CPX.FP.Villain(a);c="Greater Villain: "+d.name}return c},CPX.FP.AdventureComplication=function(a){var b=["Ambush","Monsters","Enemy","Ranged Assault","Magical Attack","Mob","Brawl"],c=["Travel Problem","Getting Lost","Environment","Weather","Disaster","Barriers","Physical Challenge","Side-tracked","Magical Event","Magical Barrier"],d=["Trap","Mechanical Trap","Equipment Failure","Construct","Lack of Information","Red Herring","Race","Contest","Tournament","Puzzles","Physical Puzzle","Riddles","Unknown Language","Mystery","Magical Mystery","Magical Trap","Magical Puzzle"],e=["Trickery","Theft","Criminals","Thieves","Spies","Abduction","Misdirection"],f=["Royal Influence","Power Struggle","Politics","Love Interest","Bureaucracy","Diplomacy","Superstition","Royal Ambition","Social Event","Angry Mob","Frightened Commoners","Power Struggle","Noble Influence","Military Influence","Guild Influence","Local Conflict","Legal Trouble","Lack of trust","Religion"],g=["Duel","Rivalry","Vendetta","Betrayal","Double-Cross","Mistaken Identity","Deity Interference"],h=["Drugs","Insanity","Fear","Money","Taxes","Disease","Plague","Famine","Innocents","War","Invasion"],i=["Chest","Locker","Treasure Map","Cache"],j=[b,c,d,e,f,g,h,i];return a.pickone(a.pickone(j))},CPX.FP.Adventure=function(a){var b={seed:a.seed,factions:[],twist:"",complication:"",hook:"",cast:[]};b._id=b.seed.join(""),b.RNG=new Chance(b._id),b.villain=CPX.FP.Villain(b.RNG),b.plot=CPX.FP.Plot(b.RNG),b.location=CPX.FP.Location(b.RNG);for(var c=0;c<Number(b.RNG.rpg("1d3"))+1;c++)b.factions.push(CPX.FP.Faction(b.RNG,b.factions));return b.twist=CPX.FP.PlotTwist(b.RNG),b.complication=CPX.FP.AdventureComplication(b.RNG),b.hook=b.RNG.pickone(CPX.FP.hooks),b.cast=CPX.FP.SupportingCast(b.RNG),b.RNG=null,delete b.RNG,b},Vue.component("c-fpg-villain",{props:["V"],template:'<div class="box"><h4 class="center strong">Villain</h4><input class="form-control center strong" type="text" v-model="V.name" placeholder="NAME"><div class="input-group "><span class="input-group-addon strong">Tags</span><textarea class="center form-control" type="textarea" v-model="V.tags"></textarea></div><div class="input-group "><span class="input-group-addon strong">Reason</span><input class="center form-control" type="text" v-model="V.reason"></div></div>'}),Vue.component("c-factions",{props:["factions"],template:'<div><strong>Main Factions:</strong><ul><li v-for="f in factions"><div><strong>{{f.name}} {{f.profession}}</strong> who {{f.desire}}</div><div v-if="f.special.length>0"><strong>Tags:</strong> {{f.special.unique().join(`, `) | capitalize }}</div></li></ul></div>'}),Vue.component("c-fpg-FPG",{props:["A","idx"],template:'  <div class="content-minor">    <input class="form-control input-lg center" type="text" v-model="A.name" placeholder="NAME">    <textarea class="form-control" type="textarea" v-model="A.notes" placeholder="ADD NOTES"></textarea>    <c-fpg-villain v-bind:V="A.villain"></c-fpg-villain>    <div><strong>Plot:</strong> {{A.plot}}</div>    <div><strong>Doom:</strong> {{A.villain.doom[0]}} ({{A.villain.doom[1]}})</div>    <div><strong>Location:</strong> {{A.location}}</div>    <c-factions v-bind:factions="A.factions"></c-factions>    <div v-if="idx>1"><strong>Twist:</strong> {{A.twist}}</div>    <div v-if="idx==0"><strong>Hook:</strong> {{A.hook}}</div>    <div v-if="idx==0"><strong>Supporting Cast: </strong>        <ul><li v-for="c in A.cast">{{c}}</li></ul>    </div>  </div>  '}),Vue.component("c-fpg-result",{props:["A","idx","allgens"],template:'  <h4 class="header">    <div class="btn-group" role="group" aria-label="...">      <button v-on:click="remove" type="button" class="btn btn-sm">        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>      </button>      <button v-if="idx>0" v-on:click="move(-1)" type="button" class="btn btn-sm"><span class="glyphicon glyphicon-chevron-up"></span></button>      <button v-on:click="move(1)" type="button" class="btn btn-sm"><span class="glyphicon glyphicon-chevron-down"></span></button>    </div>    {{header}} {{A.name}}  </h4>  <component v-bind:is="type" v-bind:A="A" v-bind:idx="idx"></component>  <div class="center bottom-pad">    <button v-on:click="save" type="button" class="btn btn-info">Save This As A New Adventure</button>  </div>  ',computed:{type:function(){return objExists(this.A)?"c-fpg-"+this.A.seed[0]:"c-fpg-FPG"},header:function(){return 0==this.idx?"Central Plot":"Adventure"}},methods:{save:function(){var a={name:this.A.name,arc:[this.A]};CPXSAVE.setItem(this.A._id,a).then(function(){}),objExists(this.allgens[this.A._id])||Vue.set(this.allgens,this.A._id,this.A.name)},remove:function(){HUB.$emit("FPG-remove",this.idx)},move:function(a){HUB.$emit("FPG-move",{i:this.idx,val:a})}}}),Vue.component("c-fpg",{template:'  <h2 class="center">Fantasy Plot Generators</h2>  <c-menubar id="FPG" v-bind:show="showmenu"></c-menubar>  <c-loadselect id="FPG" v-bind:list="allgens" v-bind:show="showlist.load"></c-loadselect>  <div class="center content-minor">    <div class="btn-group bottom-pad" role="group" aria-label="...">      <button v-on:click="JTF" type="button" class="btn btn-info">CPX Fantasy</button>      <button v-on:click="d30S" type="button" class="btn btn-info">d30 Sandbox</button>    </div>    <button v-show="content.length>0" v-on:click="add" type="button" class="btn btn-info">Add New Adventure To Arc</button>  </div>  <c-fpg-result v-for="A in content" v-bind:A="A" v-bind:idx="$index" v-bind:allgens="allgens"></c-fpg-result>',data:function(){return{vid:"FPG",loadids:["FPG","SAG"],showmenu:{new:!0,load:!0,save:!0,close:!0},showlist:{load:!1},content:[],allgens:{}}},created:function(){CPX.vue.page.onCreated(this),HUB.$on("FPG-move",this.move)},beforeDestroy:function(){CPX.vue.page.onBeforeDestroy(this),HUB.$off("FPG-move",this.move)},methods:{add:function(a){this.content.length>0&&(a=this.content[0].seed[0]),"FPG"==a?this.content.push(CPX.FP.Adventure({
seed:["FPG","-",CPXC.string({length:27,pool:base62})]})):this.content.push(SAG.adventure({seed:["SAG","-",CPXC.string({length:27,pool:base62})]}))},move:function(a){var b=[].concat(this.content),c=objCopy(b[a.i]),d=a.i+a.val;d>=b.length||(b[a.i]=objCopy(b[d]),b[d]=c,this.content=[].concat(b))},save:function(){var a={name:this.content[0].name,arc:this.content};CPXSAVE.setItem(this.content[0]._id,a).then(function(){}),objExists(this.allgens[this.content[0]._id])||Vue.set(this.allgens,this.content[0]._id,this.content[0].name)},load:function(a){this.content=a.arc.concat(this.content)},JTF:function(){this.content=[];for(var a=0;a<4;a++)this.add("FPG")},d30S:function(){this.content=[];for(var a=0;a<4;a++)this.add("SAG")},new:function(){this.content=[]},generate:function(){},remove:function(a){this.content.splice(a,1)},close:function(){CPX.vue.page.close(),this.content=[],this.allgens=[]}}}),CPX.mapDimensions=function(){var a=.95*document.getElementById("maps").offsetWidth,b=.95*document.getElementById("maps").offsetHeight;return{width:a,height:b}},CPX.hexMap=function(a){var b={_dtype:"zones",_radial:!1,_pointy:"undefined"==typeof a.pointy||a.pointy,_hexradius:35,seed:"undefined"==typeof a.seed?[CPXC.string({length:32,pool:base62})]:a.seed,cells:{},zones:[],mods:{}};b._id=b.seed.join(""),b.parent="undefined"==typeof a.parent?"":a.parent,b.class="undefined"==typeof a.class?["hexMap"]:a.class,b.special="undefined"==typeof a.special?[]:a.special,b._nZones="undefined"==typeof a.nZones?-1:a.nZones,b._nCells="undefined"==typeof a.nCells?0:a.nCells;var c="undefined"!=typeof a.uniform&&a.uniform;if(b._visible="undefined"==typeof a.visible?[]:a.visible,b._zoneEnter="undefined"==typeof a.zoneEnter?-1:a.zoneEnter,b._parentNeighboors="undefined"==typeof a.parentNeighboors?[]:a.parentNeighboors,b.RNG=new Chance(b.seed.join("")),b._size="undefined"==typeof a.size?CPX.size(b.RNG)/2:a.size,c){if(0==b._nCells)for(var d=0;d<b._size;d++)b._nCells+=Math.round(b.RNG.normal({mean:40,dev:7}));b.zones.push(new Zone(b,0));for(var d=0;d<b._nCells;d++)CPX.hexMap.addCell(b)}else{b._nZones==-1&&(b._nZones=Math.round(10*b._size));for(var d=0;d<b._nZones;d++)CPX.hexMap.addZone(b)}return CPX.hexMap.makeVisible(b),b.RNG=null,delete b.RNG,CPX.hexMap.zoneNeighboors(b),CPX.hexMap.bounds(b),b.opts=a,b.mods=new Nedb,b.mods.persistence.setAutocompactionInterval(12e4),b},CPX.hexMap.pushMod=function(a,b){"set"==b.type?a.mods.update(b.query,{$set:b.data},{upsert:!0},function(){}):"addtoset"==b.type&&a.mods.update(b.query,{$addToSet:b.data},{upsert:!0},function(){})},CPX.hexMap.save=function(a){var b={_id:a._id,seed:a.seed,mods:a.mods,opts:a.opts};CPXSAVE.setItem(a._id,b)},CPX.hexMap.applyMods=function(a){var b=a.opts.mods;return new Promise(function(c,d){a.mods.insert([b],function(a){}),b.forEach(function(b){if(objExists(a.cells[b._id]))for(var c in b)"_id"!=c&&(a.cells[b._id][c]=b[c]);else if(b._id.includes("_")){var d=CPX.hex.cellQR(b._id);a.cells[b._id]=new HCell(d.q,d.r,a.opts.terrain,a.zones[0]),a.zones[0].cells.push(b._id)}else a[b._id]=b.val}),CPX.hexMap.bounds(a),c(a)})},CPX.hexMap.addZone=function(a){var b=CPX.size(a.RNG),c=a.zones.length,d=new Zone(a,c);d.size=b/2,a.zones.push(d);for(var e=a.RNG.pickone(a.zones),f=[],g="",h=0;h<3*b/2;h++){if(g="",0==c&&0==h)g="0_0";else{if(0==h)for(;0==f.length;)f=CPX.hexMap.zoneEmptyNeighboors(a,e.id),e=a.RNG.pickone(a.zones);else if(f=CPX.hexMap.zoneEmptyNeighboors(a,d.id),0==f.length)break;g=a.RNG.pickone(f)}var i=CPX.hex.cellQR(g);a.cells[g]=new HCell(i.q,i.r,-1,d),d.cells.push(g),a._nCells++}CPX.hexMap.zoneBounds(a,d.id)},CPX.hexMap.addCell=function(a){var b=a.zones[0],c="",d=[];objExists(a.cells["0_0"])?(d=CPX.hexMap.zoneEmptyNeighboors(a,b.id),c=a.RNG.pickone(d)):c="0_0";var e=CPX.hex.cellQR(c);a.cells[c]=new HCell(e.q,e.r,-1,b),b.cells.push(c)},CPX.hexMap.cellNeighboors=function(a,b){for(var c={n:[],o:[]},d=CPX.hex.withinX(b,1)[1],e=0;e<d.length;e++)objExists(a.cells[d[e].id])?c.n.push(d[e].id):c.o.push(d[e].id);return c},CPX.hexMap.bounds=function(a){var b={},c=0,d=0,e=0,f=0;for(var g in a.cells)b=a.cells[g],b.q<f&&(f=b.q),b.q>d&&(d=b.q),b.r<e&&(e=b.r),b.r>c&&(c=b.r);a.q=f,a.r=e,a.dw=Math.abs(d-f),a.dh=Math.abs(c-e),a.center={q:f+a.dw/2,r:e+a.dh/2},a.bounds=CPX.hex.mapBounds(a);var h=CPX.hex.center(a._hexradius,a.center,a._pointy);a.center.x=h.x,a.center.y=h.y},CPX.hexMap.zoneBounds=function(a,b){for(var c=a.zones[b],d={},e=0,f=0,g=0,h=0,i=0;i<c.cells.length;i++)d=a.cells[c.cells[i]],d.q<h&&(h=d.q),d.q>f&&(f=d.q),d.r<g&&(g=d.r),d.r>e&&(e=d.r);return c.q=h,c.r=g,c.width=Math.abs(f-h),c.height=Math.abs(e-g),c.center={q:h+c.width/2,r:g+c.height/2},c.radius=Math.sqrt((h+c.width)*(h+c.width)+(g+c.height)*(g+c.height)),c},CPX.hexMap.makeVisible=function(a){for(var b=0,c=0;c<a.zones.length;c++)(a._visible.includes(c)||a._visible.includes("all"))&&(a.zones[c].visible=!0,b++);if(a._zoneEnter==-1){var d=CPX.hexMap.zoneOnEdge(a);a._zoneEnter=a.RNG.pickone(d)}0==b&&(a.zones[a._zoneEnter].visible=!0)},CPX.hexMap.zoneEmptyNeighboors=function(a,b){for(var c=a.zones[b],d=[],e=0;e<c.cells.length;e++)d=d.concat(CPX.hexMap.cellNeighboors(a,a.cells[c.cells[e]]).o);return d.unique()},CPX.hexMap.zoneOnEdge=function(a){var b=[];for(var c in a.cells)CPX.hexMap.cellNeighboors(a,a.cells[c]).o.length>0&&b.push(a.cells[c].zone);return b.unique()},CPX.hexMap.zoneNeighboors=function(a){var b=[],c=-1,d=-1,e=[];for(var f in a.cells){c=a.cells[f].zone,objExists(b[c])||(b[c]=[]),e=CPX.hexMap.cellNeighboors(a,a.cells[f]).n;for(var g=0;g<e.length;g++)d=a.cells[e[g]].zone,c!=d&&(b[c].includes(d)||b[c].push(d))}return a._ZN=b,b},CPX.hexMap.mapClick=function(a){var b=a.target,c=b.data,d=CPXDB[c.map],e=d.cells[c.cid],f=d.zones[e.zone],g=CPXAU.location[CPXAU.location.length-1];CPXAU.location.join("").includes(d._id)&&g==f.id||d._ZN[g].includes(f.id)&&CPX.hexMap.enterZone(d,f)},CPX.display.drawTokens=function(a){objExists(a.display.tokens)&&a.display.stage.removeChild(a.display.tokens),a.display.tokens=new createjs.Container;var b={},c={};a.tokens.forEach(function(d){c={map:a._id,cid:ac.id},CPX.display.makeGraphics({dtype:makeShape,onClick:CPX[a.class[0]].mapClick,container:a.display.tokens,data:{token:b,map:a,size:b.size,stroke:b.line,fill:b.color}})})},CPX.display.drawHex=function(a){var b=["map","siteMarkers"];b.forEach(function(b){objExists(a.display[b])&&a.display.stage.removeChild(a.display[b]),a.display[b]=new createjs.Container});var c={},d={},e={},f="",g=.5;for(var h in a.cells)c=a.cells[h],(a.zones[c.zone].visible||a.visible.includes(c.zone))&&(d={map:a._id,cid:c.id},f=hexToRgbA(a.zones[c.zone].color,g),a.class.includes("terrain")&&(f=terrainColors[c.terrain]),e={hex:c,map:a,data:d,size:a._hexradius,stroke:"black",fill:f},CPX.display.makeGraphics({dtype:makeHex,onClick:CPX[a.class[0]].mapClick,container:a.display.map,data:e})),c.special.forEach(function(b){b.shape="circle",f=0==b.class[0].length?"white":HEXSITES[b.class[0]].color,CPX.display.makeGraphics({dtype:makeShape,onClick:CPX[a.class[0]].mapClick,container:a.display.siteMarkers,data:{hex:c,map:a,data:d,size:5,shape:"circle",stroke:"black",fill:f}})});b.forEach(function(b){a.display.stage.addChild(a.display[b])}),CPX.display.drawTokens(a),CPX.display.centerAdjust(a)},CPX.display.hexMap=function(a){CPX.display.clearActive(a),a.display={data:{}},a.display.canvas=$("#"+a._id+" canvas")[0],a.display.stage=new createjs.Stage(a.display.canvas),CPX.display.drawHex(a)};const HEXSITES={all:["town","stronghold","lair","natural","ruin","resource","other"],town:{class:["town"],color:"black"},stronghold:{class:["stronghold"],color:"green"},ruin:{class:["ruin"],color:"grey"},natural:{class:["natural"],color:"blue"},resource:{class:["resource"],color:"yellow"},lair:{class:["lair"],color:"red"},other:{class:["ruin"],color:"orange"}};CPX.rectHexArea=function(a){var b={class:["rectHexArea","hexMap","pointy","terrain"],_hexradius:35,seed:"undefined"==typeof a.seed?[CPXC.string({length:32,pool:base62})]:a.seed,parent:"undefined"==typeof a.parent?"":a.parent,special:"undefined"==typeof a.special?[]:a.special,name:"undefined"==typeof a.name?"":a.name,notes:"undefined"==typeof a.notes?"":a.notes,opts:a,width:a.width,height:a.height,selected:[],tokens:[],cells:{},zones:[],mods:{}};b._id=b.seed.join(""),b.RNG=new Chance(b.seed.join(""));var c=new Zone(b,0);return c.visible=1,b.zones.push(c),b.mods=new Nedb,b.mods.persistence.setAutocompactionInterval(12e4),CPX.rectHexArea.addCells(b),b},CPX.rectHexArea.addCells=function(a){var b=a.opts.width,c=a.opts.height;"CHM"==a.seed[0]&&(b=a.width,c=a.height);for(var d=0,e="",f=a.zones[0],g=-Math.floor(c/2);g<Math.ceil(c/2);g++){for(var h=-Math.floor(b/2)-Math.floor(d/2);h<Math.ceil(b/2)-Math.ceil(d/2);h++)if(e=h+"_"+g,!objExists(a.cells[e])&&(a.cells[e]=new HCell(h,g,a.opts.terrain,f),f.cells.push(e),"CHM"==a.seed[0]&&(b!=a.opts.width||c!=a.opts.height))){var i={_id:e},j={terrain:a.opts.terrain};CPX.hexMap.pushMod(a,{query:i,type:"set",data:j})}d++}CPX.hexMap.bounds(a)},CPX.rectHexArea.mapClick=function(a){var b=a.target,c=b.data,d=CPXDB[c.map],e=d.cells[c.cid];if(d.zones[e.zone],d.VU.palette>-1){var f={_id:c.cid},g={terrain:d.VU.palette};CPX.hexMap.pushMod(d,{query:f,type:"set",data:g}),e.terrain=d.VU.palette}else d.selected[0]==c.cid?d.selected=[]:d.selected=[c.cid];d.VU.display()},Vue.component("c-cha-site",{props:["site","ids"],template:'<div class="input-group strong"><input class="form-control" type="text" v-model="site.name" placeholder="NAME"><span class="input-group-btn"><button v-on:click="removeSite" type="button" class="btn"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span></button></span></div><div class="input-group strong" ><span class="input-group-addon strong">Type</span><select class="form-control" v-model="site.class[0]" @change="mod"><option class="center" v-for="site in hexsites.all" v-bind:value="site">{{site | capitalize}}</option></select><span class="input-group-addon strong">Size</span><select class="form-control" v-model="site.size" @change="mod" v-if="site.class[0]==`town`"><option class="center" v-for="size in citysize" v-bind:value="$index">{{size | capitalize}}</option></select><input class="form-control" type="number" v-model="site.size" v-else></div>',data:function(){return{hexsites:HEXSITES,citysize:CPX.CFP.citysizes}},methods:{mod:function(){HUB.$emit("CHA-mod",{query:{_id:this.ids.cid},data:{special:CPXDB[this.ids.mid].cells[this.ids.cid].special.concat([])},type:"set"})},removeSite:function(){CPXDB[this.ids.mid].cells[this.ids.cid].special.splice(this.ids.i,1),this.mod()}}}),Vue.component("c-cha-cell",{props:["cell","mid"],template:'<div class="box content-minor"><h4 class="center header">{{cell.name}}</h4><input class="form-control center" type="text" v-model="cell.name" placeholder="NAME" @change="mod(`name`)"><textarea class="form-control" type="textarea" v-model="cell.notes" placeholder="ADD NOTES" @change="mod(`notes`)"></textarea><h4 class="center">Sites <button v-on:click="addSite" type="button" class="btn btn-sm"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button></h4><c-cha-site v-for="site in cell.special" v-bind:site="site" v-bind:ids="{mid:mid,cid:cell.id,i:$index}"></c-cha-site></div>',data:function(){return{}},methods:{mod:function(a){if(this.cell[a].length>0){var b={};b[a]=this.cell[a],HUB.$emit("CHA-mod",{query:{_id:this.cell.id},data:b,type:"set"})}},addSite:function(){this.cell.special.push({class:[""]})}}}),Vue.component("c-cha",{template:'  <div class="slim center-div box">    <h2 class="center" v-show="!showlist.minimal">HexMap Area Builder</h2>    <h4 class="center header" v-show="showlist.minimal">{{map.name}}</h4>    <div v-show="!showlist.minimal">      <c-menubar id="CHA" v-bind:show="showmenu"></c-menubar>      <c-loadselect id="CHA" v-bind:list="allgens" v-bind:show="showlist.load"></c-loadselect>      <div class="center content-minor">        <div class="btn-group" role="group" aria-label="...">          <button v-on:click="buildShow" type="button" class="btn btn-info">Build Your Own</button>          <button v-on:click="randomShow" type="button" class="btn btn-info">Random Hex Area</button>        </div>      </div>      <div class="input-group strong" v-show="showlist.globalTerrain">        <span class="input-group-addon strong">Terrain</span>        <select class="form-control" v-model="dataterrain">          <option v-for="t in terrains" v-bind:value="$index">{{t | capitalize}}</option>        </select>        <span class="input-group-btn" v-show="showlist.changeTerrain">          <button v-on:click="globalTerrain" type="button" class="btn strong">Change</button>        </span>      </div>      <div class="input-group strong" v-show="showlist.makegen">        <span class="input-group-addon strong">Width</span>        <input class="form-control center" type="number" v-model="width" min=10">        <span class="input-group-addon strong">Height</span>        <input class="form-control center" type="number" v-model="height" min=10">      </div>      <div class="input-group strong" v-show="showlist.makegen">        <span class="input-group-addon strong" ># of Cities</span>        <input class="form-control center" type="number" v-model="ncity" min=0">        <span class="input-group-addon strong" ># of Ruins</span>        <input class="form-control center" type="number" v-model="nruin" min=0">      </div>      <div class="center" v-show="showlist.makegen">        <p>Plus 2-4 towns, 1-3 resources, and 1-3 lairs per city</p>      </div>      <div class="center" v-show="showlist.make">        <button v-on:click="make" type="button" class="btn btn-info strong">Generate Map</button>      </div>      <div class="center" v-show="showlist.addcells">        <div class="btn-group" role="group" aria-label="...">          <button v-on:click="addCells(`w`)" type="button" class="btn strong">            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>Width          </button>          <button v-on:click="addCells(`h`)" type="button" class="btn strong">            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>Height          </button>        </div>      </div>      <div class="content" v-show="hasmap">        <input class="form-control center" type="text" v-model="map.name" placeholder="NAME">        <textarea class="form-control" type="textarea" v-model="map.notes" placeholder="Notes"></textarea>      </div>    </div>    <c-cha-cell v-for="cid in map.selected" v-bind:cell="map.cells[cid]" v-bind:mid="map._id"></c-cha-cell>  </div>  <div id="{{map._id}}" class="map active" v-bind:class="front" v-show="showlist.map">    <canvas width="{{bounds.x}}" height="{{bounds.y}}"></canvas></div>  <div class="footer box strong slim">    <div class="center">      <div class="btn-group" role="group" aria-label="...">        <button v-on:click="palette=-1" type="button" class="btn"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span></button>        <button v-on:click="frontback" type="button" class="btn">{{front | capitalize}}</button>        <button v-on:click="zoom(-1)" type="button" class="btn">Z <span class="glyphicon glyphicon-minus" aria-hidden="true"></span></button>        <button v-on:click="zoom(1)" type="button" class="btn">Z <span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>        <button v-on:click="showlist.minimal=!showlist.minimal" type="button" class="btn">          <span class="glyphicon" v-bind:class="isMinimal" aria-hidden="true"></span>Menu        </button>      </div>    </div>    <div class="input-group">      <span class="input-group-addon strong">Terrain Paint</span>      <select class="form-control" v-model="palette">        <option v-for="t in terrains" v-bind:value="$index">{{t | capitalize}}          <span class="palette square" v-bind:class="t"></span>        </option>      </select>    </div>  <div>  ',data:function(){return{vid:"CHA",loadids:["CHA","CHM"],showmenu:{new:!0,load:!0,save:!0,close:!0},showlist:{load:!1,map:!0,make:!1,changeTerrain:!1,globalTerrain:!1,addcells:!1,makegen:!1,minimal:!1,paint:!1},type:"",front:"back",ncity:0,nruin:0,terrains:TERRAINS,tcolor:terrainColors,palette:-1,dataterrain:0,seed:[],width:12,height:12,map:{},allgens:{}}},created:function(){CPX.vue.page.onCreated(this)},beforeDestroy:function(){CPX.vue.page.onBeforeDestroy(this)},computed:{bounds:function(){return this.hasmap?this.map.bounds:{x:0,y:0}},hasmap:function(){return objExists(this.map.cells)},isMinimal:function(){return this.showlist.minimal?"glyphicon-plus":"glyphicon-minus"}},methods:{make:function(){this[this.type]()},buildShow:function(){this.new(),this.type="build",this.showlist.globalTerrain=!0,this.showlist.make=!0},randomShow:function(){this.new(),this.type="random",this.showlist.makegen=!0,this.showlist.globalTerrain=!0,this.showlist.make=!0},globalTerrain:function(){for(var a in this.map.cells)this.map.cells[a].terrain==this.map.opts.terrain&&(this.map.cells[a].terrain=this.dataterrain);this.map.opts.terrain=this.dataterrain,this.display()},addCells:function(a){"CHA"==this.map.seed[0]?"w"==a?this.map.opts.width++:this.map.opts.height++:"w"==a?this.map.width++:this.map.height++,CPX.rectHexArea.addCells(this.map),Vue.nextTick(this.display)},mod:function(a){CPX.hexMap.pushMod(this.map,{query:a.query,type:a.type,data:a.data}),this.display()},frontback:function(){"front"==this.front?this.front="back":this.front="front"},zoom:function(a){5==this.map._hexradius&&a==-1||(1==a?this.map._hexradius+=5:this.map._hexradius-=5,CPX.hexMap.bounds(this.map),Vue.nextTick(this.display))},save:function(){var a=this,b=objCopy(this.map.opts);b._id=this.map._id,b.name=this.map.name,b.notes=this.map.notes,this.map.mods.find({},function(c,d){b.mods=d,CPXSAVE.setItem(a.map._id,b).then(function(){}),objExists(a.allgens[a.map._id])||Vue.set(a.allgens,a.map._id,a.map.name)})},load:function(a){this.new(),this.showlist.addcells=!0;var b=this,c=a;"CHM"==c.seed[0]?CPXDB[a._id]=CPX.hexMapGen(c):(CPXDB[a._id]=CPX.rectHexArea(c),this.showlist.globalTerrain=!0,this.showlist.changeTerrain=!0),CPXDB[a._id].VU=this,this.seed=c.seed,objExists(c.mods)?CPX.hexMap.applyMods(CPXDB[a._id]).then(function(a){b.map=a,Vue.nextTick(b.display)}):(b.map=CPXDB[a._id],Vue.nextTick(this.display))},new:function(){this.type="",this.showlist.globalTerrain=!1,this.showlist.make=!1,this.showlist.makegen=!1,this.showlist.changeTerrain=!1,this.showlist.addcells=!1,objExists(this.map.display)&&CPX.display.clearActive(this.map),this.map={}},random:function(){this.new(),this.showlist.addcells=!0,this.seed=["CHM","-",CPXC.string({length:27,pool:base62})],CPXDB[this.seed.join("")]=this.map=CPX.hexMapGen({seed:this.seed,terrain:this.dataterrain,width:this.width,height:this.height,ncity:this.ncity,nruin:this.nruin}),this.map.VU=this,Vue.nextTick(this.display)},build:function(){this.new(),this.showlist.addcells=!0,this.showlist.globalTerrain=!0,this.showlist.changeTerrain=!0,this.seed=["CHA","-",CPXC.string({length:27,pool:base62})],CPXDB[this.seed.join("")]=this.map=CPX.rectHexArea({seed:this.seed,width:7,height:7,terrain:this.dataterrain}),this.map.VU=this,Vue.nextTick(this.display)},display:function(){CPX.display.hexMap(CPXDB[this.seed.join("")])},close:function(){CPX.vue.page.close(),this.map={},this.allgens={}}}}),CPX.data.mapResources=["Fertile Land","Lush Pasture","Good Fishing","Medicinal Plants","Good Hunting","Old Industry","Good Mine","Rich Gathering","Good Timber","Magical Materials"],CPX.data.mapLairs=["Ancient Evil","Magical Gate","Ancient Fort","Dark Elves/Fae","Aspiring Warlord","Monster Nest","Bandit Camp","Renegade Outpost","Tainted Elemental","School of Dark Sorcery","Dragon","Vicious Humanoids","Cursed Earth","Splinter Faction","Outsiders","Thieves' Stronghold","Deep Dwarves","Undead","Mad Wizard"],CPX.hexMapGen=function(a){var b=CPX.rectHexArea(a);return b.class=["hexMapGen"].concat(b.class),b.ncity=a.ncity,b.nruin=a.nruin,CPX.hexMapGen.terrain(b),CPX.hexMapGen.pop(b),CPX.hexMap.bounds(b),b.RNG=null,delete b.RNG,b},CPX.hexMapGen.terrain=function(a){function b(b,c){var d={},e={},f="";do e=0==c.length?a.cells[a.RNG.pickone(b)]:a.cells[a.RNG.pickone(c)],f=a.RNG.pickone(CPX.hex.neighboorIDs(e)),d=a.cells[f];while(void 0==d||c.includes(d.id));return d}function c(a,c){for(var e=[],f={},g=0;g<a;g++)f=b(d,e),e.push(f.id),f.terrain=c}for(var d=CPX.cellArray(a),e=a.opts.terrain,f={0:[3,4,1,2,5,6],1:[3,4,0,2,5,6],2:[5,3,0,1,4,6],3:[4,5,0,1,2,6],4:[3,5,0,1,2,6],5:[6,3,0,1,2,4],6:[5,4,0,1,2,3]},g=Math.round(8*d.length/24),h=0,i=0;g>0;)h=a.RNG.natural({min:1,max:g}),i>10&&(h=g),c(h,f[e][0]),g-=h,i++;for(g=Math.round(2*d.length/24),i=0;g>0;)h=a.RNG.natural({min:1,max:g}),i>7&&(h=g),c(h,f[e][1]),g-=h,i++;for(nw=f[e].slice(2),g=Math.round(1*d.length/24);g>0;)h=a.RNG.natural({min:1,max:g}),c(h,a.RNG.pickone(nw)),g-=h},CPX.hexMapGen.pop=function(a){for(var b=(CPX.CFP,CPX.cellArray(a)),c="",d=0,e=a.ncity,f=0;f<e;f++)c=a.RNG.pickone(b),d=a.RNG.bool()?6:7,a.cells[c].special.push({class:["town"],size:d});var g=-1;e++;for(var f=0;f<e;f++){g=a.RNG.natural({min:2,max:4});for(var h=0;h<g;h++)c=a.RNG.pickone(b),d=a.RNG.natural({min:2,max:5}),a.cells[c].special.push({class:["town"],size:d});g=a.RNG.natural({min:1,max:3});for(var h=0;h<g;h++)c=a.RNG.pickone(b),d=a.RNG.weighted([2,3,4,5],[3,6,2,1]),a.cells[c].special.push({name:a.RNG.pickone(CPX.data.mapResources),class:["resource"],size:d});g=a.RNG.natural({min:1,max:3});for(var h=0;h<g;h++)c=a.RNG.pickone(b),d=a.RNG.weighted([2,3,4,5],[3,6,2,1]),a.cells[c].special.push({name:a.RNG.pickone(CPX.data.mapLairs),class:["lair"],size:d})}for(var f=0;f<a.nruin;f++)c=a.RNG.pickone(b),d=a.RNG.weighted([2,3,4,5],[3,6,2,1]),a.cells[c].special.push({class:["ruin"],size:d})},CPX.hexMapGen.mapClick=function(a){CPX.rectHexArea.mapClick(a)},CPX.OSRHero={},CPX.OSRHero.template={_id:"",name:"",notes:"",rules:"",XP:0,HP:0,level:1,class:"",AC:"9 [10]",attributes:{Strength:0,Dexterity:0,Constitution:0,Intelligence:0,Wisdom:0,Charisma:0},facts:[],gifts:[],words:[],saves:[],abilities:[],inventory:[],spells:[]},CPX.data.SWBonus={Strength:[{score:1,tohit:-2,dmg:-1,opend:"1",carry:-10},{score:4,tohit:-1,dmg:0,opend:"1",carry:5},{score:6,tohit:0,dmg:0,opend:"1-2",carry:0},{score:8,tohit:0,dmg:0,opend:"1-2",carry:5},{score:12,tohit:1,dmg:0,opend:"1-2",carry:10},{score:15,tohit:1,dmg:1,opend:"1-3",carry:15},{score:16,tohit:2,dmg:2,opend:"1-4",carry:30},{score:17,tohit:2,dmg:3,opend:"1-5",carry:50}],Dexterity:[{score:1,tohit:-1,AC:-1},{score:8,tohit:0,AC:0},{score:12,tohit:1,AC:1}],Constitution:[{score:1,hpmod:-1,raise:.5},{score:8,hpmod:0,raise:.75},{score:12,hpmod:1,raise:1}],Intelligence:[{score:1,maxlang:0,maxlv:4,newspell:.3,basicspell:"2/4"},{score:7,maxlang:1,maxlv:5,newspell:.4,basicspell:"3/5"},{score:8,maxlang:1,maxlv:5,newspell:.45,basicspell:"3/5"},{score:9,maxlang:2,maxlv:5,newspell:.5,basicspell:"4/6"},{score:10,maxlang:2,maxlv:6,newspell:.5,basicspell:"4/6"},{score:11,maxlang:3,maxlv:6,newspell:.55,basicspell:"4/6"},{score:12,maxlang:3,maxlv:7,newspell:.65,basicspell:"5/8"},{score:13,maxlang:4,maxlv:7,newspell:.65,basicspell:"5/8"},{score:14,maxlang:4,maxlv:8,newspell:.75,basicspell:"6/10"},{score:15,maxlang:5,maxlv:8,newspell:.75,basicspell:"6/10"},{score:16,maxlang:5,maxlv:9,newspell:.85,basicspell:"7/All"},{score:17,maxlang:6,maxlv:9,newspell:.95,basicspell:"8/All"}],Charisma:[{score:1,hirelings:1},{score:4,hirelings:2},{score:6,hirelings:3},{score:8,hirelings:4},{score:12,hirelings:5},{score:15,hirelings:6},{score:17,hirelings:7}]},CPX.data.WSBonus=[{score:1,b:-1,p:-5,text:"(-1/-5%)"},{score:6,b:0,p:0,text:"(+0/0%)"},{score:14,b:1,p:5,text:"(+1/+5%)"}],CPX.data.GBBonus=[{score:1,b:-3,text:"(-3)"},{score:3,b:-2,text:"(-2)"},{score:5,b:-1,text:"(-1)"},{score:8,b:0,text:"(+0)"},{score:12,b:1,text:"(+1)"},{score:15,b:2,text:"(+2)"},{score:17,b:3,text:"(+3)"}],CPX.OSRHero.bonus=function(a,b){if(b="undefined"==typeof b?"SW":b,"SW"==b){var c={};for(var d in a)c[d]="",objExists(CPX.data.SWBonus[d])&&CPX.data.SWBonus[d].forEach(function(b){a[d]>b.score&&(c[d]=b)});return c}if("WS"==b){var c={};for(var d in a)c[d]="",CPX.data.WSBonus.forEach(function(b){a[d]>b.score&&(c[d]=b)});return c}if("GB"==b){var c={};for(var d in a)c[d]="",CPX.data.GBBonus.forEach(function(b){a[d]>b.score&&(c[d]=b)});return c}},CPX.OSRHero.GBSaves=function(a,b){var c=CPX.OSRHero.bonus(a,"GB"),d=15-c.Strength.b,e=15-c.Dexterity.b,f=15-c.Wisdom.b;return a.Constitution>a.Strength&&(d=15-c.Constitution.b),a.Intelligence>a.Dexterity&&(e=15-c.Intelligence.b),a.Charisma>a.Wisdom&&(f=15-c.Charisma.b),d-=b-1,e-=b-1,f-=b-1,{H:d,E:e,S:f}},Vue.component("c-osr-swbonuses",{props:["attr","rules"],template:'  <div class="center bar-bottom strong">Bonuses</div>  <div class="content-minor container-fluid">    <div class="row strong">      <div class="center col-xs-6">        <span class="strong">Bonus to Hit (STR): {{bonuses.Strength.tohit}}</span>      </div>      <div class="center col-xs-6">        <span class="strong">Damage Bonus (STR): {{bonuses.Strength.dmg}}</span>      </div>    </div>    <div class="row strong">      <div class="center col-xs-6">        <span class="strong">Open Doors (STR): {{bonuses.Strength.opend}}</span>      </div>      <div class="center col-xs-6">        <span class="strong">Carry Mod (STR): {{bonuses.Strength.carry}}</span>      </div>    </div>    <div class="row strong">      <div class="center col-xs-6">        <span class="strong">Missile Bonus (DEX): {{bonuses.Dexterity.tohit}}</span>      </div>      <div class="center col-xs-6">        <span class="strong">Armor Bonus (DEX): {{bonuses.Dexterity.AC}}</span>      </div>    </div>    <div class="row strong">      <div class="center col-xs-6">        <span class="strong">HP Bonus (CON): {{bonuses.Constitution.hpmod}}</span>      </div>      <div class="center col-xs-6">        <span class="strong">Raise Dead % (CON): {{bonuses.Constitution.raise}}</span>      </div>    </div>    <div class="row strong">      <div class="center col-xs-6">        <span class="strong"># Languages (INT): {{bonuses.Intelligence.maxlang}}</span>      </div>      <div class="center col-xs-6">        <span class="strong"># Hirelings (CHA): {{bonuses.Charisma.hirelings}}</span>      </div>    </div>  </div>  ',data:function(){return{bonuses:CPX.OSRHero.bonus(this.attr,"SW")}}}),Vue.component("c-osr-attributes",{props:["attr","rules"],template:'  <h4 class="header center">Attributes</h4>  <div class="content container-fluid">    <div class="row strong">      <div class="center col-xs-4" v-for="item in lineone">        <div>{{item}}</div>        <div>          <input class="form-control center" type="number" min="3" max="18" v-model="attr[item]">         </div>        <div v-if="modtxt.includes(rules)">{{bonus[item].text}}</div>      </div>    </div>    <div class="row strong">      <div class="center col-xs-4" v-for="item in linetwo">        <div>{{item}}</div>        <div>          <input class="form-control center" type="number" min="3" max="18" v-model="attr[item]">         </div>        <div v-if="modtxt.includes(rules)">{{bonus[item].text}}</div>      </div>    </div>  </div>  ',data:function(){return{lineone:["Strength","Dexterity","Constitution"],linetwo:["Intelligence","Wisdom","Charisma"],modtxt:["WS","GB"]}},computed:{bonus:function(){return CPX.OSRHero.bonus(this.attr,this.rules)}},methods:{}}),Vue.component("c-osr-gbsaves",{props:["saves"],template:'  <div class="bar-bottom strong center">Saves</div>  <div class="content container-fluid">    <div class="row strong">      <div class="center col-xs-4" v-for="id in saveid">        <div>{{id[1]}}</div>        <div>{{saves[id[0]]}}</div>      </div>    </div>  </div>  ',data:function(){return{saveid:[["H","Hardiness"],["E","Evasion"],["S","Spirit"]]}},computed:{},methods:{}}),Vue.component("c-che-list",{props:["list","name"],template:'  <h4 class="header center">{{name | capitalize}}     <button v-on:click="add" type="button" class="btn btn-xs">      <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>    </button>  </h4>  <div class="input-group" v-for="item in list" track-by="$index">    <input class="form-control center" type="text" v-model="item">    <span class="input-group-btn">      <button v-on:click="remove($index)" type="button" class="btn">        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>      </button>    </span>  </div>  ',methods:{add:function(a){this.list.push("")},remove:function(a){this.list.splice(a,1)}}}),Vue.component("c-che",{template:'  <div>    <h2 class="center">OSR Character Editor</h2>    <c-menubar id="OSR" v-bind:show="showmenu"></c-menubar>    <c-loadselect id="OSR" v-bind:list="allgens" v-bind:show="showlist.load"></c-loadselect>    <div class="content-minor">      <div class="input-group">        <span class="input-group-addon strong">Rules</span>        <select class="form-control center" v-model="rules">          <option v-for="rs in rulesets" v-bind:value="rs[0]">{{rs[1]}}</option>        </select>      </div>    </div>    <div class="content-minor">      <input class="form-control input-lg center" type="text" v-model="hero.name" placeholder="NAME">      <textarea class="form-control" type="textarea" v-model="hero.notes" placeholder="ADD NOTES"></textarea>      <div class="input-group">        <span class="input-group-addon strong">Race</span>        <input class="form-control center" type="text" v-model="hero.race">      </div>      <div class="input-group">        <span class="input-group-addon strong">Gender</span>        <input class="form-control center" type="text" v-model="hero.gender">        <span class="input-group-addon strong">Age</span>        <input class="form-control center" type="text" v-model="hero.age">        <span class="input-group-addon strong">Alignment</span>        <input class="form-control center" type="text" v-model="hero.AL">      </div>      <div class="input-group">        <span class="input-group-addon strong">XP</span>        <input class="form-control center" type="number" v-model="hero.XP">        <span class="input-group-addon strong">Level</span>        <input class="form-control center" type="number" v-model="hero.level">      </div>      <div class="input-group" v-if="rules!=`GB`">        <span class="input-group-addon strong">Class</span>        <input class="form-control center" type="text" v-model="hero.class">      </div>      <div class="input-group">        <span class="input-group-addon strong">HP</span>        <input class="form-control center" type="number" v-model="hero.HP">        <span class="input-group-addon strong">AC</span>        <input class="form-control center" type="text" v-model="hero.AC">      </div>    </div>    <c-osr-attributes v-bind:attr="hero.attributes" v-bind:rules="rules"></c-osr-attributes>    <c-osr-swbonuses v-bind:attr="hero.attributes" v-if="rules==`SW`"></c-osr-swbonuses>    <div v-if="rules==`GB`">      <c-osr-gbsaves v-bind:saves="gbsaves"></c-osr-gbsaves>      <c-che-list v-bind:list="hero.facts" name="Facts"></c-che-list>      <c-che-list v-bind:list="hero.words" name="Words"></c-che-list>      <c-che-list v-bind:list="hero.gifts" name="Gifts"></c-che-list>    </div>    <div v-else>      <c-che-list v-bind:list="hero.saves" name="Saving Throws"></c-che-list>      <c-che-list v-bind:list="hero.abilities" name="Class Abilities"></c-che-list>      <c-che-list v-bind:list="hero.spells" name="Spells"></c-che-list>    </div>    <c-che-list v-bind:list="hero.inventory" name="Inventory"></c-che-list>    <div class="input-group">      <span class="input-group-addon strong">Coin</span>      <input class="form-control center" type="text" v-model="hero.coin">    </div>  </div>  ',data:function(){return{vid:"OSR",loadids:["OSR","COH"],showmenu:{new:!0,load:!0,save:!0,close:!0},showlist:{load:!1,inventory:!1},rulesets:[["GN","Generic"],["SW","Swords & Wizardry"],["WS","WhiteStar"],["GB","Godbound"]],
rules:"GN",hero:{},allgens:{},newitem:""}},created:function(){CPX.vue.page.onCreated(this)},beforeDestroy:function(){CPX.vue.page.onBeforeDestroy(this)},computed:{gbsaves:function(){return CPX.OSRHero.GBSaves(this.hero.attributes,this.hero.level)}},methods:{save:function(){CPXSAVE.setItem(this.hero._id,this.hero).then(function(){}),objExists(this.allgens[this.hero._id])||Vue.set(this.allgens,this.hero._id,this.hero.name)},load:function(a){this.hero=a},new:function(){this.hero={},this.generate()},generate:function(){this.hero=objCopy(CPX.OSRHero.template),this.hero._id="COH-"+CPXC.string({length:27,pool:base62});var a=CPXC.shuffle([16,14,13,13,10,8]),b=0;for(var c in this.hero.attributes)this.hero.attributes[c]=a[b],b++},close:function(){CPX.vue.page.close(),this.hero={},this.allgens={}}}}),Vue.component("c-pnc-CPC",{props:["obj"],template:'  <div><c-pnc-generic v-bind:obj="obj" hname="Tags"></c-pnc-generic></div>  '}),Vue.component("c-pnc-generic",{props:["obj","hname"],template:'  <div class="content-minor">    <input class="form-control input-lg center" type="text" v-model="obj.name" placeholder="NAME">    <textarea class="form-control" type="textarea" v-model="obj.notes" placeholder="ADD NOTES"></textarea>    <div v-if="obj.class.length>0"><strong>Nature: </strong>{{nature | capitalize}}</div>    <div class="content-minor">      <div class="header strong center">{{hname}}         <button v-on:click="addtag" type="button" class="btn btn-xs">          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>        </button>      </div>      <div class="input-group" v-for="item in obj.special">        <input class="form-control center" type="text" v-model="item">        <span class="input-group-btn">          <button v-on:click="remove($index)" type="button" class="btn">            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>          </button>        </span>      </div>    </div>  </div>  ',computed:{nature:function(){return this.obj.class.slice(0).unique().join(", ")}},methods:{addtag:function(){this.obj.special.push("NEW")},remove:function(a){this.obj.special.splice(a,1)}}}),Vue.component("c-pnc-result",{props:["obj","allgens","idx"],template:'  <div class="box">    <h4 class="header center">{{obj.name | capitalize}}       <button v-on:click="remove" type="button" class="close"><span aria-hidden="true">&times;</span></button>    </h4>    <button v-on:click="save" type="button" class="btn btn-info btn-block">{{savetxt}}</button>    <component v-bind:is="type" v-bind:obj="obj" v-bind:idx="idx"></component>  </div>  ',computed:{savetxt:function(){if(objExists(this.obj))return"OSM"==this.obj._id.slice(0,3)?"Save as New Monster":"Save"},type:function(){return objExists(this.obj)?"c-pnc-"+this.obj._id.slice(0,3):"c-pnc-generic"}},methods:{save:function(){CPXSAVE.setItem(this.obj._id,this.obj).then(function(){}),objExists(this.allgens[this.obj._id])||Vue.set(this.allgens,this.obj._id,this.obj.name)},remove:function(){HUB.$emit("CPC-remove",this.idx)}}}),Vue.component("c-pnc",{template:'  <div>  <h2 class="center">People & Creature Generator</h2>  <c-menubar id="CPC" v-bind:show="showmenu"></c-menubar>  <c-loadselect id="CPC" v-bind:list="allgens" v-bind:show="showlist.load"></c-loadselect>  <div class="center content-minor" >    <div class="btn-group" role="group" aria-label="...">      <button v-on:click="DWshow(`true`)" type="button" class="btn btn-info">Generic</button>      <button v-on:click="DWshow(`false`)" type="button" class="btn btn-info">Dungeon World</button>      <button v-on:click="OSRshow" type="button" class="btn btn-info">OSR</button>    </div>    <div v-show="showlist.DWBshow" class="center content-minor">      <div class="input-group">        <span class="input-group-addon strong">Creature Type</span>        <select v-model="typeselect" class="form-control">          <option v-for="type in dwtypes" v-bind:value="type">{{type | capitalize}}</option>        </select>      </div>      <button v-on:click="DWB" type="button" class="btn btn-info">Generate</button>    </div>    <div v-show="showlist.OSRshow" class="center content-minor">      <div class="input-group">        <span class="input-group-addon strong">Generate          <input type="checkbox" v-model="setosrgen" aria-label="...">        </span>        <span class="input-group-addon strong">Creature Type</span>        <select v-model="typeselect" class="form-control">          <option v-for="type in osrtypes" v-bind:value="type">{{type | capitalize}}</option>        </select>      </div>      <div class="input-group">        <span class="input-group-addon strong">CL Min</span>        <input class="form-control center" type="number" min="1" v-model="CL.min">        <span class="input-group-addon strong">CL Max</span>        <input class="form-control center" type="number" min="1" v-model="CL.max">      </div>      <button v-on:click="OSR" type="button" class="btn btn-info">{{osrbtn}}</button>    </div>  </div>  <c-pnc-result v-for="being in current" v-bind:idx="$index" v-bind:obj="being" v-bind:allgens="allgens"></c-pnc-result>  </div>  ',data:function(){return{vid:"CPC",loadids:["CPC","DWB","OSM"],showmenu:{new:!0,load:!0,save:!1,close:!0},showlist:{load:!1,DWBshow:!1,OSRshow:!1},generic:!0,dwtypes:["random","beast","chimerae","human","humanoid","beastfolk","monster","undead","unnatural","dragon"],setosrgen:!1,osrbasic:["animal","bug","beast","humanoid","giant-kin","plant","undead","fey","construct","fiend","elemental","dragon"],osrgen:["dragon","elemental","undead","chimerae","bug"],typeselect:"",CL:{min:1,max:1},current:[],allgens:{}}},created:function(){CPX.vue.page.onCreated(this)},beforeDestroy:function(){CPX.vue.page.onBeforeDestroy(this)},computed:{osrbtn:function(){return this.setosrgen?"Generate":"Pull from DB"},osrtypes:function(){return this.setosrgen?this.osrgen:this.osrbasic}},methods:{load:function(a){var b=[a].concat(this.current);this.current=b},new:function(){this.current=[],this.showlist.DWBshow=!1,this.showlist.OSRshow=!1,this.osrbtn="Pull from DB"},OSRshow:function(){this.new(),this.showlist.OSRshow=!0},OSR:function(){if(this.new(),this.setosrgen)for(var a=0;a<5;a++)this.current.push(CPX.SW.monsterGen({seed:["OSM","-",CPXC.string({length:27,pool:base62})],type:this.typeselect,CL:this.CL}));else{var b={},c=this.CL.min;if(b.CL=c,this.CL.max-this.CL.min>0){c=[];for(var a=this.CL.min;a<=this.CL.max;a++)c.push(a);b.CL={$in:c}}b.type=this.typeselect;var d=this;CPX.SW.mdbFind(b).then(function(a){a.forEach(function(a){a.seed=["OSM","-",CPXC.string({length:27,pool:base62})],a._id=a.seed.join(""),a.n="",a.mods=[],d.current.push(a)})})}},DWshow:function(a){this.new(),this.generic=a,this.showlist.DWBshow=!this.showlist.DWBshow},DWB:function(){this.new();var a=this.typeselect,b="DWB";"true"==this.generic&&(b="CPC"),"random"==a&&(a="creature");for(var c=0;c<5;c++)this.current.push(CPX.DW.beingGen({type:a,seed:[b,"-",CPXC.string({length:27,pool:base62})]}))},generate:function(){},remove:function(a){this.current.splice(a,1)},close:function(){CPX.vue.page.close(),this.current=[],this.saveID="",this.allgens=[]}}}),CPX.PWD={},CPX.PWD.explore=["C","CD","CDI","CDI","CI","CI","TCD","TCDI","TCI","TUD","TUDI","TUI"],CPX.PWD.themes=[["rot/decay","torture/agony","madness","all is lost","noble sacrifice","savage fury","survival","criminal activity","secrets/treachery","tricks and traps","invasion/infestation","factions at war"],["creation/invention","*element","knowledge/learning","growth/expansion","deepening mystery","transformation/change","chaos and destruction","shadowy forces","forbidden knowledge","poison/disease","corruption/blight","impending disaster"],["scheming evil","divination/scrying","blasphemy","arcane research","occult forces","an ancient curse","mutation","the unquiet dead","bottomless hunger","incredible power","unspeakable horrors","holy war"]],CPX.PWD.dangers={core:[["trap","creature","entity"],[4,7,1]]},CPX.PWD.discovery={core:[["dressing","feature","find"],[3,6,3]]},CPX.PWD.find=function(a){var b={class:["find"],text:""},c=["trinkets","tools","weapons/armor","supplies/trade goods","coins/gems/jewelry","poisons/potions","adventurer/captive","magic item","scroll/book","magic weapon/armor","artifact"];return b.text=a.pickone(c),a.bool({likelihood:8})&&(b.text+=" & "+a.pickone(c)),b},CPX.PWD.entity=function(a){var b={class:["entity"],name:"",special:[]},c=["alien interloper","vermin lord","criminal mastermind","warlord","high priest","oracle","wizard/witch/alchemist","Monster lord","evil spirit/ghost","undead lord","demon","dark god"];return b.name=a.pickone(c),b},CPX.PWD.generate=function(a){var b=CPX.obj({seed:a},{name:"",notes:"",themes:[],areas:[]});b.RNG=new Chance(b.seed.join("")),b.scale=b.RNG.weighted([2,3,4,5],[3,6,2,1]);for(var c=[],d=-1,e=0;e<b.scale;e++)d=b.RNG.weighted([0,1,2],[5,4,3]),d=b.RNG.pickone(CPX.PWD.themes[d]),"*"==d[0]&&(d=d.slice(1),d=d+" ("+b.RNG.pickone(SPECIALNATURE[d])+")"),c.push(d);b.themes=c;var f=[];c.forEach(function(a){for(var c=0;c<b.scale;c++)f.push(a)}),f=b.RNG.shuffle(f);for(var g=0,h=[],i={};g<f.length;)i={theme:"",explored:!1,notes:"",unique:!1},i.ex=b.RNG.pickone(CPX.PWD.explore),i.ex.includes("T")&&(i.theme=f[g],g++),h.push(i);var j="";return h.forEach(function(a,c){special=[];for(var d=0;d<a.ex.length;d++)"I"==a.ex[d]?(j=b.RNG.weighted(CPX.PWD.discovery.core[0],CPX.PWD.discovery.core[1]),["feature","dressing"].includes(j)?h[c].notes+=CPXC.capitalize(j)+": nature of "+j+".\n":special.push(CPX.PWD.find(b.RNG))):"D"==a.ex[d]?(j=b.RNG.weighted(CPX.PWD.dangers.core[0],CPX.PWD.dangers.core[1]),"trap"==j?special.push(CPX.gen.trap(b.RNG)):"creature"==j?special.push(CPX.encounter(b.RNG)):special.push(CPX.PWD.entity(b.RNG))):"U"==a.ex[d]&&(h[c].unique=!0);h[c].special=special}),b.areas=h,b.RNG=null,delete b.RNG,b},Vue.component("c-pwd-textarea",{props:["object"],template:'  <div class="input-group">  <span class="input-group-addon" id="pwd-addon-i">{{object.class[0] | capitalize}}</span>  <textarea class="form-control" type="textarea" v-model="object.text" placeholder="INFO"></textarea>  </div>  '}),Vue.component("c-pwd-trap",{props:["object"],template:'  <div class="box bottom-pad">  <strong>Trap: </strong>{{object.text | capitalize}}  </div>  '}),Vue.component("c-pwd-find",{props:["object"],template:'  <div class="box bottom-pad">  <strong>Find: </strong>{{object.text | capitalize}}  </div>  '}),Vue.component("c-pwd-encounter",{props:["object"],template:'  <div class="box bottom-pad">  <div><strong>Encounter: </strong>{{object.name | capitalize}}</div>  <div v-if="object.special.length>0"><strong>Tags:</strong> {{object.special.unique().join(", ") | capitalize}}</div>  </div>  '}),Vue.component("c-pwd-area",{props:["A","i"],template:'  <div class="box center content bottom-pad pwd-area" v-bind:class="{ explored: A.explored }">  <div class="container-fluid">  <div class="row">  <div class="col-xs-6"><strong>Area {{i+1}} ({{txtUnique}})</strong></div>  <div class="col-xs-6"><input type="checkbox" v-model="A.explored" > Explored</div>  </div></div>  <div v-if="A.theme.length>0"><strong>Theme: </strong>{{A.theme | capitalize}}</div>  <component v-for="item in A.special" v-bind:is="pwdComponent(item.class[0])" v-bind:object="item"></component>  <div class="input-group">  <span class="input-group-addon" id="pwd-addon-i">Notes</span>  <textarea class="form-control" type="textarea" v-model="A.notes" placeholder="INFO"></textarea>  </div>  ',data:function(){return{textinputs:["feature","dressing"],encounter:["creature","people","entity"]}},computed:{txtUnique:function(){return this.A.unique?"Unique":"Common"}},methods:{pwdComponent:function(a){return this.textinputs.includes(a)?"c-pwd-textarea":this.encounter.includes(a)?"c-pwd-encounter":"c-pwd-"+a}}}),Vue.component("c-pwd",{template:'<div><h2 class="center">Perilous Wilds Dungeon Generator</h2><c-menubar id="PWD" v-bind:show="showmenu"></c-menubar><c-loadselect id="PWD" v-bind:list="allgens" v-bind:show="showlist.load"></c-loadselect><div class="content"><input class="form-control input-lg center" type="text" v-model="dungeon.name" v-on:input="onInput($event,`name`)" placeholder="NAME"><textarea class="form-control" type="textarea" v-model="dungeon.notes" v-on:input="onInput($event,`notes`)" placeholder="ADD NOTES"></textarea></div><h4 class="center bar-bottom">Themes</h4><div class="box center content bottom-pad" v-for="theme in dungeon.themes" track-by="$index">{{theme | capitalize}}</div><h4 class="center bar-bottom">Areas</h4><c-pwd-area v-for="area in dungeon.areas" v-bind:A="area" v-bind:i="$index"></c-pwd-area></div>',data:function(){return{vid:"PWD",showmenu:{new:!0,load:!0,save:!0,close:!0},showlist:{load:!1},dungeon:{},seed:"",loadgen:"",allgens:{}}},created:function(){CPX.vue.page.onCreated(this)},beforeDestroy:function(){CPX.vue.page.onBeforeDestroy(this)},methods:{save:function(){CPXSAVE.setItem(this.dungeon._id,this.dungeon).then(function(){}),objExists(this.allgens[this.dungeon._id])||Vue.set(this.allgens,this.dungeon._id,this.dungeon.name)},load:function(a){this.dungeon=a},new:function(){CPX.vue.page.newGen(this)},generate:function(){this.dungeon=CPX.PWD.generate(this.seed)},onInput:function(a,b){this.dungeon[b]=a.target.value},close:function(){CPX.vue.page.close(),this.seed="",this.dungeon={},this.allgens=[]}}});var SAG={trigger:["accusation","ambush","apparition","attack","conversation","destruction of object","diary","drawing","dream","encounter w/ NPC","escape","manuscript","map","message","item, exotic","item, mundane","oracle","plea","prophecy","public notice","reconnaissance","request","summoned by group","survivor","symbol","teleportation","transaction","trap","vision","warning"],goal:["aid other hero(es)","break curse affecting persons(s)","break curse affecting location","capture fugitive","deal with growing threat","defend location","deliver message/object","discover secret","escort/protect object(s)/person(s)","investigate location","locate/track down NPC (ally/hero/villain)","maintain peace","prevent invasion","rally ally(allies)/form allegiance(s)","reclaim lost location (regain control of)","release person/creature from burden","rescue/free captive(s)/slave","root out spies/minions of evil","search for knowledge/evidence","solve mystery - disappearance of object","solve mystery - disappearance of person(s)","solve mystery - murder/death","solve mystery - theft","solve mystery - phenomenon","stop conflict","stop impending devastation","stop plot from coming to fruition","stop raids on location","stop strange phenomenon affecting location","stop villain from amassing power"],obstacle:["acquire item","acquire knowledge","acquire key(s)/parts","awaken sleeping NPC","beat time limitation","clear name(s)/restore honor","compete in tournament","complete scavenger hunt","destroy item","escape location","explore location","find hidden/lost entrance","find hidden/lost location","find magic item/object","find way back to key location","fight for freedom","fix “broken” item","make long journey","make perilous journey","navigate labyrinth","navigate series of portals","pass series of tests","perform ritual","restore condition","race against antagonist(s)","reveal conspiracy","revive deceased NPC","solve puzzle/riddles","speak incantation","stop ritual"],location:["abbey","burial ground","catacombs","castle","cave/cavern","cemetery","chasm","citadel/keep","city","dungeon","farmstead","fortress","forest","hamlet","hill","island","mansion","mountain","outpost","palace","ruins","stronghold","temple","thorpe","tomb","tower","town","undercity","village","volcano"],feature:["altar","barracks","bridge","chapel","dais","door","fountain","garden","gallery","gate","plaza","laboratory","library","machine, clockwork","machine, magical","painting","pedestal","pit","pool","portal","sanctuary","sarcophagus","statue/idol","shrine","statuary","tapestry","throne","waterfall","well","workshop"],phenomena:["charm","darkness","decay","delusion","disease","disembodied voices","energy drain (hp)","energy drain (level)","fear","fever","fog/mist","fungi/mold/slime","hallucinations","hauntings","lights/colors","loss of memory","mania","monster plague","nightmares","noises/sounds","panic/paranoia","paralyzation","poisoning(s)","shadows","sickness","sightings of dead","sleep","strange vegetation","strange weather","transformation"],vreason:["amusement/boredom","avoid loss/pain","corruption","debt owed","derangement/insanity","destiny","domination/control","eliminate species","enslavement","envy","experimentation","fear","forgotten reason","guilt","greed","hatred","honor","immortality","ideology (strange)","loyalty (misplaced)","mass destruction","mischief","noble goal, extreme measures","power","pride/vanity","pure evil","revenge","self-preservation/survival","serves higher “boss”","utopia (at all costs)"],artifact:["amulet","bowl/brazier/censer","box","bracers","candle","codex/manual/tome","cube","cup","figurine/idol","flask","gem/jewel","grimoire","horn/instrument","mask","medallion","mirror","necklace","orb/sphere","pearl","potion","ring","rod","scarab","scepter","spellbook","staff","stone","talisman","wand","weapon"],theme:["blood","darkness/night","death","destiny","doom","freedom","forbidden","enchantment","evil","flame(s)","glory","gold","greed","innocence","immortality","judgement","justice","life","light/day","madness","mystery","power","rebirth","revenge","shadow","terror","treasure","vengeance","wonder","wrath"],NPC:["cleric","druid/cleric","fighter","paladin/fighter","ranger/dwarf","magic-user","illusionist/magic-user","thief","assassin/halfling","monk/elf","animal trainer","hermit","merchant","misc. NPC","pilgrim","sage","scribe","spy","smith","tradesman","king","queen","queen mother","noble","noble household","noble teacher","castle employee","soldier","slave","peasant"]};SAG.adventure=function(a){var b={seed:a.seed};b._id=b.seed.join(""),b.RNG=new Chance(b._id);var c=["theme","trigger","goal","obstacle","location","feature","phenomena","artifact","vreason","NPC"];return c.forEach(function(a){b[a]=b.RNG.pickone(SAG[a])}),b.RNG=null,delete b.RNG,b},Vue.component("c-fpg-SAG",{props:["A","idx"],template:'  <div class="content-minor">    <input class="form-control input-lg center" type="text" v-model="A.name" placeholder="NAME">    <textarea class="form-control" type="textarea" v-model="A.notes" placeholder="ADD NOTES"></textarea>    <div class="input-group ">      <span class="input-group-addon strong">Villain Reason</span>      <input class="center form-control" type="text" v-model="A.vreason">    </div>    <div v-for="key in keys" class="input-group ">      <span class="input-group-addon strong">{{key | capitalize}}</span>      <input class="center form-control" type="text" v-model="A[key]">    </div>  </div>  ',data:function(){return{keys:["theme","trigger","goal","obstacle","location","feature","phenomena","artifact","NPC"]}}}),CPX.sector=function(a){var b={seed:"undefined"==typeof a.seed?["CPS","-",CPXC.string({length:27,pool:base62})]:a.seed,parent:"undefined"==typeof a.parent?"":a.parent,class:"undefined"==typeof a.class?["sector"]:a.class,type:"undefined"==typeof a.type?"SWN":a.type,dsize:800,systems:{},mods:{},tokens:[],opts:a};b._id=b.seed.join(""),b.RNG=new Chance(b._id);for(var c=0;c<a.nsystem;c++)CPX.sector.addSystem(b);return objExists(a.jumplanes)&&CPX.sector.computeLanes(b),delete b.RNG,CPX.sector.applyMods(b),b},CPX.sector.addSystem=function(a){var b=["","-",CPXC.string({length:27,pool:base62})];objExists(a.RNG)&&(b[2]=a.RNG.string({length:27,pool:base62}));var c={};"CHS"==a.type?(b[0]="CHS",c=CHS.system(b)):"SWN"==a.type&&(b[0]="SWS",c=CPX.SWN.system(b)),c.parent=a._id,c.RNG=new Chance(c._id),c.name=c.RNG.word(),c.p={x:c.RNG.natural({min:0,max:2e4}),y:c.RNG.natural({min:0,max:2e4}),z:c.RNG.natural({min:0,max:2e4})},delete c.RNG,a.systems[c._id]=c},CPX.sector.applyMods=function(a){return new Promise(function(b,c){CPXSAVE.iterate(function(b,c,d){objExists(a.systems[c])&&(a.systems[c]=b)}).then(function(){b(!0)})})},CPX.sector.computeLanes=function(a){},CPX.sector.onClick=function(a){var b=a.target,c=b.data,d=CPXDB[c.map];d.VU.system=[d.systems[c.id]],console.log(c)},CPX.display.sector=function(a){CPX.display.clearActive(a),a.display={data:{}},a.display.data=a,a.display.canvas=$("#"+a._id+" canvas")[0],a.display.stage=new createjs.Stage(a.display.canvas),CPX.display.drawSector(a)},CPX.display.drawSector=function(a){var b=["map","siteMarkers"];b.forEach(function(b){objExists(a.display[b])&&a.display.stage.removeChild(a.display[b]),a.display[b]=new createjs.Container});for(var c={},d={},e="",f=a.dsize/2e4,g=0,h=0,i=a.dsize/10,j=0;j<10;j++)for(var k=0;k<10;k++)g=k*i,h=j*i,d=new createjs.Shape,d.graphics.setStrokeStyle(1).beginStroke("black").drawRect(g,h,i,i),a.display.map.addChild(d);for(var g in a.systems)c=a.systems[g],e=STARS[c.stars[0]][3],d=new createjs.Shape,d.data={id:c._id,map:a._id},d.graphics.setStrokeStyle(1).beginStroke("black").beginFill(e).drawCircle(c.p.x*f,c.p.y*f,5),d.addEventListener("click",CPX.sector.onClick),a.display.siteMarkers.addChild(d);b.forEach(function(b){a.display.stage.addChild(a.display[b])}),CPX.display.drawTokens(a),a.display.stage.update()},Vue.component("c-cps-system",{props:["S"],template:'  <div class="background-white">    <h4 class="header center">{{S.name | capitalize}}      <button v-on:click="remove" type="button" class="close">        <span aria-hidden="true">&times;</span>      </button>    </h4>    <div class="content-minor" v-show="minimal">      <div v-for="p in habitable">{{head(p) | capitalize}} ({{p.orbit}} AU)</div>    </div>    <div class="center">      <button v-on:click="edit" type="button" class="btn btn-info">Edit System</button>      <button v-on:click="save" type="button" class="btn btn-info" v-if="!minimal">Save</button>    </div>    <c-cpy-result v-bind:obj="S" v-if="!minimal" class="height-limit-min content-minor"></c-cpy-result>  </div>  ',data:function(){return{minimal:!0}},computed:{habitable:function(){var a=[],b=[],c=this;return this.S.planets.forEach(function(d,e){c.HZone(d)&&(a.push(d),b.push(e))}),a}},methods:{save:function(){CPXSAVE.setItem(this.S._id,this.S).then(function(){})},edit:function(){this.minimal=!this.minimal},HZone:function(a){return a.orbit>this.S.HZone.min&&a.orbit<this.S.HZone.max},head:function(a){return"planet"==a.class[0]?"gasgiant"==a.class[1]?PLANETS[a.class[2]].name+" ["+a.mass+"x Juptier]":a.class[1]:a.class[0]},remove:function(){HUB.$emit("CPS-remove",this.idx)}}}),Vue.component("c-cps",{template:'  <div class="slim center-div box">    <h2 class="center" v-show="!showlist.minimal">Sector Builder</h2>    <h4 class="center header" v-show="showlist.minimal">{{map.name}}</h4>    <div v-show="!showlist.minimal">      <c-menubar id="CPS" v-bind:show="showmenu"></c-menubar>      <c-loadselect id="CPS" v-bind:list="allgens" v-bind:show="showlist.load"></c-loadselect>      <div class="content-minor" v-show="showlist.make">        <div class="input-group strong">          <span class="input-group-addon strong" ># of Systems</span>          <input class="form-control center" type="number" v-model="nsystem" min="0">        </div>        <div class="center">          <button v-on:click="make(`CHS`)" type="button" class="btn btn-info strong">Gen Traveller</button>          <button v-on:click="make(`SWN`)" type="button" class="btn btn-info strong">Gen Stars Without Number</button>        </div>      </div>      <div class="content-minor" v-show="hasmap">        <input class="form-control center" type="text" v-model="map.name" placeholder="NAME">        <textarea class="form-control" type="textarea" v-model="map.notes" placeholder="Notes"></textarea>      </div>    </div>    <c-cps-system v-for="S in system" v-bind:S="S"></c-cps-system>  </div>  <div id="{{map._id}}" class="map active" v-bind:class="front" v-show="showlist.map">    <canvas width="{{bounds}}" height="{{bounds}}"></canvas></div>  <div class="footer box strong slim">    <div class="center">      <div class="btn-group" role="group" aria-label="...">        <button v-on:click="frontback" type="button" class="btn">{{front | capitalize}}</button>        <button v-on:click="zoom(-1)" type="button" class="btn">Z <span class="glyphicon glyphicon-minus" aria-hidden="true"></span></button>        <button v-on:click="zoom(1)" type="button" class="btn">Z <span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button>        <button v-on:click="showlist.minimal=!showlist.minimal" type="button" class="btn">          <span class="glyphicon" v-bind:class="isMinimal" aria-hidden="true"></span>Menu        </button>      </div>    </div>  <div>  ',data:function(){return{vid:"CPS",loadids:["CPS"],showmenu:{new:!0,load:!0,save:!0,close:!0},showlist:{load:!1,map:!0,make:!1,makegen:!1,minimal:!1},type:"",front:"back",nsystem:0,nruin:0,map:{},system:[],allgens:{}}},created:function(){CPX.vue.page.onCreated(this)},beforeDestroy:function(){CPX.vue.page.onBeforeDestroy(this)},computed:{bounds:function(){return this.hasmap?this.map.dsize:0},hasmap:function(){return objExists(this.map.systems)},isMinimal:function(){return this.showlist.minimal?"glyphicon-plus":"glyphicon-minus"}},methods:{remove:function(a){this.system=[]},mod:function(a){CPX.hexMap.pushMod(this.map,{query:a.query,type:a.type,data:a.data}),this.display()},frontback:function(){"front"==this.front?this.front="back":this.front="front"},zoom:function(a){600==this.map.dsize&&a==-1||(1==a?this.map.dsize+=50:this.map.dsize-=50,Vue.nextTick(this.display))},save:function(){var a=this,b=objCopy(this.map.opts);b._id=this.map._id,b.seed=this.map.seed,b.name=this.map.name,b.notes=this.map.notes,CPXSAVE.setItem(a.map._id,b).then(function(){}),objExists(a.allgens[a.map._id])||Vue.set(a.allgens,a.map._id,a.map.name)},load:function(a){this.new(),this.showlist.make=!1,this.map=CPX.sector(a),this.map.name=a.name,this.map.notes=a.notes,CPXDB[this.map._id]=this.map,this.map.VU=this,Vue.nextTick(this.display)},new:function(){this.showlist.make=!0,objExists(this.map.display)&&CPX.display.clearActive(this.map),this.map={}},make:function(a){this.new(),this.showlist.make=!1,this.map=CPX.sector({type:a,nsystem:this.nsystem,nruin:this.nruin}),CPXDB[this.map._id]=this.map,this.map.VU=this,Vue.nextTick(this.display)},display:function(){CPX.display.sector(this.map)},close:function(){CPX.vue.page.close(),this.map={},this.allgens={}}}}),SPECTRAL=["OBFKKMMMM","AFGKMMMMM","FGGKMMMMM","GGGKMMMMM","KKKKMMMMM","KMMMMMMMM","MMMMMMMMC","MMMMMMMST","MMMMMMCLY"],HABSTARS=[["A","F","G","H"],[1,4,7,1]],NSTARS=[1,1,1,1,2,2,2,2,3],STARPROB={cluster:[.081,.35],inner:[.0013,.197],basic:[.0051,.195],voids:[0,.189]},STARS={Habitable:"AFFFFGGGGGGGH",Major:"AFFGGGGHHHHHHHHHJJJJJ",Minor:"MMMMMMMMML",O:{nP:-6},B:{nP:-4},A:[[1.5,3.7,9,36],"White",259.3,"white"],F:[[.6,1.5,3.8,16],"Yellow White",310,"lightyellow"],G:[[.35,.8,2.5,10],"Yellow",386.5,"yellow"],H:[[.1,.25,.65,4],"Orange",438.3,"orange"],J:[[0,0,.01,.05],"White Dwarf",374,"white"],L:[[0,0,.01,.05],"Brown Dwarf",1550,"brown"],M:[[0,0,.01,.05],"Red Dwarf",820,"red"],S:{nP:-4}},JOVIAN={Supertorrid:[[27,46,49,52,61,62,92],["SP","TP","HP","VP","AB","SJ","JJ","TJ"]],Torrid:[[27,46,49,50,59,62,92],["SP","TP","HP","VP","AB","SJ","JJ","TJ"]],Temperate:[[27,32,46,49,52,53,62,92],["SP","TP","NP","HP","AP","VP","AB","JJ","TJ"]],Frigid:[[32,41,59,92],["GP","AB","SJ","JJ","TJ"]]},NONJOVIAN={Temperate:["SP","SP","SP","TP","TP","HP","VP","VP","AB","AB"],Frigid:["GP","GP","GP","GP","GP","AB","AB","SJ","SJ","SJ"]},PLANETS={SP:{name:"Selenian",mass:[.01,.03,.1],d:[[2800,4400,6400],["1d4","1d6","1d8"],400]},TP:{name:"Terran",mass:[.3,1],d:[[9600,12e3],["1d6","1d8"],400]},HP:{name:"Hadean",mass:[3],d:[[15200],["1d20"],400]},VP:{name:"Vestan",mass:[10],d:[[23200],["1d6"],400]},NP:{name:"Nerean",mass:[.3,1,1],d:[[9600,12e3],["1d6","1d8"],400]},AP:{name:"Aquarian",mass:[3],d:[[18400],["1d12"],800]},GP:{name:"Glacian",mass:[.01,.01,.01,.03,.03,.1,.1,.3],d:[[2800,5200,6800,10400],["1d6","1d4","1d10","1d8"],400]},AB:{name:"Asteroid Belt",mass:[.01,.01,.01,.03,.03,.1]},SJ:{name:"Subjovian",mass:[[.03,.1],[1,1]],d:[[27500,78e3],["1d20","1d20"],2250]},JJ:{name:"Jovian",mass:[[.3,1,3],[3,3,2]],d:[[12e4,138e3],["2d6-2","1d1"],2e3]},TJ:{name:"Transjovian",mass:[[10],[1]],d:[[14e4],["1d1"],0]}},Vue.component("c-cpy-result",{props:["obj"],template:'    <div>      <input class="form-control input-lg center" type="text" v-model="obj.name" placeholder="NAME">      <textarea class="form-control" type="textarea" v-model="obj.notes" placeholder="ADD NOTES"></textarea>      <h4 class="center bar-bottom">Stars</h4>      <c-chs-star v-for="s in obj.stars" v-bind:S="s" v-bind:i="$index"></c-chs-star>      <h4 class="center bar-bottom">Planets</h4>      <component v-bind:is="type" v-for="p in obj.planets" v-bind:HZ="obj.HZone" v-bind:P="p" v-bind:i="$index"></component>    </div>  ',computed:{type:function(){return this.obj._id.includes("CHS-")?"c-chs-planet":this.obj._id.includes("SWS-")?"c-swp-planet":void 0}}}),Vue.component("c-cpy",{template:'  <div>    <h2 class="center">Star System Generator</h2>    <c-menubar id="CPY" v-bind:show="showmenu"></c-menubar>    <c-loadselect id="CPY" v-bind:list="allgens" v-bind:show="showlist.load"></c-loadselect>    <div class="content-minor center">      <button v-on:click="CHS" type="button" class="btn btn-info">Traveller Gen</button>      <button v-on:click="SWN" type="button" class="btn btn-info">Stars Without Number Gen</button>    </div>    <c-cpy-result v-bind:obj="system" v-if="ready"></c-cpy-result>  </div>  ',data:function(){return{vid:"CPY",loadids:["CHS","SWS"],showmenu:{new:!0,load:!0,save:!0,close:!0},showlist:{load:!1},system:{},allgens:{}}},created:function(){CPX.vue.page.onCreated(this)},beforeDestroy:function(){CPX.vue.page.onBeforeDestroy(this)},computed:{ready:function(){return!!objExists(this.system.planets)},type:function(){return this.system._id.includes("CHS-")?"c-chs-planet":this.system._id.includes("SWS-")?"c-swp-planet":void 0}},methods:{save:function(){CPXSAVE.setItem(this.system._id,this.system).then(function(){}),objExists(this.allgens[this.system._id])||Vue.set(this.allgens,this.system._id,this.system.name)},load:function(a){this.system=a},new:function(){this.system={}},CHS:function(){this.new(),this.system=CHS.system(["CHS","-",CPXC.string({length:27,pool:base62})])},SWN:function(){this.new(),this.system=CPX.SWN.system(["SWS","-",CPXC.string({length:27,pool:base62})])},close:function(){CPX.vue.page.close(),this.system={},this.allgens={}}}}),start(initialize),CPX.data.SWEncounters={plains:[["Animals","Dragon","Flying","Humankind","Humanoids","Miscellaneous"],[24,11,13,25,13,14]],desert:[["Animals","Dragon","Flying","Humankind","Humanoids","Undead"],[20,10,20,20,20,10]],forest:[["Animals","Dragon","Flying","Humankind","Humanoids","Miscellaneous"],[12,11,13,25,19,20]],hills:[["Animals","Dragon","Flying","Humankind","Humanoids","Miscellaneous"],[12,26,13,12,25,11]],swamp:[["Animals","Dragon","Flying","Humankind","Humanoids","Miscellaneous","Swimming","Undead"],[10,10,10,10,10,10,10,30]],water:[["Swimming","Dragon","Flying","Merchant Galley","Merchant Ship","Pirate Galley","Pirate Ship","Warship (patrolling galley)","Warship (patrolling ship)"],[20,10,10,10,10,10,10,10,10]],Animals:["Ants","Beetles","Apes","Bears","Boars","Centipedes","Scorpions","Frogs","Lions","great cat","Lizards","Snakes","Spiders","Wolf","great dog"],Dragon:[["Basilisk"],["Black Dragon","1d4"],["Black Dragon","2d4"],["Black Dragon","1d8"],["Blue Dragon","1d4"],["Blue Dragon","2d4"],["Blue Dragon","1d8"],["Cockatrice"],["Green Dragon","1d4"],["Green Dragon","2d4"],["Green Dragon","1d8"],["Hydra"],["Red Dragon","1d4"],["Red Dragon","2d4"],["Red Dragon","1d8"],["Wyvern"]],Flying:["Chimerae","Djinni","efreet","Gargoyles","Griffons","Harpies","Hippogriffs","Manticores","Normal Birds (flock)","Ogre Mage","Pegasi","Rocs","Stirges","Giant bat","Wyverns"],
Humankind:["Adventurers","Bandits","Berserkers","Brigands","Caravan","Cavemen","Dwarves","Elves","Patrol","Pilgrims","Priests of Chaos","Wizard"],Miscellaneous:["Cockatrice","Medusa","Minotaurs","Owlbears","Purple Worm","Treant","Werebears","Wereboars","Weretigers","Werewolves"],Swimming:["Crocodile, giant","Dragon Turtle","Fish, giant","Leeches, giant","Mermen","Nixie","Octopus, giant","Sea Monster","Naga, water","Sea Serpent","Squid, giant"],Undead:["Ghouls","Mummies","Skeletons","Spectres","Vampires","Wights","Wraiths","Zombies"],Humanoids:{plains:["Kobolds","Goblins","Orcs","Hobgoblins","Gnolls","Ogres","Trolls","Giant, Hill","Giant, Cloud","Gnolls","Gnolls","Ogres","Trolls","Bugbears","Kobolds","Goblins","Giant, Hill","Giant, Hill","Gnolls","Ogres"],forest:["Kobolds","Goblins","Orcs","Hobgoblins","Gnolls","Ogres","Trolls","Giant, Hill","Elves","Bugbears","Kobolds","Goblins","Orcs","Hobgoblins","Gnolls","Ogres","Trolls","Giant, Hill","Elves","Bugbears"],swamp:["Kobolds","Goblins","Orcs","Hobgoblins","Gnolls","Ogres","Trolls","Giant, Hill","Giant, CLoud","Bugbears","Lizardmen","Trolls","Lizardmen","Lizardmen","Ogres","Goblins","Kobolds","Trolls","Orcs","Ogres"],hills:["Kobolds","Goblins","Orcs","Hobgoblins","Gnolls","Ogres","Trolls","Giant, Hill","Giant, Cloud","Bugbears","Giant, Fire","Giant, Stone","Giant, Storm","Giant, Frost","Goblins","Orcs","Orcs","Trolls","Ogres","Giant, Hill"],desert:["Kobolds","Goblins","Orcs","Hobgoblins","Gnolls","Ogres","Trolls","Giant, Hill","Giant, Cloud","Bugbears","Giant, Fire","Giant, Stone","Gnolls","Gnolls","Ogres","Gnolls","Trolls","Ogres","Trolls","Gnolls"]}},CPX.data.SWEncounters.mountains=CPX.data.SWEncounters.hills,CPX.data.SWEncounters.Humanoids.mountains=CPX.data.SWEncounters.Humanoids.hills,CPX.SW.encounters=function(a){var b=CPX.data.SWEncounters[a.terrain],c=CPXC.weighted(b[0],b[1]),d="";return d="Humanoids"==c?CPXC.pickone(CPX.data.SWEncounters.Humanoids[a.terrain]):CPXC.pickone(CPX.data.SWEncounters[c]),"Dragon"==c&&(d=d.length>1?d[0]+" age "+CPXC.diceSum(d[1]):d[0]),d},CPX.data.SWMonsters={saves:[18,17,16,14,13,12,11,9,8,6,5,4,3],xp:[5,10,15,30,60,120,240,400,600,800,1100,1400,1700,2e3,2300,2600,2900],xpbonus:300,physicalfeatures:[["heavily armored"],["flying","winged"],["multiple heads","headless"],["many eyes","one eye"],["many limbs","tail"],["tentacles"],["oddity"]],elementatk:["air","earth","fire","light","water","ice","lightning","poison","disease","life","death","telepathy"],element:CPX.data.element,magic:CPX.data.magic,animal:[["land","air","water"],[7,3,2]],land:["snake","lizard","rat","weasel","boar","dog","fox","wolf","cat","lion","panther","deer","horse","ox","rhino","bear","gorilla","ape","mammoth","dinosaur"],air:["chicken","duck","goose","jay","parrot","gull","pelican","crane","raven","falcon","eagle","owl","condor","pteranodon"],water:["jellyfish","clam","eel","frog","fish","crab","lobster","turtle","alligator","shark","squid","octopus","whale"],bug:[["bugland","bugair"],[2,1]],bugland:["termite","tick","snail","slug","worm","ant","centipede","scorpion"],bugair:["mosquito","firefly","locust","dragonfly","moth","bee","wasp","praying mantis"],beast:["Ankheg","Basilisk","Behir","Blink Dog","Bog Creeper","Bulette","Bunyip","Carrion Creeper","Catoblepas","Cave Fisher","Chimera","Cockatrice","Darkmantle","Decapus","Dwelver","Fetch","Flail Snail","Froghemoth","Gibbering Mouther","Gloomwing","Gorgon","Gorilla Bear","Grick","Griffon","Grue","Hell Hound","Hippocampus","Hippogriff","Hydra","Kraken","Leucrota","Manticore","Mimic","Nightmare","Nightshade","Ogrillon","Otyugh","Owlbear","Pegasus","Peryton","Piercer","Purple Worm","Razor Wings","Remorhaz","Roc","Rust Monster","Sea Monster","Sea Serpent","Shadow Mastiff","Shambling Mound","Shocker Lizard","Giant Phase Spider","Stirge","Tendriculos","Unicorn","Winter Wolf","Worg","Wyvern","Yeti"],construct:["animated object","Clay Golem","Flesh Golem","Ice Golem","Iron Golem","Stone Golem","Stone Guardian Golem","Wax Golem","Iron Cobra"],fey:["Boggart","Brownie","Dryad","Gremlin","Grimm","Korred","Nixie","Nymph","Pixie","Satyr","Will-o-the-wisp"],fiend:["Hag","Daemon","Demon","Devil","Imp","Mephit"],"giant-kin":["Athatch","Ettin","Cave Giant","Cloud Giant","Fire Giant","Frost Giant","Hill Giant","Sand Giant","Sea Giant","Stone Giant","Storm Giant","Volcano Giant","Wood Giant","Ogre","Swamp Ogre","Ogre Mage","Ogren","Titan","Troll"],plant:["Assassin Vine","Black Pudding","Violet Fungus","Gas Spore","Gelatinous Cube","Green Slime","Grey Ooze","Brown Mold","Yellow Mold","Ochre Jelly","Crystal Ooze","Shrieker"],unnatural:["Aboleth","Aranea","Beast of Chaos","Cloaker","Cerebral Stalker","Disenchanter","Eye of the Deep","Giant Phase Spider","Doppelganger","Roper","Xorn","Retriever","Couatl","Ki-rin","Guardian Naga","Spirit Naga","Water Naga","Vargouille","Lamia","Lammasu"],lycanthrope:["Werebear","Wereboar","Wererat","Weretiger","Wereweasel","Werewolf"],humanoid:["Azer","Bugbear","Centaur","Churr","Crabman","Drider","Drow","Duergar","Dwarf","Elf","Ettercap","Fungoid","Gargoyle","Margoyle","Gnoll","Goblin","Grippli","Half-Ogre","Harpy","Hobgoblin","Jackalwere","Kobold","Medusa","Merman","Minotaur","Mongrelman","Mushroom-Men","Ophidian","Orc","Rakshasa","Ratling","Sahuagin","Salamander","Sorcerer Ox","Triton","Troglodyte"]},CPX.SW.monsterGen=function(a){var b={min:Number(a.CL.min),max:Number(a.CL.max)},c=CPXC.natural(b),d=CPX.SW[a.type](c);return d.seed=a.seed,d._id=a.seed.join(""),d.type=d.class.join(", "),d},CPX.SW.MInit=function(a){var b={name:"",class:[],n:"solitary",size:"standard",move:"12",AL:"N",HD:1,CL:1,save:17,notes:"",special:"",mods:[]};b.AAC=CPXC.weighted([11,13,15,17],[1,5,5,1]),b.attacks="Strike ("+CPX.SW.attackGen(a.CL,1)+")";for(var c in a)b[c]=a[c];return b},CPX.SW.number=function(){return CPXC.weighted(["solitary","group","horde"],[4,5,3])},CPX.SW.size=function(a){var b=CPXC.weighted(["tiny","small","standard"],[1,2,6]);return a>5?b=CPXC.weighted(["tiny","small","standard","large","huge"],[1,2,6,2,1]):a>2&&(b=CPXC.weighted(["tiny","small","standard","large"],[1,2,6,2])),b},CPX.SW.animalGen=function(a){a="undefined"==typeof a?{}:a;for(var b="undefined"==typeof a.weight?25:a.weight,c="undefined"==typeof a.n?1:a.n,d=CPX.data.SWMonsters,e="",f=[],g=!1,h=0;h<c;h++)100==b||b>0&&CPXC.bool({likeliehood:b})?(e=CPXC.weighted(d.bug[0],d.bug[1]),f.push(CPXC.pickone(d[e]))):(e=CPXC.weighted(d.animal[0],d.animal[1]),f.push(CPXC.pickone(d[e]))),e.includes("air")&&(g=!0);return[f,g]},CPX.SW.attackGen=function(a,b,c){c="undefined"==typeof c?CPXC.natural({min:0,max:2}):c;var d=[["1d3","1d4","1d6"],["1d6","1d8","1d10"],["1d10","2d6","2d8-1"],["2d8","3d6","2d10"]],e=Math.floor(a/5)+1,f=[];return 4==e&&(e=3),1==b?f[0]=d[e][c]:2==b?(0==c?(e--,c=2):c--,f[0]=d[e][c]):3==b?(0==c?(e--,c=2):c--,f[1]=d[e][c],0==e?f[0]=d[e][0]:f[0]=d[e-1][c]):4==b&&(f[1]=d[e][c],f[0]=d[e-1][c],1==e&&(f[0]=d[e][c])),f},CPX.SW.modCheck=function(a,b){var c={};if(b.forEach(function(b){a.CL>b.CL&&(c=b)}),objExists(c.modset)&&(a.mods=c.modset),objExists(c.modpush)&&(a.mods=a.mods.concat(c.modpush)),objExists(c.modpickn))for(var d=-1,e=0;e<c.modpickn;e++)d=CPXC.natural({min:0,max:c.modpick.length-1}),Array.isArray(c.modpick[d])?a.mods=a.mods.concat(c.modpick[d]):a.mods.push(c.modpick[d]),c.modpick.splice(d,1)},CPX.SW.dragon=function(a){var b=CPXC.pickone(["classic","elemental","beast"]),c=(CPX.powerArray(["element","dragon"]),CPX.data.quickpowers),d=CPXC.pickone(["cone","line","cloud"]),e=CPX.SW.MInit({CL:a,size:"large",move:"9",class:["dragon"],HD:a,mods:[c.fly(0),c.armor(0)],element:CPX.gen.element(1),magic:CPX.gen.magic(2),attacks:CPX.SW.attackGen(a,3)}),f=e.element,g=e.magic;if("classic"==b)e.name="dragon";else if("elemental"==b)e.name=e.element+" dragon";else{var h=CPX.SW.animalGen();e.name=h[0][0]+" dragon"}return CPX.SW.modCheck(e,[{CL:3,modset:[c.fly(0),c.armor(0),c.BW(1,f,d)]},{CL:6,modset:[],modpickn:1,modpick:[[c.BW(1,f,d),c.MU(1,g),c.armor(1),c.fly(0)],[c.BW(2,f,d),c.armor(1),c.fly(0)],[c.fly(1),c.armor(1),c.BW(1,f,d)]]},{CL:9,modset:[c.fly(1)],modpickn:1,modpick:[[c.BW(2,f,d),c.armor(1)],[c.BW(1,f,d),c.MU(1,g),c.armor(1)],[c.BW(1,f,d),c.armor(2)]]}]),e.HD>5&&(e.size="huge"),e.attacks="2 claws ("+e.attacks[0]+"), bite ("+e.attacks[1]+")",CPX.SW.modFinal(e),e},CPX.SW.undead=function(a){var b=["Allip","Demiurge","Ghast","Ghoul","Haunt","Necrophidius","Shadow","Skeleton","Spectre","Wight","Sea-Wight","Wraith","Zombie"];a>3&&b.push("Mohrg","Mummy","Vampire","Banshee","Ghost"),a>7&&b.push("Lich"),a>10&&b.push("Demi-Lich","Dracolich");var c=CPX.SW.MInit({name:CPXC.pickone(b),CL:a,class:["undead"],HD:a}),d=CPX.powerArray(["undead","combat"]),e=CPX.data.quickpowers;return d.splice(d.indexOf("undead"),1),/lich/i.test(c.name)?(c.magic=["necromancy"].concat(CPX.gen.magic(1)),CPX.SW.modCheck(c,[{CL:0,modset:[e.undead(),e.MU(2,c.magic),{id:CPXC.pickone(d),rank:1}]},{CL:13,modset:[e.undead(),e.armor(1),e.MU(3,c.magic),{id:CPXC.pickone(d),rank:1}]}])):CPX.SW.modCheck(c,[{CL:0,modset:[e.undead()]},{CL:3,modset:[e.undead(),{id:CPXC.pickone(d),rank:1}]},{CL:6,modset:[e.undead()],modpickn:1,modpick:[{id:CPXC.pickone(d),rank:1},[{id:CPXC.pickone(d),rank:1},{id:CPXC.pickone(d),rank:1}],{id:CPXC.pickone(d),rank:2}]},{CL:9,modset:[e.undead(),e.armor(1)],modpickn:1,modpick:[{id:CPXC.pickone(d),rank:1},[{id:CPXC.pickone(d),rank:1},{id:CPXC.pickone(d),rank:1}],{id:CPXC.pickone(d),rank:2}]}]),["Haunt","Shadow","Spectre","Banshee","Ghost"].includes(c.name)&&(c.mods.push(e.fly(0)),CPXC.bool()&&c.mods.push({id:"intangible",rank:1})),CPXC.bool()&&(c.attacks="2 strike ("+CPX.SW.attackGen(a,2)+")"),CPX.SW.modFinal(c),c},CPX.SW.fiend=function(){var a=CPX.SW.beastfolk();return a.class=["fiend"],a},CPX.SW.elemental=function(a){var b=CPX.SW.MInit({CL:a,class:["elemental"],HD:a,element:CPX.gen.element(1)}),c=CPXC.pickone(["human","humanoid","animal","bug","chimerae"]);["human","humanoid"].includes(c)?b.notes="Humanoid":["animal","bug"].includes(c)?(c=CPX.SW.animalGen({weight:50}),b.notes=c[0]+" like"):(c=CPX.SW.animalGen({n:2}),b.notes=c[0].join("-")+" like");var d=CPX.powerArray(["combat"]),e=CPX.data.quickpowers,f=CPX.elementType(b.element[0]),d=d.concat(CPX.powerArray(["e"]));CPX.SW.modCheck(b,[{CL:0,modset:[e.blast(0,b.element)]},{CL:4,modset:[e.blast(0,b.element),e.immune(f)]},{CL:7,modset:[e.immune(f)],modpickn:1,modpick:[e.blast(0,b.element),e.aura(0,b.element),e.blast(1,b.element),[e.blast(0,b.element),e.armor(1)],e.aura(1,b.element)]}]),["air","electricity","fire"].includes(f)?(b.CL<=3?b.mods.push(e.fly(0)):b.mods.push(e.fly(1)),"air"==f&&b.CL>6&&CPXC.bool()&&b.mods.push({id:"gasform",rank:1})):"water"==f&&(b.CL<7?b.mods.push({id:"swim",rank:1}):b.mods.push({id:"swim",rank:2}),b.CL>6&&CPXC.bool()&&b.mods.push({id:"liquid",rank:1})),b.name=b.element+" elemental";var g=CPXC.natural({min:1,max:2}),h=CPX.SW.attackGen(a,g);return 1==g?b.attacks="Slam ("+h[0]+")":b.attacks="2 slams ("+h[0]+")",CPX.SW.modFinal(b),b},CPX.SW.construct=function(a){var b=CPX.SW.MInit({CL:a,move:"9",class:["construct"],size:CPX.SW.size(a),HD:a}),c=CPXC.pickone(["human","humanoid","animal","bug","chimerae"]);["human","humanoid"].includes(c)?b.notes="Humanoid":["animal","bug"].includes(c)?(c=CPX.SW.animalGen({weight:50}),b.notes=c[0]+" like"):(c=CPX.SW.animalGen({n:2}),b.notes=c[0].join("-")+" like");var d=["iron","stone","wax","bone","wood","ice"];b.name=CPXC.pickone(d)+" golem";var e=CPXC.natural({min:1,max:2}),f=CPX.SW.attackGen(a,e);return 1==e?b.attacks="Slam ("+f[0]+")":b.attacks="2 slams ("+f[0]+")",CPX.SW.modFinal(b),b},CPX.SW["giant-kin"]=function(){var a={special:[],notes:""};if(CPXC.bool())a.name=CPXC.pickone(CPX.data.SWMonsters["giant-kin"]);else{var b=CPXC.pickone(CPX.data.SWMonsters.element);b=CPXC.pickone(b),a.name=b+" giant"}return a.class=["giant-kin"],a},CPX.SW.beastfolk=function(a){var b=CPX.SW.MInit({CL:a,class:["humanoid"],HD:a,size:CPX.SW.size(a),n:CPX.SW.number()}),c=CPX.SW.animalGen({weight:25});return b.name=c[0][0]+"-folk",b},CPX.SW.humanoid=function(){var a={name:CPXC.pickone(CPX.data.SWMonsters.humanoid),class:["humanoid"],special:[],notes:"",prof:"",HD:CPXC.natural({min:1,max:2})};return a},CPX.SW.human=function(){var a={name:"Human",class:["human"],special:[],notes:"",prof:"",size:"standard",HD:1};return a},CPX.SW.animal=function(a){var b=CPX.SW.animalGen({weight:0}),c=CPX.SW.MInit({CL:a,class:["animal"],HD:a,size:CPX.SW.size(a),n:CPX.SW.number(),name:b[0][0]});return c},CPX.SW.bug=function(a){var b=CPX.SW.MInit({CL:a,class:["bug"],HD:a}),c=CPX.SW.animalGen({weight:100});b.name=c[0];var d=CPX.powerArray(["combat","bug"]);return CPX.data.quickpowers,CPX.SW.modCheck(b,[{CL:0,modpickn:1,modpick:[{id:CPXC.pickone(d),rank:0},{id:CPXC.pickone(d),rank:1}]},{CL:5,modpickn:1,modpick:[{id:CPXC.pickone(d),rank:1},{id:CPXC.pickone(d),rank:2}]}]),CPX.SW.modFinal(b),b},CPX.SW.beast=function(){var a={};return CPXC.bool()?a={name:CPXC.pickone(CPX.data.SWMonsters.beast),special:[],notes:""}:CPXC.bool()?a=CPX.SW.chimerae(2):(type=CPXC.pickone(["animal","bug"]),a=CPX.SW[type]()),a.class=["beast"],CPX.SW.basicMonster(a),a},CPX.SW.chimerae=function(a,b){b="undefined"==typeof b?CPXC.natural({min:2,max:3}):b;var c=CPX.SW.MInit({CL:a,class:["beast"],HD:a,element:CPX.gen.element(1)}),d=CPX.SW.animalGen({n:b,weight:35});c.name=d[0].join("-")+" chimerae";var f=CPXC.pickone(CPX.data.SWMonsters.physicalfeatures);f=CPXC.pickone(f),"oddity"==f&&(f=CPX.DW.special("oddity").join(", ")),c.notes=f;var g=CPX.powerArray(["combat","bug"]),h=CPX.data.quickpowers;e=CPX.elementType(c.element[0]);var i=[],j=[],k=[h.blast(0,c.element),h.aura(0,c.element),h.BW(0,c.element,"cone"),h.immune(c.element),{id:CPXC.pickone(g),rank:1},h.blast(1,c.element),[h.blast(0,c.element),h.armor(1)],h.aura(1,c.element),[h.BW(1,c.element,"cone"),h.armor(0)],h.BW(2,c.element,"cone"),h.armor(2),{id:CPXC.pickone(g),rank:2}];CPXC.bool()&&i.push(CPXC.pickone([h.armor(0),{id:"resist",rank:1,element:e},{id:CPXC.pickone(g),rank:0}])),d[1]&&(i.push(h.fly(0)),CPXC.bool()?j.push(h.fly(0)):j.push(h.fly(1))),CPX.SW.modCheck(c,[{CL:0,modset:i},{CL:4,modset:j,modpickn:1,modpick:k}]);var l=CPXC.natural({min:2,max:3}),m=CPX.SW.attackGen(a,l);return 2==l?c.attacks="2 claws ("+m[0]+")":c.attacks="2 claws ("+m[0]+") & Bite ("+m[1]+")",CPX.SW.modFinal(c),c},CPX.SW.unnatural=function(){},CPX.SW.modFinal=function(a){var b={},c=0;if(a.mods.forEach(function(d,e){b=CPX.data.powers.find(function(a){return a.id==d.id}),a.mods[e]=[d,CPX.powerText(d)],a.HD-=d.rank,0==d.rank&&c++,"armor"==d.id&&(a.AAC=b.AAC[d.rank])}),c>3){var d=Math.floor(c/3);a.HD-=d,c-=3*d}c>0&&c%3==2&&a.HD--;var e=a.HD;if(a.HD<0&&(e=0),a.HD>12?a.save=3:a.save=DATA.SWMonsters.saves[e],a.HD<1){a.HD<-1&&(a.HD=-1);var f=["1d6 hp","1d4 hp"];a.HD=f[Math.abs(a.HD)]}},CPX.SW.mdbFind=function(a){return new Promise(function(b,c){CPX.SW.monsterdb.find(a,function(a,c){b(c)})})},CPX.SW.XPcalc=function(a){if("A"==a)return CPX.data.SWMonsters.xp[0];if("B"==a)return CPX.data.SWMonsters.xp[1];if(a=Number(a),a<16)return CPX.data.SWMonsters.xp[a+1];var b=(a-15)*CPX.data.SWMonsters.xpbonus;return CPX.data.SWMonsters.xp[16]+b},Vue.component("c-pnc-osm-short",{props:["obj"],template:'  <div class="content-minor"> <strong>{{obj.name | capitalize}}</strong>     <div>HD: {{obj.HD}}; AC {{DAC}} [{{obj.AAC}}]; Atk {{obj.attacks}}; Move {{obj.move}};     Save: {{obj.save}}; AL: {{obj.AL}}; CL/XP {{obj.CL}}/{{XP}}; Special: {{obj.special}}    </div>  </div>  ',computed:{DAC:function(){return 9-(Number(this.obj.AAC)-10)},XP:function(){return CPX.SW.XPcalc(this.obj.CL)}}}),Vue.component("c-pnc-OSM",{props:["obj"],template:'  <div class="content-minor">    <input class="form-control input-lg center" type="text" v-model="obj.name" placeholder="NAME">    <textarea class="form-control" type="textarea" v-model="obj.notes" placeholder="ADD NOTES"></textarea>    <div class="strong">Nature: {{nature | capitalize}}</div>    <div class="input-group" v-if="obj.n.length>0">       <span class="input-group-addon strong"># Appearing</span>       <select v-model="obj.n" class="form-control">         <option v-for="nid in n" v-bind:value="nid">{{nid}}</option>       </select>       <span class="input-group-addon strong">Size</span>       <select v-model="obj.size" class="form-control">         <option v-for="s in sizes" v-bind:value="s">{{s}}</option>       </select>    </div>    <div class="input-group">       <span class="input-group-addon strong">Alignment</span>       <input class="form-control center" type="text" v-model="obj.AL">       <span class="input-group-addon strong">CL</span>       <input class="form-control center" type="number" v-model="obj.CL">       <span class="input-group-addon strong">XP</span>       <span class="input-group-addon">{{XP}}</span>    </div>    <div class="input-group">       <span class="input-group-addon strong">HD</span>       <input class="form-control center" type="text" v-model="obj.HD">       <span class="input-group-addon strong">AAC</span>       <input class="form-control center" type="number" v-model="obj.AAC">       <span class="input-group-addon strong">DAC</span>       <span class="input-group-addon">{{DAC}}</span>    </div>    <div class="input-group">       <span class="input-group-addon strong">Move</span>       <input class="form-control center" type="text" v-model="obj.move">       <span class="input-group-addon strong">Save</span>       <input class="form-control center" type="number" v-model="obj.save">    </div>    <div class="input-group">       <span class="input-group-addon strong">Attacks</span>       <input class="form-control center" type="text" v-model="obj.attacks">    </div>    <div class="input-group" v-if="obj.special.length>0">       <span class="input-group-addon strong">Special</span>       <input class="form-control center" type="text" v-model="obj.special">    </div>    <div class="center" v-if="obj.mods.length>0">      <div class="header strong center">Mods         <button v-on:click="addmod" type="button" class="btn btn-xs">          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>        </button>      </div>      <div class="input-group" v-for="item in obj.mods">        <input class="form-control center" type="text" v-model="item[1]">        <span class="input-group-btn">          <button v-on:click="remove($index)" type="button" class="btn">            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>          </button>        </span>      </div>    </div>    <c-pnc-osm-short v-bind:obj="obj"></c-pnc-osm-short>  </div>  ',data:function(){return{sizes:["tiny","small","standard","large","huge"],n:["solitary","group","horde"]}},computed:{nature:function(){var a=[this.obj.type];return objExists(this.obj.aspect)&&(a=a.concat(this.obj.aspect)),objExists(this.obj.element)&&(a=a.concat(this.obj.element)),objExists(this.obj.magic)&&(a=a.concat(this.obj.magic)),a.join(", ")},DAC:function(){return 9-(Number(this.obj.AAC)-10)},XP:function(){return CPX.SW.XPcalc(this.obj.CL)}},methods:{addmod:function(){this.obj.special.push("NEW")},remove:function(a){this.obj.mods.splice(a,1)}}}),CPX.SW.monsterdb=new Nedb,CPX.SW.monsterdb.persistence.setAutocompactionInterval(12e4),CPX.SW.mdbBuild=function(){return new Promise(function(a,b){var c={4:{Num:4,"Catalog Name":"Aboleth",name:"Aboleth",type:"beast",HD:"9",AAC:16,attacks:"4 tentacles (1d6 + slime)",move:"9 (Swim 12)",save:6,AL:"C",CL:12,special:"Charm monster (3/day), Phantasmal force (3/day), Mucus cloud in water (save or cannot breathe air for 3 hours), special disease upon successful hit (save or must be immersed in water every hour)"},10:{Num:10,"Catalog Name":"Aerial Servant",name:"Aerial Servant",type:"elemental",HD:"16",AAC:16,attacks:"slam (4d4)",move:"24 (Fly 24)",save:3,AL:"N",CL:20,special:"Throttle, invisibility, only harmed by magic weapons, wind blast"},15:{Num:15,"Catalog Name":"Allip",name:"Allip",type:"undead",HD:"4",AAC:14,attacks:"1 strike (no damage, 1d4 points of wisdom lost)",move:"0",save:13,AL:"C",CL:7,special:"drains wisdom, hypnosis"},30:{Num:30,"Catalog Name":"Animated Object, Chair",name:"Animated Chair",type:"construct",HD:"1",AAC:11,attacks:"1 bump (save or fall)",move:"12",save:18,AL:"N",CL:1,special:"Knocks over"},31:{Num:31,"Catalog Name":"Ankheg",name:"Ankheg",type:"beast",HD:"3",AAC:17,attacks:"1 bite (3d6)",move:"12 (Burrow 6)",save:14,AL:"N",CL:4,special:"Spits acid 5d6 (1/day, save for half), AAC 15 underside"},37:{Num:37,"Catalog Name":"Ant, Giant (Worker)",name:"Giant Ant (Worker)",type:"bug",HD:"2",AAC:16,attacks:"bite (1d6)",move:"18",save:16,AL:"N",CL:2,special:"None"},38:{Num:38,"Catalog Name":"Ant, Giant (Warrior)",name:"Giant Ant (Warrior)",type:"bug",HD:"3",AAC:16,attacks:"bite (1d6 + poison)",move:"18",save:14,AL:"N",CL:4,special:"Poison 2d6 (save for 1d4)"},39:{Num:39,"Catalog Name":"Ant, Giant (Queen)",name:"Giant Ant (Queen)",type:"bug",HD:"10",AAC:16,attacks:"bite (1d6)",move:"3",save:5,AL:"N",CL:8,special:"None"},42:{Num:42,"Catalog Name":"Ape, Gorilla",name:"Gorilla",type:"animal",HD:"4",AAC:13,attacks:"2 hands (1d3), 1 bite (1d6)",move:"12",save:13,AL:"N",CL:4,special:"Hug and rend"},46:{Num:46,"Catalog Name":"Aranea",name:"Aranea",type:"beast",HD:"4",AAC:13,attacks:"1 bite (1d6 + poison)",move:"12",save:13,AL:"C",CL:7,special:"Webs, Spells"},56:{Num:56,"Catalog Name":"Assassin Bug, Giant",name:"Giant Assassin Bug",type:"bug",HD:"6",AAC:14,attacks:"2 claws (1d6) and 1 bite (1d8 + liquefy organ)",move:"9 (Climb 6) (Fly 12)",save:11,AL:"N",CL:8,special:"Liquefy organs"},57:{Num:57,"Catalog Name":"Assassin Vine",name:"Assassin Vine",type:"plant",HD:"7",AAC:14,attacks:"1 vine (1d6+1)",move:"1",save:9,AL:"N",CL:8,special:"Animate plants"},60:{Num:60,"Catalog Name":"Athatch",name:"Athatch",type:"giant-kin",HD:"11",AAC:16,attacks:"1 or 2 weapons (3d6 or 2d6/2d6)/1 bite (1d6+1)",move:"15",save:4,AL:"C",CL:15,special:"Poison (nausea) spit, darkness, levitate, phantasmal force, reduced damage from cold, fire, gas, electricity, polymorph into other giant type"},63:{Num:63,"Catalog Name":"Azer",name:"Azer",type:"humanoid",HD:"2",AAC:17,attacks:"1 weapon (1d6+1)",move:"12",save:16,AL:"L",CL:3,special:"+1 heat damage, immune to fire"},65:{Num:65,"Catalog Name":"Baboon",name:"Baboon",type:"animal",HD:"1",AAC:12,attacks:"1 bite (1d4)",move:"12",save:17,AL:"N",CL:1,special:"None"},70:{Num:70,"Catalog Name":"Badger, Giant",name:"Giant Badger",type:"animal",HD:"3",AAC:15,attacks:"2 claws (1d3), bite (1d6)",move:"6",save:14,AL:"N",CL:3,special:"None"},73:{Num:73,"Catalog Name":"Banshee",name:"Banshee",type:"undead",HD:"7",AAC:19,attacks:"1 claw (1d8)",move:"0 (Fly 12)",save:9,AL:"C",CL:11,special:"Magic or silver to hit; magic resistance 49%; shriek of death; Immune to enchantments"},79:{Num:79,"Catalog Name":"Basilisk",name:"Basilisk",type:"beast",HD:"6",AAC:15,attacks:"1 bite (2d6)",move:"12",save:11,AL:"N",CL:8,special:"Petrifaction gaze"},83:{Num:83,"Catalog Name":"Bat Monster",name:"Bat Monster",type:"beast",HD:"8",AAC:13,attacks:"1 bite (2d8), 2 claws (1d6)",move:"4 (Fly 18)",save:8,AL:"N",CL:9,special:"None"},86:{Num:86,"Catalog Name":"Bat, Giant",name:"Giant Bat",type:"animal",HD:"4",AAC:12,attacks:"1 bite (1d10), 2 claws (1d6)",move:"4 (Fly 18)",save:13,AL:"N",CL:5,special:"10% chance of disease"},87:{Num:87,"Catalog Name":"Bat, Giant Vampire",name:"Giant Bat (Vampire Bat)",type:"animal",HD:"1",AAC:11,attacks:"bite (2d6)",move:"4 (Fly 18)",save:6,AL:"N",CL:3,special:"Sucks blood"},88:{Num:88,"Catalog Name":"Bear, Black",name:"Black Bear",type:"animal",HD:"4+1",AAC:12,attacks:"2 claws (1d3), 1 bite (1d6)",move:"9",save:13,AL:"N",CL:4,special:"Hug (1d8)"},89:{Num:89,"Catalog Name":"Bear, Grizzly",name:"Grizzly Bear",type:"animal",HD:"6",AAC:13,attacks:"2 claws (1d6), 1 bite (1d10)",move:"9",save:11,AL:"N",CL:6,special:"Hug (2d6)"},90:{Num:90,"Catalog Name":"Bear, Cave or Polar",name:"Cave or Polar Bear",type:"animal",HD:"7",AAC:13,attacks:"2 claws (1d6+1), 1 bite (1d10+1)",move:"12",save:9,AL:"N",CL:7,special:"Hug (3d6)"},91:{Num:91,"Catalog Name":"Beast of Chaos",name:"Beast of Chaos",type:"beast",HD:"5",AAC:19,attacks:"2 claws (1d4) and bite (1d8)",move:"12",save:15,AL:"C",CL:8,special:"Frightful presence, rage, immunities, magic resistance (25%)"},93:{Num:93,"Catalog Name":"Bee, Giant",name:"Giant Bee",type:"bug",HD:"3",AAC:13,attacks:"1 sting (1d3 + poison)",move:"3 (Fly 24)",save:14,AL:"N",CL:5,special:"Lethal poison sting"},97:{Num:97,"Catalog Name":"Beetle, Giant Deathwatch",name:"Giant Deathwatch Beetle",type:"bug",HD:"9",AAC:17,attacks:"bite (1d8)",move:"12",save:6,AL:"N",CL:11,special:"Death rattle, immune to death spells, surprise on a 1-4 on 1d6"},98:{Num:98,"Catalog Name":"Beetle, Giant (Normal)",name:"Giant Beetle (5 ft.)",type:"bug",HD:"5",AAC:16,attacks:"1 bite 5d4)",move:"9",save:12,AL:"N",CL:5,special:"None"},99:{Num:99,"Catalog Name":"Beetle, Giant Fire",name:"Giant Fire Beetle",type:"bug",HD:"1+3",AAC:15,attacks:"1 bite (1d4+2)",move:"12",save:17,AL:"N",CL:1,special:"Light glands"},101:{Num:101,"Catalog Name":"Beetle, Giant Rhinoceros",name:"Giant Rhinoceros Beetle",type:"bug",HD:"12",AAC:18,attacks:"bite (2d8) and gore (2d6)",move:"9",save:3,AL:"N",CL:12,special:"Trample (3d6)"},106:{Num:106,"Catalog Name":"Behir",name:"Behir",type:"beast",HD:"12",AAC:15,attacks:"1 bite (1d8)",move:"15",save:3,AL:"C",CL:13,special:"Constrict and claw, lightning breath"},111:{Num:111,"Catalog Name":"Black Pudding",name:"Black Pudding",type:"plant",HD:"10",AAC:13,attacks:"1 attack (3d8)",move:"6",save:5,AL:"N",CL:12,special:"Acidic surface, immune to cold, divides when hit with lightning"},114:{Num:114,"Catalog Name":"Blink Dog",name:"Blink Dog",type:"beast",HD:"4",AAC:14,attacks:"1 bite (1d6)",move:"12",save:11,AL:"L",CL:4,special:"Teleport"},120:{Num:120,"Catalog Name":"Boar, Wild",name:"Wild Boar",type:"animal",HD:"3+3",AAC:12,attacks:"1 gore (3d4)",move:"15",save:14,AL:"N",CL:4,special:"continue attacks 2 rounds after death"},122:{Num:122,"Catalog Name":"Bog Creeper",name:"Bog Creeper",type:"beast",HD:"7",AAC:13,attacks:"1 slam (1d6), 4 tendrils (1d4) or bite (2d4)",move:"4 (Swim 9)",save:9,AL:"N",CL:8,special:"Constrict, spit acid, camouflage"},125:{Num:125,"Catalog Name":"Boggart",name:"Boggart",type:"fey",HD:"6",AAC:20,attacks:"electrical discharge (2d6)",move:"9",save:11,AL:"C",CL:8,special:"Immune to magic, magical abilities"},136:{Num:136,"Catalog Name":"Brownie",name:"Brownie",type:"fey",HD:"1d3",AAC:17,attacks:"tiny sword (1d3)",move:"9",save:18,AL:"L",CL:1,special:"Magic resistance (25%), spells"},141:{Num:141,"Catalog Name":"Bugbear",name:"Bugbear",type:"humanoid",HD:"3+1",AAC:14,attacks:"1 bite (2d4) or weapon (1d8+1)",move:"9",save:14,AL:"C",CL:4,special:"Surprise opponents, 50% chance"},142:{Num:142,"Catalog Name":"Bulette",name:"Bulette",type:"beast",HD:"7",AAC:21,attacks:"bite (4d12) and 2 claws (3d6)",move:"15 (Burrow 3)",save:9,AL:"N",CL:9,special:"Leaping, surprise, burrow"},146:{Num:146,"Catalog Name":"Bumblebee, Giant, Worker",name:"Giant Bumblebee Worker",type:"bug",HD:"3",AAC:16,attacks:"sting (1d6 + poison)",move:"6 (Fly 18)",save:14,AL:"N",CL:5,special:"None"},147:{Num:147,"Catalog Name":"Bumblebee, Giant, Queen",name:"Giant Bumblebee Queen",type:"bug",HD:"10",AAC:16,attacks:"sting (1d6 + poison)",move:"6 (Fly 18)",save:5,AL:"N",CL:12,special:"None"},148:{Num:148,"Catalog Name":"Bunyip",name:"Bunyip",type:"beast",HD:"5",AAC:15,attacks:"bite (1d6)",move:"0 (Swim 21)",save:12,AL:"N (L tendencies)",CL:7,special:"Frenzy, roar, vorpal bite"},154:{Num:154,"Catalog Name":"Carrion Creeper",name:"Carrion Creeper",type:"beast",HD:"2+4",AAC:12,attacks:"bite (1hp) 6 tentacles",move:"12",save:14,AL:"N",CL:4,special:"Tentacles cause paralysis"},161:{Num:161,"Catalog Name":"Catoblepas",name:"Catoblepas",type:"beast",HD:"6",AAC:12,attacks:"1 bite (1d6)",move:"12",save:11,AL:"N",CL:8,special:"Lethal appearance"},162:{Num:162,"Catalog Name":"Cattle",name:"Cow/Ox",type:"animal",HD:"3",AAC:12,attacks:"1 gore (1d6)",move:"18",save:14,AL:"N",CL:3,special:"None"},163:{Num:163,"Catalog Name":"Cave Cricket",name:"Cave Cricket",type:"bug",HD:"1",AAC:16,attacks:"2 kicks (1d4)",move:"12",save:17,AL:"N",CL:1,special:"Chirp"},164:{Num:164,"Catalog Name":"Cave Eel",name:"Cave eel",type:"animal",HD:"2",AAC:11,attacks:"1 bite (1d6)",move:"1",save:16,AL:"N",CL:2,special:"Strike from cave walls"},165:{Num:165,"Catalog Name":"Cave Fisher",name:"Cave Fisher",type:"beast",HD:"3",AAC:16,attacks:"filament (see text) and 2 claws (1d6)",move:"6",save:14,AL:"N",CL:4,special:"Filaments"},166:{Num:166,"Catalog Name":"Cave Leech",name:"Cave Leech",type:"beast",HD:"5",AAC:10,attacks:"8 tentacles (1d4 blood drain) or bite (1d6)",move:"3",save:12,AL:"N",CL:6,special:"Blood Drain"},167:{Num:167,"Catalog Name":"Cave Moray",name:"Cave Moray",type:"beast",HD:"4",AAC:18,attacks:"bite (1d6)",move:"6",save:13,AL:"N",CL:4,special:"Recoil attack, surprise on 1-3 on 1d6"},168:{Num:168,"Catalog Name":"Centaur",name:"Centaur",type:"humanoid",HD:"4",AAC:14,attacks:"2 kicks (1d6) and weapon",move:"18",save:13,AL:"Any",CL:4,special:"None"},169:{Num:169,"Catalog Name":"Centipede Nest (Swarm)",name:"Centipede Nest (Swarm)",type:"bug",HD:"3",AAC:12,attacks:"1 (1hp + non-lethal poison)",move:"3",save:14,AL:"N",CL:4,special:"Immune to all but blunt weapons, non-lethal poison"},170:{Num:170,"Catalog Name":"Centipede, Giant (Small, Lethal)",name:"Giant Centipede (small, lethal)",type:"bug",HD:"1d2",AAC:10,attacks:"1 bite (0 + poison)",move:"13",save:18,AL:"N",CL:1,special:"poison bite (+4 save or die)"},171:{Num:171,"Catalog Name":"Centipede, Giant (Small, Non-lethal)",name:"Giant Centipede (small, non-lethal)",type:"bug",HD:"1d2",AAC:10,attacks:"1 bite (0 + poison)",move:"13",save:18,AL:"N",CL:"B",special:"Non-lethal poison bite, +4 save;"},172:{Num:172,"Catalog Name":"Centipede, Giant (Man-sized)",name:"Man-sized Giant Centipede (7ft)",type:"bug",HD:"2",AAC:14,attacks:"1 bite (1d8 + poison)",move:"15",save:16,AL:"N",CL:4,special:"Poison bite (+6 save or die)"},173:{Num:173,"Catalog Name":"Centipede, Giant (Large, 20 ft. long)",name:"Large Giant Centipede (20 ft.)",type:"bug",HD:"4",AAC:19,attacks:"1 bite (3d8)",move:"18",save:13,AL:"N",CL:6,special:"Poison bite (+4 save or die)"},175:{Num:175,"Catalog Name":"Cerebral Stalker",name:"Cerebral Stalker",type:"beast",HD:"9",AAC:12,attacks:"2 claws (1d6+2) or bite (1d8+2)",move:"6 (Burrow 3)",save:6,AL:"C",CL:11,special:"Consume brain, create zombie, fear gaze, web"},183:{Num:183,"Catalog Name":"Chimera",name:"Chimera",type:"beast",HD:"9",AAC:15,attacks:"2 claws (1d3), 2 goat horns (1d4), 1 lion bite (2d4), dragon bite (3d4)",move:"9 (Fly 18)",save:6,AL:"C",CL:11,special:"Breathes fire"},187:{Num:187,"Catalog Name":"Churr",name:"Churr",type:"humanoid",HD:"6",AAC:15,attacks:"2 claws (1d6) and bite (1d6)",move:"9 (Climb 6)",save:11,AL:"N",CL:6,special:"Constrict, howl"},188:{Num:188,"Catalog Name":"Clam, Giant",name:"Giant Clam",type:"animal",HD:"4",AAC:14,attacks:"bite (swallow)",move:"3",save:13,AL:"N",CL:4,special:"Acid, surprise on 1-3 on 1d6"},192:{Num:192,"Catalog Name":"Cloaker",name:"Cloaker",type:"beast",HD:"6",AAC:15,attacks:"tail (1d8), bite (1d6), enfurl",move:"9 (Fly 12)",save:11,AL:"N",CL:8,special:"Moan, mirror image, darkness, enfurl"},204:{Num:204,"Catalog Name":"Cockatrice",name:"Cockatrice",type:"beast",HD:"5",AAC:13,attacks:"1 bite (1d6 + turn to stone)",move:"6 (Fly 18)",save:12,AL:0,CL:8,special:"bite turns to stone"},214:{Num:214,"Catalog Name":"Couatl",name:"Couatl",type:"beast",HD:"8",AAC:15,attacks:"1 bite (2d6 + poison), 1 tail (1d6 constrict)",move:"12 (Fly 24)",save:8,AL:"L",CL:11,special:"Fly, poison (lethal), spells, polymorph"},215:{Num:215,"Catalog Name":"Crab, Giant",name:"Giant Crab",type:"animal",HD:"3",AAC:16,attacks:"2 pincers (1d6+2)",move:"9",save:14,AL:"N",CL:3,special:"None"},216:{Num:216,"Catalog Name":"Crab, Monstrous",name:"Monstrous Crab",type:"animal",HD:"3",AAC:16,attacks:"2 claws (1d4)",
move:"12 (Swim 9)",save:14,AL:"N",CL:3,special:"None"},217:{Num:217,"Catalog Name":"Crab Men",name:"Crab men",type:"humanoid",HD:"2",AAC:15,attacks:"2 claws (1d4)",move:"9 (Swim 9)",save:16,AL:"N",CL:2,special:"None"},218:{Num:218,"Catalog Name":"Crabman",name:"Crabman",type:"humanoid",HD:"3",AAC:16,attacks:"2 claws (1d6)",move:"12 (Swim 9)",save:14,AL:"N",CL:3,special:"None"},222:{Num:222,"Catalog Name":"Crocodile, Normal",name:"Normal Crocodile",type:"animal",HD:"3",AAC:15,attacks:"1 bite (1d6)",move:"9 (Swim 12)",save:14,AL:"N",CL:3,special:"None"},223:{Num:223,"Catalog Name":"Crocodile, Giant",name:"Giant Crocodile",type:"animal",HD:"6",AAC:16,attacks:"1 bite (3d6), 1 tail (1d6)",move:"9 (Swim 12)",save:11,AL:"N",CL:6,special:"None"},230:{Num:230,"Catalog Name":"Crystalline Horror",name:"Crystalline Horror",type:"elemental",HD:"7",AAC:19,attacks:"shard spray (3d6) or claw (1d6)",move:"12",save:9,AL:"C",CL:10,special:"Shard spray, bend light, +1 or better weapons to hit, resistance to cold (50%)"},232:{Num:232,"Catalog Name":"Daemon, Cacodaemon",name:"Cacodaemon",type:"fiend",HD:"12",AAC:22,attacks:"sword (2d6) or 2 claws (1d6)",move:"12",save:3,AL:"C",CL:18,special:"Spells, only harmed by silver weapons, immunity to acid and poison, magic resistance (60%), telepathy 100 ft"},234:{Num:234,"Catalog Name":"Daemon, Charonodaemon",name:"Charonodaemon",type:"fiend",HD:"10",AAC:21,attacks:"staff (1d8)",move:"15",save:5,AL:"C",CL:15,special:"Fear gaze, spells, only harmed by silver weapons, immunity to acid and poison, magic resistance (45%), telepathy 100 ft"},235:{Num:235,"Catalog Name":"Daemon, Dhergodaemon",name:"Dhergoodaemon",type:"fiend",HD:"10",AAC:21,attacks:"5 claws (1d4) or 2 claws (1d4) and 3 swords (2d6)",move:"15",save:5,AL:"C",CL:15,special:"Feeblemind, spells, only harmed by silver weapons, immunity to acid and poison, magic resistance (50%), telepathy 100 ft"},237:{Num:237,"Catalog Name":"Daemon, Hydrodaemon",name:"Hydrodaemon",type:"fiend",HD:"7",AAC:19,attacks:"2 claws (1d6), bite (2d6) or spit (see below)",move:"9 (Fly 12) (Swim 24)",save:9,AL:"C",CL:13,special:"Spittle, spells, only hamed by silver weapons, immunity to acid and poison, magic resistance (35%), telepathy 100 ft"},240:{Num:240,"Catalog Name":"Daemon, Piscodaemon",name:"Piscodaemon",type:"fiend",HD:"10",AAC:20,attacks:"2 claws (2d6), mouth tentacles (1d8 plus poison)",move:"9 (Swim 18)",save:5,AL:"C",CL:20,special:"Constrict, poison, spells, vorpal strike, only harmed by silver weapons, immunity to acid and poison, magic resistance (50%), telepathy 100 ft"},245:{Num:245,"Catalog Name":"Darkmantle",name:"Darkmantle",type:"beast",HD:"1+2",AAC:15,attacks:"1 grab (1d4)",move:"3 (Fly 3)",save:17,AL:"N",CL:2,special:"Suffocation, darkness"},250:{Num:250,"Catalog Name":"Decapus",name:"Decapus",type:"beast",HD:"4",AAC:15,attacks:"9 tentacles (1d4)",move:"6 (Climb 12) (Swing 12)",save:13,AL:"C",CL:7,special:"Strangle, illusion"},251:{Num:251,"Catalog Name":"Demi-Lich",name:"Demi-Lich",type:"undead",HD:"11",AAC:19,attacks:"steal soul",move:"0 (Fly 12)",save:4,AL:"C",CL:13,special:"Immune to most spells, +3 or better magic weapon to hit, immune to acid, electricity, fire, cold and polymorph, rejuvenation, steal souls"},252:{Num:252,"Catalog Name":"Demiurge",name:"Demiurge",type:"undead",HD:"8",AAC:16,attacks:"incorporeal touch (1d4)",move:"12 (Fly 15)",save:8,AL:"C",CL:14,special:"Chill, soul touch, transfixing gaze, incorporeal, only harmed by cold-wrought iron or spells, magic resistance (50%)"},253:{Num:253,"Catalog Name":"Demodand, Shaggy",name:"Demodand, Shaggy",type:"fiend",HD:"15",AAC:22,attacks:"2 claws (1d8), and bite (2d6)",move:"15 (Fly 18)",save:3,AL:"C",CL:22,special:"Spells, +1 or better weapon to hit, magic resistance (75%), immunity to acid and poison, immune to mental effects"},254:{Num:254,"Catalog Name":"Demodand, Slime",name:"Demodand, Slime",type:"fiend",HD:"13",AAC:21,attacks:"2 claws (1d8 plus 1d6 acid) and bite (1d8)",move:"15 (Fly 18)",save:3,AL:"C",CL:22,special:"Enslime, spells, +1 or better weapon to hit, immunity to acid and poison, immune to mental effects, magic"},255:{Num:255,"Catalog Name":"Demodand, Tarry",name:"Demodand, Tarry",type:"fiend",HD:"11",AAC:20,attacks:"2 claws (1d8), bite (1d8)",move:"15 (Fly 18)",save:4,AL:"C",CL:18,special:"Adhesive, spells, +1 or better weapon to hit, immune to acid and poison, immune to mental effects, magic resistance (50%)"},256:{Num:256,"Catalog Name":"Demon, Achaierai",name:"Achaierai Demon",type:"fiend",HD:"6",AAC:16,attacks:"2 claws (1d6), 1 bite (2d6)",move:"12",save:11,AL:"C",CL:9,special:"Magic resistance (25%), breath of confusion, immune to fire"},258:{Num:258,"Catalog Name":"Demon, Alu",name:"Alu-Demon",type:"fiend",HD:"6",AAC:18,attacks:"sword (1d8) or 2 claws (1d4)",move:"12 (Fly 18)",save:11,AL:"C",CL:10,special:"Spells, vampiric touch, immune to poison, magic resistance (15%), telepathy 100 ft"},259:{Num:259,"Catalog Name":"Demon, Arauk (First-category Demon)",name:"Arauk Demon",type:"fiend",HD:"8",AAC:19,attacks:"4 weapons (by weapon)",move:"12 (Fly 12)",save:8,AL:"C",CL:11,special:"Demonic immunities, magical abilities, breathe fire, gate (10%)"},260:{Num:260,"Catalog Name":"Demon, Baalroch (Balor) (Sixth-category Demon)",name:"Baalroch Demon",type:"fiend",HD:"10",AAC:17,attacks:"1 sword (1d12+2) and 1 whip (entangles)",move:"6 (Fly 15)",save:5,AL:"C",CL:17,special:"Magic Resistance (75%), surrounded by flame (3d6), magic weapon required to hit, unaffected by spells from casters lower than 6th level"},261:{Num:261,"Catalog Name":"Demon, Balban (Brute Demon)",name:"Balban (Brute Demon)",type:"fiend",HD:"9",AAC:17,attacks:"2 fists (1d6), 1 bite (1d8)",move:"14",save:6,AL:"C",CL:10,special:"Magic resistance (15%), pound, trample"},262:{Num:262,"Catalog Name":"Demon, Cambion",name:"Cambion",type:"fiend",HD:"8",AAC:18,attacks:"weapon or 2 claws (1d6)",move:"15",save:8,AL:"C",CL:12,special:"Spells, +1 or better weapon to hit, immune to electricity and poison, magic resistance (20%), telepathy 100 ft"},263:{Num:263,"Catalog Name":"Demon, Coral",name:"Coral Demon",type:"fiend",HD:"10",AAC:20,attacks:"2 pincers (2d6), 4 tentacles (1d4)",move:"9 (Swim 2)",save:5,AL:"C",CL:15,special:"Magic resistance (55%), hit only by magic weapons, demonic immunities and magical powers, gate (15% or 40%)"},271:{Num:271,"Catalog Name":"Demon, Dretch",name:"Dretch Demon",type:"fiend",HD:"4",AAC:17,attacks:"2 claws (1d4), 1 bite (1d6)",move:"9",save:13,AL:"C",CL:6,special:"Magical abilities"},272:{Num:272,"Catalog Name":"Demon, Erinyes",name:"Erinyes Demon",type:"fiend",HD:"6",AAC:17,attacks:"1 bronze sword (1d6 + paralysis)",move:"12 (Fly 24)",save:11,AL:"C",CL:10,special:"Magic resistance (25%), magical abilities, fear, immune to fire and cold, entangle"},275:{Num:275,"Catalog Name":"Demon, Glabrezu (Third-Category Demon)",name:"Third-Category Demon",type:"fiend",HD:"10",AAC:23,attacks:"2 pincers (2d6), 2 claws (1d3), 1 bite (1d6)",move:"9",save:5,AL:"C",CL:15,special:"Magic resistance (60%),immune to fire, demonic magical powers"},278:{Num:278,"Catalog Name":"Demon, Hezrou (Second-Category Demon)",name:"Second-Category Demon (Hezrou Type)",type:"fiend",HD:"9",AAC:21,attacks:"2 claws (1d3), 1 bite (4d4)",move:"6 (Fly 12)",save:6,AL:"C",CL:11,special:"Magic resistance 50%, demonic magical powers"},279:{Num:279,"Catalog Name":"Demon, Khavorr (Third-Category Demon)",name:"Third-Category Demon (KhavorrType)",type:"fiend",HD:"10",AAC:22,attacks:"2 claws (1d10), 1 bite (3d6)",move:"9",save:5,AL:"C",CL:13,special:"Magic resistance 55%, demonic magical powers"},280:{Num:280,"Catalog Name":"Demon, Larvaxu (Second-Category Demon)",name:"Second-Category Demon (LarvaxuType)",type:"fiend",HD:"9",AAC:21,attacks:"1 bite (2d8)",move:"9",save:6,AL:"C",CL:13,special:"Magic resistance 50%, swallow whole, demonic magical powers"},281:{Num:281,"Catalog Name":"Demon, Lemure",name:"Lemure Demon",type:"fiend",HD:"3",AAC:12,attacks:"1 claw (1d3)",move:"3",save:14,AL:"C",CL:4,special:"Regenerate (1hp/round)"},283:{Num:283,"Catalog Name":"Demon, Manes",name:"Manes Demon",type:"fiend",HD:"1",AAC:14,attacks:"2 claws (1d2), 1 bite (1d4)",move:"5",save:18,AL:"C:",CL:2,special:"Half damage from non-magic weapons"},284:{Num:284,"Catalog Name":"Demon, Marilith (Fifth-Category Demon)",name:"Fifth-category Demon (Marilith Type)",type:"fiend",HD:"7",AAC:12,attacks:"6 weapons (1d8), tail (1d8)",move:"12",save:8,AL:"C",CL:13,special:"Magic resistance (80%), +1 or better magic weapon required to hit, demonic magical powers"},285:{Num:285,"Catalog Name":"Demon, Mehrim (Goat Demon)",name:"Mehrim Demon (Goat Demon)",type:"fiend",HD:"6",AAC:16,attacks:"2 hooves (1d4), 1 bite (2d6 + disease)",move:"14",save:11,AL:"C",CL:9,special:"Diseased bite, magic resistance (10%), magical abilities"},286:{Num:286,"Catalog Name":"Demon, Mezzalorn (Wasp Demon)",name:"Mezzalorn Demon (Wasp Demon)",type:"fiend",HD:"12",AAC:22,attacks:"2 claws (1d6), 1 sting (2d6 + poison)",move:"6 (Fly 14)",save:3,AL:"C",CL:13,special:"Magic resistance (10%), immune to poison"},287:{Num:287,"Catalog Name":"Demon, Nabasu, Demonling (Death Stealer Demon)",name:"Demonling Nabasu",type:"fiend",HD:"7",AAC:20,attacks:"2 claws (1d6), bite (1d6)",move:"12 (Fly 24)",save:9,AL:"C",CL:15,special:"Death gaze, feed, spells, magic or silver weapons to hit, immunity to electricity and poison, magic resistance (30%), telepathy 100 ft"},288:{Num:288,"Catalog Name":"Demon, Nabasu, Mature (Death Stealer Demon)",name:"Mature Nabasu",type:"fiend",HD:"13",AAC:21,attacks:"2 claws (1d8), bite (1d6)",move:"12 (Fly 24)",save:3,AL:"C",CL:23,special:"Death gaze, paralysis, spells, summon ghosts, magic or silver weapons to hit, immunity to electricity and poison, magic resistance (40%), telepathy 100 ft"},289:{Num:289,"Catalog Name":"Demon, Nalfeshnee (Fourth-Category Demon)",name:"Fourth-category Demon (Nalfeshenee Type)",type:"fiend",HD:"10",AAC:15,attacks:"2 claws (1d4), 1 bite (2d4)",move:"9 (Fly 14)",save:9,AL:"C",CL:12,special:"+1 or better magic weapon needed to hit, magic resistance (65%), +2 on to-hit rolls, immune to fire, magical abilities"},294:{Num:294,"Catalog Name":"Demon, Quasit",name:"Quasit",type:"fiend",HD:"3",AAC:17,attacks:"2 claws (1d2 + non-lethal poison), 1 bite (1d3)",move:"14",save:14,AL:"C",CL:7,special:"Magic resistance (25%), non-lethal poison, regenerate (1hp/round), magical abilities"},296:{Num:296,"Catalog Name":"Demon, Shadow",name:"Shadow Demon",type:"fiend",HD:"7",AAC:15,attacks:"2 claws (1d6), bite (1d8)",move:"0 (Fly 15)",save:9,AL:"C",CL:12,special:"Incorporeal, spells, immunity to electricity and poison, shadow blend, sunlight powerlessness, telepathy 100 ft"},300:{Num:300,"Catalog Name":"Demon, Succubus",name:"Succubus",type:"fiend",HD:"6",AAC:10,attacks:"2 scratches (1d3)",move:"12 (Fly 18)",save:11,AL:"C",CL:9,special:"Magic resistance (70%), immune to non-magic weapons, cause darkness in a 10-foot diameter, level drain (1 level) with kiss, summon other demons, spells,change shape"},301:{Num:301,"Catalog Name":"Demon, Vrock (First-Category Demon)",name:"Vrock Demon",type:"fiend",HD:"8",AAC:19,attacks:"1 beak (1d6), 2 foreclaws (1d8), 2 rear claws (1d6)",move:"12 (Fly 18)",save:8,AL:"C",CL:11,special:"Magic resistance (50%), darkness, immune to fire"},344:{Num:344,"Catalog Name":"Devil, Nupperibo",name:"Devil, Nupperibo",type:"fiend",HD:"1",AAC:12,attacks:"spear (1d6) or 2 claws (1d4)",move:"9",save:17,AL:"C",CL:4,special:"+1 or better weapon to hit, immunity to fire and poison, mindless, regeneration (1 hp/round), see in darkness"},362:{Num:362,"Catalog Name":"Dinosaur, Ankylosaurus",name:"Ankylosaurus",type:"animal",HD:"9",AAC:19,attacks:"1 clubbed tail (3d6)",move:"6",save:6,AL:"N",CL:9,special:"None"},363:{Num:363,"Catalog Name":"Dinosaur, Brontosaurus",name:"Brontosaurus",type:"animal",HD:"30",AAC:14,attacks:"1 stomp (3d6)",move:"6",save:3,AL:"N",CL:30,special:"None"},364:{Num:364,"Catalog Name":"Dinosaur, Elasmosaurus",name:"Elasmosaurus",type:"animal",HD:"15",AAC:12,attacks:"1 bite (4d6)",move:"1 (Swim 15)",save:9,AL:"N",CL:7,special:"Aquatic"},365:{Num:365,"Catalog Name":"Dinosaur, Stegosaurus",name:"Stegosaurus",type:"animal",HD:"17",AAC:17,attacks:"1 bite (1d4), 1 spiked tail (4d6)",move:"6",save:3,AL:"N",CL:17,special:"None"},366:{Num:366,"Catalog Name":"Dinosaur, Triceratops",name:"Triceratops",type:"animal",HD:"16",AAC:18,attacks:"1 bite (1d8) and 2 gore (1d12)",move:"9",save:3,AL:"N",CL:17,special:"Charge, AAC 13 back"},367:{Num:367,"Catalog Name":"Dinosaur, Tyrannosaurus",name:"Tyrannosaurus Rex",type:"animal",HD:"18",AAC:15,attacks:"1 bite (5d8)",move:"15",save:3,AL:"N",CL:19,special:"Chew for automatic 3d8 damage after bite"},374:{Num:374,"Catalog Name":"Dire Hippopotamus (Behemoth)",name:"Dire Hippopotamus (Behemoth)",type:"animal",HD:"13",AAC:18,attacks:"bite (3d6)",move:"15",save:14,AL:"N",CL:13,special:"Capsize"},380:{Num:380,"Catalog Name":"Disenchanter",name:"Disenchanter",type:"beast",HD:"5",AAC:15,attacks:"snout (disenchantment) or 2 hooves (1d6)",move:"12",save:12,AL:"N",CL:7,special:"Disenchant, +1 or better weapon to hit"},381:{Num:381,"Catalog Name":"Djinni",name:"Djinni",type:"elemental",HD:"7+3",AAC:14,attacks:"1 fist or weapon (2d8)",move:"9 (Fly 24)",save:9,AL:"Any",CL:9,special:"Magical powers, whirlwind"},382:{Num:382,"Catalog Name":"Dog, Wild",name:"Dog (Pet or Wild)",type:"animal",HD:"1",AAC:12,attacks:"1 bite (1d3)",move:"15",save:17,AL:"N",CL:1,special:"None"},383:{Num:383,"Catalog Name":"Dog, War",name:"Guard/War Dog",type:"animal",HD:"2",AAC:12,attacks:"1 bite (1d6)",move:"14",save:16,AL:"N",CL:2,special:"None"},384:{Num:384,"Catalog Name":"Dolphin/Porpoise",name:"Dolphin",type:"animal",HD:"2",AAC:13,attacks:"1 bite (1d6)",move:"0 (Swim 24)",save:16,AL:0,CL:2,special:"None"},385:{Num:385,"Catalog Name":"Doppelganger",name:"Doppelganger",type:"humanoid",HD:"4",AAC:14,attacks:"1 claw (1d12)",move:"9",save:"13 (5 vs magic)",AL:"C",CL:5,special:"Mimics shape, immune to sleep and charm"},386:{Num:386,"Catalog Name":"Dracolisk",name:"Dracolisk",type:"undead",HD:"11",AAC:17,attacks:"2 claws (1d6), bite (2d6)",move:"12 (Fly 24)",save:4,AL:"N",CL:14,special:"Breath weapon, petrifying gaze"},389:{Num:389,"Catalog Name":"Dragon, Black Adult (6 HD)",name:"Adult Black Dragon",type:"dragon",HD:"6 (24 hp)",AAC:17,attacks:"2 claws (1d4), 1 bite (3d6)",move:"9 (Fly 24)",save:11,AL:"C",CL:8,special:"Spits acid"},392:{Num:392,"Catalog Name":"Dragon, Blue Adult (8 HD)",name:"Adult Blue Dragon",type:"dragon",HD:"8 (32 hp)",AAC:17,attacks:"2 claws (1d6), 1 bite (3d8)",move:"9 (Fly 24)",save:8,AL:"C",CL:10,special:"spits lightning"},395:{Num:395,"Catalog Name":"Dragon, Brass Adult (6 HD)",name:"Adult Brass Dragon",type:"dragon",HD:"6 (24 hp)",AAC:17,attacks:"2 claws (1d4), 1 bite (3d6)",move:"12 (Fly 24)",save:11,AL:"N",CL:8,special:"Fear or sleep breath"},398:{Num:398,"Catalog Name":"Dragon, Bronze Adult (8 HD)",name:"Adult Bronze Dragon",type:"dragon",HD:"8 (32 hp)",AAC:17,attacks:"2 claws (1d6), 1 bite (3d8)",move:"9 (Fly 24)",save:8,AL:"L",CL:10,special:"spits lightning or misdirection gas"},404:{Num:404,"Catalog Name":"Dragon, Copper Adult (7 HD)",name:"Adult Copper Dragon ",type:"dragon",HD:"7 (28 hp)",AAC:17,attacks:"2 claws (1d6), 1 bite (2d10)",move:"9 (Fly 24)",save:9,AL:"L",CL:9,special:"Spit acid or breathe slowing gas"},411:{Num:411,"Catalog Name":"Dragon, Gold Adult (10 HD)",name:"Adult Gold Dragon",type:"dragon",HD:"10 (40 hp)",AAC:17,attacks:"2 claws (1d6), 1 bite (3d8)",move:"12 (Fly 24)",save:5,AL:"L",CL:13,special:"fire or chlorine breath, magic-user spells"},414:{Num:414,"Catalog Name":"Dragon, Green Adult (7 HD)",name:"Adult Green Dragon ",type:"dragon",HD:"7 (28 hp)",AAC:17,attacks:"2 claws (1d6), 1 bite (2d10)",move:"9 (Fly 24)",save:9,AL:"C",CL:9,special:"Breathes poison gas"},420:{Num:420,"Catalog Name":"Dragon, Red Adult (9 HD)",name:"Adult Red Dragon",type:"dragon",HD:"9 (36 hp)",AAC:17,attacks:"2 claws (1d8), 1 bite (3d10)",move:"9 (Fly 24)",save:6,AL:"C",CL:11,special:"Breathes fire"},423:{Num:423,"Catalog Name":"Dragon, Silver Adult (9 HD)",name:"Adult Silver Dragon",type:"dragon",HD:"9 (36 hp)",AAC:17,attacks:"2 claws (1d8), 1 bite (3d10)",move:"9 (Fly 24)",save:6,AL:"L",CL:11,special:"Breathes frost or paralyzing gas, polymorph"},429:{Num:429,"Catalog Name":"Dragon, White Adult (5 HD)",name:"Adult White Dragon",type:"dragon",HD:"5 (20 hp)",AAC:17,attacks:"2 claws (1d4), 1 bite (2d8)",move:"9 (Fly 24)",save:12,AL:"C",CL:7,special:"Breathes frost"},436:{Num:436,"Catalog Name":"Dragon Turtle",name:"Dragon Turtle",type:"dragon",HD:"11",AAC:17,attacks:"2 claws (1d8), 1 bite (3d10)",move:"3 (Swim 9)",save:4,AL:"N",CL:13,special:"Break ships, breath weapon (steam)"},437:{Num:437,"Catalog Name":"Dragonfly, Giant",name:"Dragonfly",type:"bug",HD:"7",AAC:17,attacks:"bite (1d8)",move:"9 (Fly 30)",save:9,AL:"N",CL:8,special:"None"},438:{Num:438,"Catalog Name":"Dragonne",name:"Dragonne",type:"dragon",HD:"9",AAC:17,attacks:"2 claws (1d6), 1 bite (2d6+1)",move:"18 (Fly 9)",save:6,AL:"N",CL:10,special:"Roar"},449:{Num:449,"Catalog Name":"Drider",name:"Drider",type:"humanoid",HD:"7",AAC:16,attacks:"1 weapon (1d8)",move:"18",save:9,AL:"C",CL:9,special:"Spells, magical abilities"},450:{Num:450,"Catalog Name":"Drow",name:"Drow",type:"humanoid",HD:"2",AAC:16,attacks:"+1 longsword (1d8+1)",move:"12",save:14,AL:"C",CL:5,special:"50% magic resistance, +2 on all saving throws, lights, darkness 15-ft, 1 in 8 to-be-surprised chance"},451:{Num:451,"Catalog Name":"Dryad",name:"Dryad",type:"fey",HD:"2",AAC:10,attacks:"1 wooden dagger (1d4)",move:"12",save:16,AL:"N",CL:3,special:"Charm person (-2 save)"},452:{Num:452,"Catalog Name":"Duergar",name:"Duergar",type:"humanoid",HD:"1+2",AAC:15,attacks:"1 weapon (1d8)",move:"9",save:18,AL:"C",CL:3,special:"+4 save vs magic, immune to illusions, invisibility, enlarge"},454:{Num:454,"Catalog Name":"Dwarf",name:"Dwarf",type:"humanoid",HD:"1",AAC:15,attacks:"1 weapon (1d8)",move:"6",save:17,AL:"L",CL:1,special:"Detect attributes of stonework"},455:{Num:455,"Catalog Name":"Dwelver",name:"Dwelver",type:"beast",HD:"4+2",AAC:16,attacks:"1 weapon or strike (1d8)",move:"6",save:13,AL:"C",CL:5,special:"Collective Summoning"},456:{Num:456,"Catalog Name":"Eagle, Giant",name:"Giant Eagle",type:"animal",HD:"4",AAC:12,attacks:"2 talons (1d4), 1 bite (1d8)",move:"3 (Fly 24)",save:13,AL:"N",CL:5,special:"None"},460:{Num:460,"Catalog Name":"Eel, Giant, Electric",name:"Giant Electric Eel",type:"animal",HD:"2",AAC:11,attacks:"1 bite (1d3)",move:"0 (Swim 9)",save:16,AL:"N",CL:4,special:"Electric shock"},461:{Num:461,"Catalog Name":"Eel, Giant, Moray",name:"Giant Moray Eel",type:"animal",HD:"4",AAC:12,attacks:"1 bite (2d6)",move:"0 (Swim 9)",save:13,AL:"N",CL:4,special:"None"},462:{Num:462,"Catalog Name":"Efreeti",name:"Efreeti",type:"elemental",HD:"10",AAC:17,attacks:"1 fist or sword (1d8+5)",move:"9 (Fly 24)",save:5,AL:"C",CL:12,special:"Wall of fire"},463:{Num:463,"Catalog Name":"Elemental, Air (8 HD)",name:"Air Elemental",type:"elemental",HD:"8",AAC:17,attacks:"1 strike (2d8)",move:"0 (Fly 36)",save:8,AL:"N",CL:9,special:"Whirlwind, immune to non-magic weapons"},466:{Num:466,"Catalog Name":"Elemental, Earth (8 HD)",name:"Earth Elemental",type:"elemental",HD:"8",AAC:17,attacks:"1 strike (4d8)",move:"6",save:8,AL:"N",CL:9,special:"Tear down stonework, immune to non-magic weapons"},469:{Num:469,"Catalog Name":"Elemental, Fire (8 HD)",name:"Fire Elemental",type:"elemental",HD:"8",AAC:17,attacks:"1 strike (3d8)",move:"12",save:8,AL:"N",CL:9,special:"Ignite materials, immune to non-magic weapons"},475:{Num:475,"Catalog Name":"Elemental, Negative Energy (8 HD)",name:"Negative Energy Elemental",type:"elemental",HD:"8",AAC:17,attacks:"strike (1d8 + energy drain)",move:"0 (Fly 36)",save:8,AL:"N",CL:9,special:"Level drain (1 level with hit)"},478:{Num:478,"Catalog Name":"Elemental, Positive Energy (8 HD)",name:"Positive Energy Elemental",type:"elemental",HD:"8",AAC:17,attacks:"strike (1d6 healing)",move:"0 (Fly 36)",save:8,AL:"N",CL:9,special:"Positive energy burst"},487:{Num:487,"Catalog Name":"Elemental, Water (8 HD)",name:"Water Elemental",type:"elemental",HD:"8",AAC:17,attacks:"1 strike (3d10)",move:"6 (Swim 18)",save:8,AL:"N",CL:9,special:"overturn boats, immune to non-magic weapons"},490:{Num:490,"Catalog Name":"Elemental Construct, Air",name:"Air Elemental Construct",type:"construct",HD:"90 hp",AAC:17,attacks:"pummel (3d6) or wind blast 30 ft. radius (2d6)",move:"0 (Fly 36)",save:3,AL:"N",CL:17,special:"Immune to magic, +2 or better magic weapon required to hit"},491:{Num:491,"Catalog Name":"Elemental Construct, Earth",name:"Earth Elemental Construct",type:"construct",HD:"90 hp",AAC:17,attacks:"pound (4d6) or trample (2d6)",move:"8",save:3,AL:"N",CL:17,special:"Immune to magic, +2 or better magic weapon required to hit"},492:{Num:492,"Catalog Name":"Elemental Construct, Fire",name:"Fire Elemental Construct",type:"construct",HD:"90 hp",AAC:17,attacks:"strike (3d6) or fire bolt (2d6)",move:"12",save:3,AL:"N",CL:17,special:"Immune to magic, immune to fire, +2 or better magic weapon required to hit, ignite materials"},493:{Num:493,"Catalog Name":"Elemental Construct, Water",name:"Water Elemental Construct",type:"construct",HD:"90 hp",AAC:17,attacks:"slam (3d6)",move:"12",save:3,AL:"N",CL:17,special:"Immune to magic, +2 or better magic weapon required to hit, engulf, drown"},494:{Num:494,"Catalog Name":"Elemental Dragon, Air",name:"Air Elemental Dragon",type:"dragon",HD:"24",AAC:21,attacks:"bite (2d10), 2 claws (2d8)",move:"9 (Fly 48)",save:3,AL:"C",CL:33,special:"Breath weapon, cyclone, spells, +2 or better weapon to hit"},495:{Num:495,"Catalog Name":"Elemental Dragon, Earth",name:"Earth Elemental Dragon",type:"dragon",HD:"24",AAC:22,attacks:"bite (2d12), 2 claws (2d8)",move:"9 (Burrow 9) (Fly 30)",save:3,AL:"C",CL:33,special:"Assimilation, breath weapon, only harmed by +2 or better weapons, freeze, meld into stone"},496:{Num:496,"Catalog Name":"Elemental Dragon, Fire",name:"Fire Elemental Dragon",type:"dragon",HD:"24",AAC:24,attacks:"bite (2d8 plus 2d8 fire), 2 claws (2d6 plus 2d6 fire)",move:"15 (Fly 36)",save:3,AL:"C",CL:33,special:"Breath weapon, fiery aura, rain of fire, only harmed by +3 or better weapons, immune to fire, double damage from cold"},497:{Num:497,"Catalog Name":"Elemental Dragon, Water",name:"Water Elemental Dragon",type:"dragon",HD:"24",AAC:21,attacks:"bite (2d8), 2 claws (2d6)",move:"15 (Fly 36) (Swim 36)",save:3,AL:"C",CL:33,special:"Breath weapon, capsize, drench, spells, only harmed by +2 or better weapons, transparency"},498:{Num:498,"Catalog Name":"Elephant",name:"Elephant",type:"animal",HD:"10",AAC:13,attacks:"1 trunk (1d10), 2 gore (1d10), 2 trample (2d6)",move:"12",save:5,AL:"N",CL:11,special:"None"},499:{Num:499,"Catalog Name":"Elf",name:"Elf",type:"humanoid",HD:"1+1",AAC:14,attacks:"1 sword (1d8) or 2 arrows (1d6)",move:"12",save:17,AL:"L (or N)",CL:1,special:"Darkvision 60ft, 4 in 6 chance to find secret doors, immune to ghoul paralysis"},503:{Num:503,"Catalog Name":"Ettercap",name:"Ettercap",type:"humanoid",HD:"5",AAC:13,attacks:"2 claws (1d3), 1 bite (1d8 + poison)",move:"12",save:12,AL:"C",CL:6,special:"Poison bite, traps"},504:{Num:504,"Catalog Name":"Ettin",name:"Ettin",type:"giant-kin",HD:"10",AAC:16,attacks:"2 clubs (3d6)",move:"12",save:5,AL:"C",CL:10,special:"None"},512:{Num:512,"Catalog Name":"Eye of the Deep",name:"Eye of the Deep",type:"beast",HD:"10",AAC:15,attacks:"eye rays (see below), 2 pincers (2d4), bite (1d6)",move:"3 (Swim 9)",save:5,AL:"C",CL:13,special:"Constrict, eye rays, stun cone"},522:{Num:522,"Catalog Name":"Fetch",name:"Fetch",type:"beast",HD:"3+2",AAC:13,attacks:"2 claws (1d4)",move:"6",save:14,AL:"C",CL:3,special:"Freezing touch, immune to cold, vulnerable to fire"},530:{Num:530,"Catalog Name":"Fish, Giant",name:"Fish, Giant",type:"animal",HD:1,AAC:12,attacks:"1 bite (1d6 per 5 feet in length)",move:"varies  (Roll 1d4+1 X 10)",save:17,AL:"usually N",CL:1,special:"None (or swallow whole)"},531:{Num:531,"Catalog Name":"Flail Snail",name:"Flail Snail",type:"beast",HD:"4",AAC:18,attacks:"4 slams (1d8)",move:"12",save:13,AL:"N",CL:6,special:"Immunity to fire and poison, light blindness, warp magic"},540:{Num:540,"Catalog Name":"Flying Jellyfish, Giant",name:"Giant Flying Jellyfish",type:"animal",HD:"16",AAC:11,attacks:"up to 8 tentacles (2d6+paralysis)",move:"0 (Fly 9)",save:3,AL:"N",CL:19,special:"Discharge spell energy, paralysis"},541:{Num:541,"Catalog Name":"Flying Squirrel, Carnivorous",name:"Carnivorous Giant Squirrel",type:"animal",HD:"1d4 hp",AAC:12,attacks:"1 bite (1d2)",move:"6 (Glide 12)",save:18,AL:"N",CL:"A",special:"Glide silently"},548:{Num:548,"Catalog Name":"Formian, Worker",name:"Formian Worker",type:"beast",HD:"1",AAC:16,attacks:"1 bite (1d4)",move:"15",save:17,AL:"N",CL:1,special:"None"},549:{Num:549,"Catalog Name":"Formian, Warrior",name:"Formian Warrior",type:"beast",HD:"3",AAC:17,attacks:"1 bite (1d6), 2 mandibles (1d4), 1 sting (1 + non-lethal poison)",move:"12",save:14,AL:"N",CL:5,special:"Non-lethal poison sting (2d4 damage, save for half)"},550:{Num:550,"Catalog Name":"Formian, Taskmaster",name:"Formian Taskmaster",type:"beast",HD:"7",AAC:18,attacks:"1 bite (1d6+1), 1 sting (1d2 + non-lethal poison)",move:"12",save:9,AL:"N",CL:8,special:"Non-lethal poison (4d4 damage, save for half)"},551:{Num:551,"Catalog Name":"Formian, Male",name:"Formian Male",type:"beast",HD:"8",AAC:18,attacks:"1 bite (1d6+1), 1 sting (1d2 + non-lethal poison)",move:"12",save:8,AL:"N",CL:9,special:"Non-lethal poison (4d4 damage, save for half)"},552:{Num:552,"Catalog Name":"Formian, Queen",name:"Formian Queen",type:"beast",HD:"10",AAC:16,attacks:"none",move:"6",save:5,AL:"N",CL:0,special:"None"},554:{Num:554,"Catalog Name":"Frog, Giant (1 HD)",name:"Giant Frog",type:"animal",HD:"1",AAC:12,attacks:"1 bite (1d3)",move:"3 (Leap 150 Ft)",save:17,AL:"N",CL:1,special:"Leap"},559:{Num:559,"Catalog Name":"Froghemoth",name:"Froghemoth",type:"beast",HD:"16",AAC:16,attacks:"4 tentacles (1d6), tongue (1d6), bite (4d6)",move:"9 (Swim 12)",save:3,AL:"N",CL:18,special:"Swallow, resistance to fire (50%), slowed by electricity, surprise on roll of 1-2 on 1d6"},564:{Num:564,"Catalog Name":"Fungi, Violet",name:"Violet Fungus",type:"plant",HD:"3",AAC:12,attacks:"4 tendrils (rot)",move:"1",save:14,AL:"N",CL:4,special:"Tendrils cause rot"},565:{Num:565,"Catalog Name":"Fungoid",name:"Fungoid",type:"humanoid",HD:"5",AAC:14,attacks:"2 slams (1d8)",move:"6",save:12,AL:"N",CL:5,special:"Resists electricity, immune to charm"},572:{Num:572,"Catalog Name":"Gargoyle",name:"Gargoyle",type:"humanoid",HD:"4",AAC:14,attacks:"2 claws (1d3), 1 bite (1d4), 1 horn (1d6)",move:"9 (Fly 15)",save:13,AL:"C",CL:6,special:"Fly, magic weapon required to hit"},577:{Num:577,"Catalog Name":"Gargoyle, Margoyle",name:"Margoyle",type:"humanoid",HD:"6+1",AAC:18,attacks:"2 claws (1d6), bite (1d6), gore (1d6)",move:"15 (Fly 24)",save:11,AL:"C",CL:8,special:"+1 or better weapon to hit, freeze"},578:{Num:578,"Catalog Name":"Gas Spore (1)",name:"Gas Spore",type:"plant",HD:"1 hp",AAC:10,attacks:"1d6/day or 6d6 points of damage to all creatures within a 30-foot radius",move:"2",save:16,AL:"N",CL:3,special:"Cure disease will kill it instantly"},580:{Num:580,"Catalog Name":"Gelatinous Cube",name:"Gelatinous Cube",type:"plant",HD:"4",AAC:11,attacks:"1 (2d4)",move:"6",save:13,AL:"N",CL:5,special:"Paralysis, immune to lightning and cold"},585:{Num:585,"Catalog Name":"Genie, Marid",name:"Marid",type:"elemental",HD:"11",AAC:14,attacks:"2 fists (1d8)",move:"10 (Swim 16)",save:3,AL:"N",CL:13,special:"Magical abilities, whirlpool"},587:{Num:587,"Catalog Name":"Ghast",name:"Ghast",type:"undead",HD:"4",AAC:15,attacks:"2 claws (1d3), 1 bite (1d6)",move:"15",save:13,AL:"C",CL:5,special:"Stench, paralyzing touch"},589:{Num:589,"Catalog Name":"Ghoul",name:"Ghoul",type:"undead",HD:"2",AAC:13,attacks:"2 claws (1d3), 1 bite (1d4)",move:"9",save:16,AL:"C",CL:3,special:"Immunities, paralyzing touch"},596:{Num:596,"Catalog Name":"Giant, Cave",name:"Cave Giant",type:"giant-kin",HD:"9+1d6 hp",AAC:15,attacks:"weapon (2d8) or slam (1d8)",move:"12",save:6,AL:"C",CL:9,special:"none"},597:{Num:597,"Catalog Name":"Giant, Cloud",name:"Cloud Giant",type:"giant-kin",HD:"12+1d4 hp",AAC:15,attacks:"1 weapon (6d6)",move:"15",save:3,AL:"usually C",CL:13,special:"Hurl boulders"},600:{Num:600,"Catalog Name":"Giant, Fire",name:"Fire Giant",type:"giant-kin",HD:"11+1d4 hp",AAC:15,attacks:"1 weapon (5d6)",move:"12",save:4,AL:"C",CL:12,special:"Hurl boulders, immune to fire"},601:{Num:601,"Catalog Name":"Giant, Frost",name:"Frost Giant",type:"giant-kin",HD:"10+1d4 hp",AAC:15,attacks:"1 weapon (4d6)",move:"12",save:5,AL:"C",CL:11,special:"Hurl boulders, immune to cold"},602:{Num:602,"Catalog Name":"Giant, Hill",name:"Hill Giant",type:"giant-kin",HD:"8+2",AAC:15,attacks:"1 weapon (2d8)",move:"12",save:8,AL:"C",CL:9,special:"Throw boulders"},606:{Num:606,"Catalog Name":"Giant, Sand",name:"Sand Giant",type:"giant-kin",HD:"17",AAC:17,attacks:"two-handed sword (4d6) or 2 strikes (1d10)",move:"15",save:3,AL:"C",CL:19,special:"Shape earth, spells, rock catching"},607:{Num:607,"Catalog Name":"Giant, Sea",name:"Sea Giant",type:"giant-kin",HD:"14+1d6 hp",AAC:17,attacks:"tridents (6d6)",move:"15",save:3,AL:"N",CL:15,special:"hurl boulders, magical abilities"},609:{Num:609,"Catalog Name":"Giant, Stone",name:"Stone Giant",type:"giant-kin",HD:"9+3",AAC:19,attacks:"1 club (3d6)",move:"12",save:6,AL:"N",CL:10,special:"Throw boulders"},610:{Num:610,"Catalog Name":"Giant, Storm",name:"Storm Giant",type:"giant-kin",HD:"15+5",AAC:18,attacks:"1 weapon (6d6)",move:"15",save:3,AL:"Any",CL:16,special:"Throw boulders, control weather"},611:{Num:611,"Catalog Name":"Giant, Volcano",name:"Volcano Giant",type:"giant-kin",HD:"14+1d6 hp",AAC:17,attacks:"1 weapon (4d6)",move:"12",save:3,AL:"N",CL:16,special:"Hurl boulders, breath weapon, immune to fire"},612:{Num:612,"Catalog Name":"Giant, Wood",name:"Wood Giant",type:"giant-kin",HD:"7",AAC:18,attacks:"two-handed sword (2d8) or longbow (2d6)",move:"15",save:"9 (7 vs charm)",AL:"L",CL:8,special:"Change self, surprise on roll of 1-3 on 1d6"},614:{Num:614,"Catalog Name":"Gibbering Mouther",name:"Gibbering Mouther",type:"beast",HD:"4+4",AAC:18,attacks:"6 mouths (1hp)",move:"3",save:13,AL:"N",CL:6,special:"Gibbering, spit, pull prey underneath"},623:{Num:623,"Catalog Name":"Gloomwing",name:"Gloomwing",type:"beast",HD:"5",AAC:19,attacks:"2 claws (1d4), bite (1d8)",move:"3 (Fly 15)",save:12,AL:"N",CL:9,special:"Confusion, implant, weakness pheromone, summon gloomwings"},626:{Num:626,"Catalog Name":"Gnoll",name:"Gnoll",type:"humanoid",HD:"2",AAC:14,attacks:"1 bite (2d4) or weapon (1d10)",move:"9",save:16,AL:"C",CL:2,special:"None"},627:{Num:627,"Catalog Name":"Goat, Giant",name:"Giant Goat",type:"animal",HD:"3",AAC:12,attacks:"1 gore (2d6)",move:"18",save:14,AL:"N",CL:3,special:"+4 damage on charge"},628:{Num:628,"Catalog Name":"Goblin",name:"Goblin",type:"humanoid",HD:"1d6 hp",AAC:13,attacks:"1 weapon (1d6)",move:"9",save:18,AL:"C",CL:"B",special:"-1 to hit in sunlight"},638:{Num:638,"Catalog Name":"Golem. Clay",name:"Clay Golem",type:"construct",HD:"10 (45 hp)",AAC:12,attacks:"1 fist (3d10)",move:"8",save:5,AL:"N",CL:14,special:"Immune to slashing and piercing weapons, immune to most spells"},640:{Num:640,"Catalog Name":"Golem, Flesh",name:"Flesh Golem",type:"construct",HD:"8 (40hp)",AAC:10,attacks:"2 fists (2d8)",move:"8",save:8,AL:"N",CL:12,special:"Healed by lightning, hit only by magic weapons, slowed by fire and cold, immune to most spells"},644:{Num:644,"Catalog Name":"Golem, Ice",name:"Ice Golem",type:"construct",HD:"7 (30 hp)",AAC:14,attacks:"2 slams (2d6 plus 1d6 cold)",move:"9",save:9,AL:"N",CL:10,special:"Breath weapon, cold, immunity to cold, immunity to magic, double damage from fire"},645:{Num:645,"Catalog Name":"Golem, Iron",
name:"Iron Golem",type:"construct",HD:"16 (80 hp)",AAC:16,attacks:"1 weapon or fist (4d10)",move:"6",save:3,AL:"N",CL:17,special:"Poison gas, immune to all weapons +2 or less, slowed by lightning, healed by fire, immune to most magic"},651:{Num:651,"Catalog Name":"Golem, Stone",name:"Stone Golem",type:"construct",HD:"12 (60 hp)",AAC:14,attacks:"1 fist (3d8)",move:"6",save:3,AL:"N",CL:16,special:"+1 or better magic weapon to hit, immune to most magic"},652:{Num:652,"Catalog Name":"Golem, Stone Guardian",name:"Stone Guardian Golem",type:"construct",HD:"4 (20 hp)",AAC:18,attacks:"2 slams (2d6)",move:"9",save:13,AL:"N",CL:5,special:"Resistance to cold, electricity and fire (50%), ring link, see invisibility"},654:{Num:654,"Catalog Name":"Golem, Wax",name:"Wax Golem",type:"construct",HD:"4 (20 HP)",AAC:14,attacks:"2 fists (1d8+3)",move:"6",save:13,AL:"N",CL:6,special:"Resistant to blunt weapons, Magic resistance (25%)"},659:{Num:659,"Catalog Name":"Gorgon",name:"Gorgon",type:"beast",HD:"8",AAC:17,attacks:"1 gore (2d6)",move:"12",save:8,AL:"C",CL:10,special:"Breath turns to stone"},662:{Num:662,"Catalog Name":"Gorilla Bear",name:"Gorilla Bear",type:"beast",HD:"4",AAC:16,attacks:"2 claws (1d8), bite (1d6)",move:"12",save:12,AL:"N",CL:4,special:"Squeeze"},670:{Num:670,"Catalog Name":"Green Slime",name:"Green Slime",type:"plant",HD:"2",AAC:10,attacks:"special",move:"0",save:16,AL:"N",CL:3,special:"Turns metal or organic material into green slime"},671:{Num:671,"Catalog Name":"Gremlin",name:"Gremlin",type:"fey",HD:"1d6 hp",AAC:10,attacks:"2 claws (1d2), 1 bite (1d2) or 1 weapon (1d4)",move:"10",save:18,AL:"C",CL:"B",special:"Magic resistance (15%), +1 magic weapon needed to hit, invisible"},672:{Num:672,"Catalog Name":"Grey Ooze",name:"Grey Ooze",type:"plant",HD:"3",AAC:11,attacks:"1 strike (2d6)",move:"1",save:14,AL:"N",CL:5,special:"Acid, immune to spells, heat, cold, and blunt weapons"},673:{Num:673,"Catalog Name":"Grick",name:"Grick",type:"beast",HD:"2",AAC:15,attacks:"4 tentacles (1d3), 1 beak (1d2)",move:"6",save:16,AL:"N",CL:4,special:"Immune to blunt weapons"},674:{Num:674,"Catalog Name":"Griffon",name:"Griffon",type:"beast",HD:"7",AAC:16,attacks:"2 claws (1d4), 1 bite (2d8)",move:"12 (Fly 27)",save:9,AL:"N",CL:8,special:"None"},675:{Num:675,"Catalog Name":"Grimm",name:"Grimm",type:"fey",HD:"12",AAC:19,attacks:"2 claws (1d8), 1 bite (2d6)",move:"12",save:3,AL:"C",CL:13,special:"Magic resistance (35%), +1 magic weapons or better needed to hit, death aura"},677:{Num:677,"Catalog Name":"Grippli",name:"Grippli",type:"humanoid",HD:"1",AAC:13,attacks:"weapon (1d4)",move:"12 (Climb 12)",save:17,AL:"N",CL:1,special:"Marsh move"},681:{Num:681,"Catalog Name":"Grue (1)",name:"Grue",type:"beast",HD:"9",AAC:17,attacks:"1 bite (2d6)",move:"9",save:6,AL:"C",CL:12,special:"immune to blunt and piercing weapons, extinguish normal lights, swallow whole"},687:{Num:687,"Catalog Name":"Hag, Annis",name:"Annis",type:"humanoid",HD:"8",AAC:18,attacks:"2 claws (2d8), 1 bite (1d8)",move:"12",save:8,AL:"C",CL:10,special:"Hug and rend, polymorph, call mists"},689:{Num:689,"Catalog Name":"Hag, Sea",name:"Sea Hag",type:"humanoid",HD:"3",AAC:13,attacks:"1 bite (1d4)",move:"6 (Swim 18)",save:14,AL:"C",CL:5,special:"Death gaze, weakness gaze"},690:{Num:690,"Catalog Name":"Half-Ogre",name:"Half-Ogre",type:"humanoid",HD:"2",AAC:15,attacks:"two-handed sword (2d6+1) or spear (1d6+1)",move:"16",save:16,AL:"C",CL:2,special:"None"},693:{Num:693,"Catalog Name":"Harpy",name:"Harpy",type:"humanoid",HD:"3",AAC:12,attacks:"2 talons (1d3) and weapon (1d6)",move:"6 (Fly 18)",save:14,AL:"C",CL:4,special:"Flight, siren-song"},694:{Num:694,"Catalog Name":"Haunt",name:"Haunt",type:"undead",HD:"5",AAC:14,attacks:"ghostly touch (1d4 plus 1d3 dexterity)",move:"9 (Fly 12)",save:12,AL:"Any (usually C)",CL:8,special:"Alternate form, dexterity damage, immune to turning, malevolence, rejuvenation, strangle, vulnerabilities"},702:{Num:702,"Catalog Name":"Hellhound (4 HD)",name:"Hell Hound",type:"beast",HD:"4",AAC:15,attacks:"1 bite (1d6)",move:"12",save:13,AL:"C",CL:5,special:"Breathe fire (8hp)"},708:{Num:708,"Catalog Name":"Hippocampus",name:"Hippocampus",type:"beast",HD:"4",AAC:14,attacks:"1 bite (1d4)",move:"0 (Swim 24)",save:13,AL:"L",CL:4,special:"None"},710:{Num:710,"Catalog Name":"Hippogriff",name:"Hippogriff",type:"beast",HD:"3+1",AAC:14,attacks:"2 claws (1d6), 1 bite (1d10)",move:"18 (Fly 24)",save:14,AL:"N",CL:4,special:"None"},711:{Num:711,"Catalog Name":"Hippopotamus",name:"Hippopotamus",type:"animal",HD:"7",AAC:13,attacks:"1 bite (2d6)",move:"6 (Swim 12)",save:9,AL:"N",CL:7,special:"None"},714:{Num:714,"Catalog Name":"Hobgoblin",name:"Hobgoblin",type:"humanoid",HD:"1+1",AAC:14,attacks:"1 weapon (1d8)",move:"9",save:17,AL:"C",CL:1,special:"None"},716:{Num:716,"Catalog Name":"Hornet, Giant",name:"Giant Hornet",type:"bug",HD:"7",AAC:15,attacks:"bite (1d3) or sting (1d4 + poison)",move:"1 (Fly 24)",save:9,AL:"N",CL:8,special:"Poison, pheromone"},718:{Num:718,"Catalog Name":"Horse, Riding",name:"Horse, Riding",type:"animal",HD:"2",AAC:12,attacks:"1 bite (1d2)",move:"18",save:16,AL:"N",CL:2,special:"None"},719:{Num:719,"Catalog Name":"Horse, War",name:"Horse, War",type:"animal",HD:"3",AAC:12,attacks:"1 bite (1d2), 2 hooves (1d3)",move:"18",save:14,AL:"N",CL:3,special:"None"},724:{Num:724,"Catalog Name":"Human, Common",name:"Human (common)",type:"humanoid",HD:"1d6 hp",AAC:10,attacks:"1 weapon (1d6)",move:"12",save:18,AL:"Any",CL:"B",special:"None"},725:{Num:725,"Catalog Name":"Human, Bandit",name:"Human Bandit",type:"humanoid",HD:"1",AAC:12,attacks:"1 weapon (1d8)",move:"12",save:17,AL:"C",CL:1,special:"None"},726:{Num:726,"Catalog Name":"Human, Berserker",name:"Human Berserker",type:"humanoid",HD:"1",AAC:12,attacks:"1 weapon (1d8)",move:"12",save:17,AL:"N",CL:2,special:"+2 to hit in berserk state"},727:{Num:727,"Catalog Name":"Human, Sergeant-At-Arms",name:"Human Sergeant",type:"humanoid",HD:"3",AAC:14,attacks:"1 weapon (1d8)",move:"12",save:14,AL:"any",CL:3,special:"None"},728:{Num:728,"Catalog Name":"Human, Soldier",name:"Human Soldier",type:"humanoid",HD:"1",AAC:12,attacks:"1 weapon (1d8)",move:"12",save:17,AL:"Any",CL:1,special:"None"},729:{Num:729,"Catalog Name":"Hydra, 5 headed",name:"Hydra",type:"beast",HD:"5",AAC:14,attacks:"5 heads (1d6)",move:"9",save:12,AL:"N",CL:7,special:"None"},737:{Num:737,"Catalog Name":"Hyena",name:"Hyena",type:"animal",HD:"1",AAC:12,attacks:"1 bite (1d3)",move:"16",save:17,AL:"N",CL:1,special:"None"},738:{Num:738,"Catalog Name":"Hyena, Giant",name:"Giant Hyena",type:"animal",HD:"5",AAC:13,attacks:"1 bite (2d6)",move:"18",save:12,AL:"N",CL:5,special:"None"},740:{Num:740,"Catalog Name":"Imp",name:"Imp",type:"fiend",HD:"2",AAC:17,attacks:"1 sting (1d4 + poison)",move:"6 (Fly 16)",save:16,AL:"C",CL:6,special:"Poison tail, polymorph, regenerate, immune to fire, hit only by magic weapons"},750:{Num:750,"Catalog Name":"Iron Cobra",name:"Iron Cobra",type:"construct",HD:"1+1",AAC:18,attacks:"bite (1d4 + poison)",move:"15",save:17,AL:"N",CL:3,special:"Find target, poison, magic resistance 10%"},755:{Num:755,"Catalog Name":"Jackalwere",name:"Jackalwere",type:"humanoid",HD:"4",AAC:15,attacks:"1 bite (2d4)",move:"12",save:13,AL:"C",CL:5,special:"Sleep gaze, hit by silver or magic weapons only"},764:{Num:764,"Catalog Name":"Jellyfish, Monstrous",name:"Jellyfish, Monstrous",type:"animal",HD:"3",AAC:12,attacks:"tentacles (1d6 plus poison)",move:"0 (Swim 6)",save:14,AL:"N",CL:4,special:"Poison, transparent (surprise on roll of 1-2 on 1d6)"},781:{Num:781,"Catalog Name":"Ki-Rin",name:"Ki-rin",type:"beast",HD:"12",AAC:24,attacks:"1 horn (3d6), 2 hoofs (1d8)",move:"18 (Fly 24)",save:3,AL:"L",CL:18,special:"Spells, magical powers, magic resistance (90%)"},782:{Num:782,"Catalog Name":"Kobold",name:"Kobold",type:"humanoid",HD:"1d4 hp",AAC:12,attacks:"1 weapon (1d6)",move:"6",save:18,AL:"C",CL:"A",special:"None"},785:{Num:785,"Catalog Name":"Komodo Dragon",name:"Komodo Dragon",type:"animal",HD:"2",AAC:14,attacks:"1 bite (1d6 + poison)",move:"6",save:16,AL:"N",CL:4,special:"Poison bite"},786:{Num:786,"Catalog Name":"Komodo Dragon, Giant",name:"Giant Komodo Dragon",type:"animal",HD:"5",AAC:15,attacks:"1 bite (2d6 + poison)",move:"9",save:12,AL:"N",CL:7,special:"Poison bite"},787:{Num:787,"Catalog Name":"Korred",name:"Korred",type:"fey",HD:"6",AAC:15,attacks:"slam (1d4) or shears (1d6) or club (1d6)",move:"12",save:11,AL:"N (C tendencies)",CL:8,special:"Animate hair, laugh, magic resistance (30%)"},788:{Num:788,"Catalog Name":"Kraken",name:"Kraken",type:"beast",HD:"20",AAC:19,attacks:"6 tentacles (2d6), bite (3d6)",move:"0 (Swim 3) (Jet 21)",save:3,AL:"C",CL:24,special:"Ink cloud, constriction, control weather, create lights"},792:{Num:792,"Catalog Name":"Lamia",name:"Lamia",type:"humanoid",HD:"9",AAC:16,attacks:"2 claws (1d6)",move:"24",save:6,AL:"L",CL:12,special:"Spells, touch drains wisdom"},793:{Num:793,"Catalog Name":"Lammasu",name:"Lammasu",type:"humanoid",HD:"6+2",AAC:13,attacks:"2 claws (1d6)",move:"12 (Fly 24)",save:11,AL:"L",CL:9,special:"Invisibility at will, dimension door, protection from evil 10ft radius, spells (CL6)"},794:{Num:794,"Catalog Name":"Lamprey, Giant",name:"Giant Lamprey",type:"animal",HD:"4",AAC:13,attacks:"1 bite (1d6)",move:"0 (Swim 9)",save:13,AL:"N",CL:5,special:"Sucks blood"},795:{Num:795,"Catalog Name":"Lamprey, Land",name:"Land Lamprey",type:"animal",HD:"1",AAC:16,attacks:"bite (1d3)",move:"15",save:17,AL:"N",CL:2,special:"Attach, blood drain"},801:{Num:801,"Catalog Name":"Leech, Giant (1 HD)",name:"Giant Leech ",type:"animal",HD:"1",AAC:10,attacks:"1 bite (1d4)",move:"3",save:17,AL:"N",CL:2,special:"Sucks blood (1 hp/round)"},808:{Num:808,"Catalog Name":"Leopard",name:"Leopard",type:"animal",HD:"3",AAC:13,attacks:"2 claws (1d3), 1 bite (1d6)",move:"16",save:14,AL:"N",CL:3,special:"None"},812:{Num:812,"Catalog Name":"Leucrota",name:"Leucrota",type:"beast",HD:"6",AAC:15,attacks:"1 bite (3d6)",move:"18",save:11,AL:"C",CL:6,special:"None"},813:{Num:813,"Catalog Name":"Lich (12 HD)",name:"Lich",type:"undead",HD:"12",AAC:19,attacks:"1 hand (1d10 + automatic paralysis)",move:"6",save:3,AL:"C",CL:15,special:"Appearance causes paralytic fear, touch causes automatic paralysis, spells"},838:{Num:838,"Catalog Name":"Lycanthrope, Werebear",name:"Werebear",type:"humanoid",HD:"7+3",AAC:17,attacks:"2 claws (1d3), 1 bite (2d4)",move:"9",save:9,AL:"N or C",CL:8,special:"Lycanthropy"},839:{Num:839,"Catalog Name":"Lycanthrope, Wereboar",name:"Wereboar",type:"humanoid",HD:"5+2",AAC:15,attacks:"1 bite (2d6)",move:"12",save:12,AL:"N or C",CL:6,special:"Lycanthropy, hit only by magic or silver weapons"},840:{Num:840,"Catalog Name":"Lycanthrope, Wererat",name:"Wererat",type:"humanoid",HD:"3",AAC:13,attacks:"1 bite (1d3), 1 weapon (1d6)",move:"12",save:14,AL:"C",CL:4,special:"Lycanthropy, control rats, surprise, hit only by magic or silver weapons"},841:{Num:841,"Catalog Name":"Lycanthrope, Weretiger",name:"Weretiger",type:"humanoid",HD:"6",AAC:16,attacks:"2 claws (1d4), 1 bite (1d10)",move:"12",save:11,AL:"N or C",CL:7,special:"Lycanthropy, hit only by magic or silver weapons"},842:{Num:842,"Catalog Name":"Lycanthrope, Wereweasel",name:"Wereweasel",type:"humanoid",HD:"3+2",AAC:15,attacks:"1 bite (1d6) and weapon (1d8)",move:"15",save:14,AL:"C",CL:5,special:"Drain blood, lycanthropy, +1 initiative, hit only by magical or silver weapons"},843:{Num:843,"Catalog Name":"Lycanthrope, Werewolf",name:"Werewolf",type:"humanoid",HD:"4+4",AAC:14,attacks:"1 bite (1d6+1)",move:"12",save:13,AL:"C",CL:5,special:"Lycanthropy, hit only by magic or silver weapons"},844:{Num:844,"Catalog Name":"Lynx, Giant",name:"Giant Lynx",type:"animal",HD:"2",AAC:13,attacks:"2 claws (1d2), 1 bite (1d4)",move:"12",save:16,AL:"N",CL:2,special:"Rear claws, surprise"},851:{Num:851,"Catalog Name":"Mammoth",name:"Mammoth",type:"animal",HD:"12",AAC:14,attacks:"1 trunk (1d10), 2 gore (1d10+4), 2 trample (2d6+4)",move:"12",save:3,AL:"N",CL:13,special:"None"},854:{Num:854,"Catalog Name":"Manticore",name:"Manticore",type:"beast",HD:"6+4",AAC:15,attacks:"2 claws (1d3), 1 bite (1d8), 6 tail spikes (1d6)",move:"12 (Fly 18)",save:11,AL:"C",CL:8,special:"Flies, tail spikes"},856:{Num:856,"Catalog Name":"Mantis, Giant Praying",name:"Giant Praying Mantis",type:"bug",HD:"8",AAC:16,attacks:"1 grab (1d12)",move:"9",save:8,AL:"N",CL:9,special:"Bite (1d12)"},865:{Num:865,"Catalog Name":"Medusa",name:"Medusa",type:"humanoid",HD:"6",AAC:11,attacks:"1 weapon (1d4)",move:"9",save:11,AL:"C",CL:8,special:"Gaze turns to stone, poison"},866:{Num:866,"Catalog Name":"Medusa, Greater",name:"Medusa, Greater",type:"humanoid",HD:"8",AAC:16,attacks:"shortbow (1d6) or dagger (1d4) and snakes (1d4 plus poison)",move:"12",save:8,AL:"C",CL:10,special:"Petrifying gaze, poisonous blood"},871:{Num:871,"Catalog Name":"Mephit, Brimstone",name:"Brimstone Mephit",type:"fiend",HD:"3",AAC:14,attacks:"2 claws (1d3)",move:"12 (Fly 20)",save:14,AL:"C",CL:5,special:"Breathe gas cloud, gaseous form"},872:{Num:872,"Catalog Name":"Mephit, Fire",name:"Fire Mephit",type:"fiend",HD:"3",AAC:14,attacks:"2 fiery touches (1d3+1)",move:"12 (Fly 20)",save:14,AL:"C",CL:5,special:"Breathe gas cloud, gaseous form"},873:{Num:873,"Catalog Name":"Mephit, Lightning",name:"Lightning Mephit",type:"fiend",HD:"2",AAC:15,attacks:"2 claws (1d2 + 1d4 electricity)",move:"12 (Fly 18)",save:16,AL:"N",CL:2,special:"breath weapon, immune to electricity, summon mephit"},874:{Num:874,"Catalog Name":"Mephit, Smoke",name:"Smoke Mephit",type:"fiend",HD:"2",AAC:15,attacks:"2 claws (1d2)",move:"12 (Fly 18)",save:16,AL:"N",CL:2,special:"breath weapon, immune to fire, summon mephit"},875:{Num:875,"Catalog Name":"Merman",name:"Merman",type:"humanoid",HD:"1",AAC:12,attacks:"1 weapon (1d6)",move:"1 (Swim 18)",save:17,AL:"Any",CL:1,special:"Breathe water"},879:{Num:879,"Catalog Name":"Mimic",name:"Mimic",type:"beast",HD:"7",AAC:13,attacks:"1 smash (2d6)",move:"2",save:9,AL:"N",CL:8,special:"Mimicry, glue"},880:{Num:880,"Catalog Name":"Minotaur",name:"Minotaur",type:"humanoid",HD:"6+4",AAC:13,attacks:"head butt (2d4), 1 bite (1d3) and 1 weapon (1d8)",move:"12",save:11,AL:"C",CL:6,special:"Never get lost in labyrinths"},887:{Num:887,"Catalog Name":"Mohrg",name:"Mohrg",type:"undead",HD:"10",AAC:19,attacks:"1 fist (1d8) or tongue (paralysis)",move:"12",save:5,AL:"C",CL:13,special:"paralyzing tongue, grabs and holds"},888:{Num:888,"Catalog Name":"Mold, Brown",name:"Brown Mold",type:"plant",HD:"n/a",AAC:0,attacks:"none",move:"0",save:"n/a",AL:"N",CL:4,special:"Drains heat"},889:{Num:889,"Catalog Name":"Mold, Yellow",name:"Yellow Mold",type:"plant",HD:"n/a",AAC:0,attacks:"1d6 damage + spore cloud",move:"0",save:"n/a",AL:"N",CL:3,special:"Poisonous spore cloud, killed by fire"},890:{Num:890,"Catalog Name":"Mongrelman",name:"Mongrelman",type:"humanoid",HD:"2",AAC:15,attacks:"fists (1d4) or club (1d6)",move:"12",save:16,AL:"N",CL:2,special:"Sound imitation, surprise on 1-2 on 1d6"},894:{Num:894,"Catalog Name":"Mosquito, Giant",name:"Mosquito, Giant",type:"bug",HD:"4 hp",AAC:13,attacks:"1 bite (1 point + blood drain)",move:"6 (Fly 15)",save:13,AL:"N",CL:"B",special:"Blood drain"},900:{Num:900,"Catalog Name":"Mummy",name:"Mummy",type:"undead",HD:"5+1",AAC:16,attacks:"1 fist (1d12)",move:"6",save:12,AL:"C",CL:7,special:"Rot, hit only by magic weapons"},904:{Num:904,"Catalog Name":"Mushroom-man",name:"Mushroom-Men",type:"humanoid",HD:"1",AAC:14,attacks:"fist (1d6) or weapon",move:"12",save:17,AL:"C",CL:1,special:"Spores"},907:{Num:907,"Catalog Name":"Naga, Guardian",name:"Guardian Naga",type:"beast",HD:"11",AAC:14,attacks:"1 bite (1d6 + poison), 1 constrict (1d8), 1 spit (poison)",move:"18",save:4,AL:"L",CL:13,special:"Poison, constriction, spells"},910:{Num:910,"Catalog Name":"Naga, Spirit",name:"Spirit Naga",type:"beast",HD:"9",AAC:14,attacks:"1 bite (1d3 + poison)",move:"12",save:6,AL:"C",CL:13,special:"Poison, charm gaze, spells"},911:{Num:911,"Catalog Name":"Naga, Water",name:"Water Naga",type:"beast",HD:"7",AAC:14,attacks:"1 bite (1d4 + poison)",move:"12 (Swim 20)",save:9,AL:"Any",CL:10,special:"Poison, spells"},913:{Num:913,"Catalog Name":"Necrophidius",name:"Necrophidius",type:"undead",HD:"3+3",AAC:18,attacks:"bite (1d8 plus paralysis)",move:"12",save:14,AL:"N",CL:5,special:"Dance of death, paralysis"},917:{Num:917,"Catalog Name":"Night Hag",name:"Night Hag",type:"fiend",HD:"8",AAC:11,attacks:"1 bite (2d6)",move:"10",save:8,AL:"C",CL:12,special:"Magic resistance (65%), +2 or better magic weapon to hit, magical abilities"},918:{Num:918,"Catalog Name":"Nightmare",name:"Nightmare",type:"beast",HD:"7",AAC:23,attacks:"1 bite (1d8), 2 hoofs (2d6)",move:"18 (Fly 35)",save:9,AL:"C",CL:10,special:"Breathe smoke, ride between planes/realities"},919:{Num:919,"Catalog Name":"Nightshade",name:"Nightshade",type:"beast",HD:"14",AAC:19,attacks:"2 claws (2d8 + 2d6 cold)",move:"6",save:3,AL:"C",CL:16,special:"Cold, gaze attack, magical powers"},922:{Num:922,"Catalog Name":"Nixie",name:"Nixie",type:"fey",HD:"1d4 hp",AAC:12,attacks:"1 weapon (1d6)",move:"6 (Swim 12)",save:18,AL:"N",CL:1,special:"Charm"},925:{Num:925,"Catalog Name":"Nymph",name:"Nymph",type:"fey",HD:"3",AAC:10,attacks:"none",move:"12",save:14,AL:"N",CL:5,special:"Sight causes blindness or death"},929:{Num:929,"Catalog Name":"Ochre Jelly",name:"Ochre Jelly",type:"plant",HD:"6",AAC:11,attacks:"1 acid-laden strike (3d4)",move:"3",save:11,AL:"N",CL:6,special:"Lightning divides creature"},930:{Num:930,"Catalog Name":"Octopus, Giant",name:"Giant Octopus",type:"animal",HD:"4",AAC:12,attacks:"8 tentacles (1d3)",move:"3 (Swim 19)",save:13,AL:"N",CL:6,special:"Jet, ink, constriction"},932:{Num:932,"Catalog Name":"Ogre",name:"Ogre",type:"giant-kin",HD:"4+1",AAC:14,attacks:"1 weapon (1d10+1)",move:"9",save:13,AL:"C",CL:4,special:"None"},933:{Num:933,"Catalog Name":"Ogre, Swamp",name:"Swamp Ogre",type:"giant-kin",HD:"6+1",AAC:15,attacks:"2 grabs (submerge opponent), or 2 claws (1d6 each) and bite (2d6)",move:"6 (Swim 12)",save:11,AL:"C",CL:8,special:"Surprise opponents on a 1-5 when hiding in swamp, and swallow whole with bite on a natural 20"},935:{Num:935,"Catalog Name":"Ogre Mage",name:"Ogre Mage",type:"giant-kin",HD:"5+4",AAC:15,attacks:"1 weapon (1d12)",move:"12 (Fly 18)",save:12,AL:"C",CL:7,special:"Magic use, regenerate 1hp/round"},936:{Num:936,"Catalog Name":"Ogren",name:"Ogren",type:"giant-kin",HD:"2",AAC:12,attacks:"1 weapon (1d8)",move:"9",save:16,AL:"C",CL:2,special:"None"},937:{Num:937,"Catalog Name":"Ogrillon",name:"Ogrillon",type:"beast",HD:"2",AAC:14,attacks:"2 strikes (1d4+1)",move:"12",save:16,AL:"C",CL:2,special:"Reinforced fists"},943:{Num:943,"Catalog Name":"Ooze, Crystal",name:"Crystal Ooze",type:"plant",HD:"4",AAC:12,attacks:"strike (2d6 plus paralysis)",move:"3 (Swim 6)",save:13,AL:"N",CL:6,special:"Acid, paralysis, immune to acid, cold and fire, transparent, water dependent"},952:{Num:952,"Catalog Name":"Ophidian, Lesser",name:"Lesser Ophidian",type:"humanoid",HD:"3",AAC:15,attacks:"1 two-handed weapon (1d8+1) or weapon with shield (1d8)",move:"12",save:14,AL:"C",CL:3,special:"None"},953:{Num:953,"Catalog Name":"Ophidian",name:"Ophidian",type:"humanoid",HD:"3",AAC:15,attacks:"1 two-handed weapon (1d8+1) or weapon with shield (1d8), and bite (0)",move:"12",save:14,AL:"C",CL:5,special:"Reproductive bite"},954:{Num:954,"Catalog Name":"Orc",name:"Orc",type:"humanoid",HD:"1",AAC:13,attacks:"1 by weapon, usually spear (1d6) or scimitar (1d8)",move:"9",save:17,AL:"C",CL:1,special:"None"},957:{Num:957,"Catalog Name":"Otyugh",name:"Otyugh",type:"beast",HD:"7",AAC:16,attacks:"2 tentacles (1d8), bite (1d4+1)",move:"6",save:9,AL:"N",CL:8,special:"Disease"},958:{Num:958,"Catalog Name":"Owlbear",name:"Owlbear",type:"beast",HD:"5+1",AAC:14,attacks:"2 claws (1d6), 1 bite (2d6)",move:"12",save:12,AL:"N",CL:5,special:"hug for additional 2d8 if to-hit roll is 18+"},959:{Num:959,"Catalog Name":"Owl, Giant",name:"Giant Owl",type:"animal",HD:"4",AAC:13,attacks:"2 claws (1d8), 1 bite (1d6+1)",move:"3 (Fly 20)",save:13,AL:"N",CL:5,special:"Flies silently, -2 to all die rolls in bright light"},960:{Num:960,"Catalog Name":"Panther",name:"Panther",type:"animal",HD:"3",AAC:13,attacks:"2 claws (1d3), 1 bite (1d6)",move:"16",save:14,AL:"N",CL:4,special:"Additional rear claw attacks when hitting with both front claws"},961:{Num:961,"Catalog Name":"Pegasus",name:"Pegasus",type:"beast",HD:"4",AAC:13,attacks:"2 hooves (1d8)",move:"24 (Fly 48)",save:13,AL:"L",CL:5,special:"Flying"},962:{Num:962,"Catalog Name":"Peryton",name:"Peryton",type:"beast",HD:"4",AAC:13,attacks:"1 antler gore (2d8)",move:"9 (Fly 24)",save:13,AL:"C",CL:6,special:"Immune to non-magic weapons"},963:{Num:963,"Catalog Name":"Piercer (1 HD)",name:"Piercer",type:"beast",HD:"1",AAC:16,attacks:"1 drop and pierce (1d6)",move:"1",save:17,AL:"N",CL:1,special:"None"},967:{Num:967,"Catalog Name":"Pixie",name:"Pixie",type:"fey",HD:"1d6 hp",AAC:14,attacks:"1 dagger (1d4) or arrow",move:"9 (Fly 18)",save:17,AL:"N",CL:2,special:"Invisibility"},970:{Num:970,"Catalog Name":"Purple Worm",name:"Purple Worm",type:"beast",HD:"15",AAC:13,attacks:"1 bite (2d12), 1 sting (1d8 + poison)",move:"9",save:3,AL:"N",CL:17,special:"Poison sting, swallow whole"},974:{Num:974,"Catalog Name":"Rakshasa",name:"Rakshasa",type:"humanoid",HD:"7",AAC:23,attacks:"2 claws (1d3), 1 bite (1d6)",move:"15",save:9,AL:"C",CL:12,special:"Illusory appearance, special magic resistance, spells"},976:{Num:976,"Catalog Name":"Ratling",name:"Ratling",type:"humanoid",HD:"1",AAC:10,attacks:"1 bite (1d6+disease) or weapon",move:"12",save:17,AL:"C",CL:2,special:"Diseased bite"},977:{Num:977,"Catalog Name":"Rat, Giant",name:"Giant Rat",type:"animal",HD:"1d4 hp",AAC:12,attacks:"1 bite (1d3)",move:"12",save:18,AL:"N",CL:"A",special:"5% are diseased"},978:{Num:978,"Catalog Name":"Rat, Giant Monstrously Huge",name:"Monstrously Huge Giant Rat",type:"han",HD:"3",AAC:13,attacks:"2 claws (1d3), 1 bite (1d6)",move:"12",save:14,AL:"N",CL:3,special:"5% are diseased"},981:{Num:981,"Catalog Name":"Raven, Giant",name:"Giant Raven",type:"animal",HD:"3",AAC:14,attacks:"1 bite (1d8)",move:"2 (Fly 20)",save:14,AL:"C",CL:4,special:"None"},982:{Num:982,"Catalog Name":"Ray, Giant Manta",name:"Giant Manta Ray",type:"animal",HD:"8",AAC:13,attacks:"1 bite (2d6), tail sting (2d10)",move:"0 (Swim 18)",save:8,AL:"N or C",CL:10,special:"Swallow whole, tail stuns"},983:{Num:983,"Catalog Name":"Ray, Sting",name:"Sting Ray",type:"animal",HD:"1d6 hp",AAC:12,attacks:"1 sting (1d3 + poison)",move:"0 (Swim 10)",save:17,AL:"N",CL:2,special:"non-lethal poison"},984:{Num:984,"Catalog Name":"Razor Wing",name:"Razor Wings",type:"beast",HD:"1",AAC:12,attacks:"1 beak (1d4), claw (1d4), or razor wing(1d6)",move:"9 (Fly 12)",save:17,AL:"N",CL:2,special:"Swoop attack"},988:{Num:988,"Catalog Name":"Remorhaz (8 HD)",name:"Remorhaz",type:"beast",HD:"8",AAC:19,attacks:"1 bite (5d6)",move:"12",save:8,AL:"N",CL:9,special:"swallow whole on natural 20, melt weapons, AAC 17 underside"},994:{Num:994,"Catalog Name":"Retriever",name:"Retriever",type:"beast",HD:"10",AAC:20,attacks:"4 claws (1d8), eye-ray",move:"9",save:5,AL:"C",CL:13,special:"Eye rays, crushing damage on natural 20"},995:{Num:995,"Catalog Name":"Rhinoceros",name:"Rhinoceros",type:"animal",HD:"8",AAC:13,attacks:"1 horn (2d6)",move:"12",save:8,AL:"N",CL:8,special:"Double damage on charge"},996:{Num:996,"Catalog Name":"Rhinoceros, Wooly",name:"Wooly Rhinoceros",type:"animal",HD:"10",AAC:14,attacks:"1 horn (2d6)",move:"12",save:5,AL:"N",CL:10,special:"Double damage on charge"},998:{Num:998,"Catalog Name":"Roc",name:"Roc",type:"beast",HD:"12",AAC:15,attacks:"1 bite (3d6), 2 claws (2d6)",move:"3 (Fly 30)",save:3,AL:"N",CL:13,special:"None"},999:{Num:999,"Catalog Name":"Roper (10 HD)",name:"Roper",type:"beast",HD:"10",AAC:19,attacks:"1 tentacle (weakness), 1 bite (2d10)",move:"3",save:5,AL:"N",CL:11,special:"tentacles grab and cause weakness"},1007:{Num:1007,"Catalog Name":"Rust Monster",name:"Rust Monster",type:"beast",HD:"5",AAC:17,attacks:"2 antennae (0)",move:"12",save:12,AL:"N",CL:5,special:"Cause rust"},1008:{Num:1008,"Catalog Name":"Sahuagin",name:"Sahuagin",type:"humanoid",HD:"2+1",AAC:14,attacks:"1 weapon (1d8)",move:"12 (Swim 18)",save:16,AL:"C",CL:2,special:"None"},1009:{Num:1009,"Catalog Name":"Salamander",name:"Salamander",type:"humanoid",HD:"7",AAC:14,attacks:"touch and constrict (2d8 + 1d6 heat), 1 weapon (1d6 + 1d6 heat)",move:"9",save:9,AL:"C",CL:8,special:"Heat, constrict, AAC 16 serpent body"},1011:{Num:1011,"Catalog Name":"Satyr",name:"Satyr",type:"fey",HD:"5",AAC:14,attacks:"1 weapon (1d8)",move:"18",save:12,AL:"N",CL:6,special:"Magic resistance (50%), pipes, concealment"},1012:{Num:1012,"Catalog Name":"Scorpion, Giant",name:"Giant Scorpion",type:"bug",HD:"6",AAC:16,attacks:"2 pincers (1d10), sting (1d4 + poison)",move:"12",save:11,AL:"N",CL:8,special:"Lethal poison sting"},1016:{Num:1016,"Catalog Name":"Sea Lion",name:"Sea Lion",type:"animal",HD:"3",AAC:13,attacks:"1 bite (1d8)",move:"1 (Swim 24)",save:14,AL:"N",CL:3,special:"None"},1017:{Num:1017,"Catalog Name":"Sea Monster",name:"Sea Monster",type:"beast",HD:"30",AAC:17,attacks:"1 bite (4d10)",move:"0 (Swim 18)",save:3,AL:"N",CL:31,special:"Swallow whole"},1018:{Num:1018,"Catalog Name":"Sea Serpent",name:"Sea Serpent",type:"beast",HD:"15",AAC:13,attacks:"1 bite (2d12)",move:"0 (Swim 20)",save:3,AL:"N",CL:16,special:"Swallow whole"},1019:{Num:1019,"Catalog Name":"Shadow",name:"Shadow",type:"undead",HD:"2+2",AAC:12,attacks:"1 touch (1d4 + strength drain)",move:"12",save:16,AL:"C",CL:4,special:"Drain 1 point str with hit, hit only by magic weapons"},1020:{Num:1020,"Catalog Name":"Shadow Mastiff",name:"Shadow Mastiff",type:"beast",HD:"3",AAC:13,attacks:"1 bite (1d6+1)",move:"18",save:14,AL:"C",CL:4,special:"Baying, concealment in shadow"},1021:{Num:1021,"Catalog Name":"Shambling Mound (7 HD)",name:"Shambling Mound",type:"beast",HD:"7",AAC:18,attacks:"2 fists (2d8)",move:"6",save:9,AL:"N",CL:10,special:"Damage immunities, enfold and suffocate victims"},1027:{Num:1027,"Catalog Name":"Shark, Small (3 HD)",name:"Shark",type:"animal",HD:"3",AAC:13,attacks:"1 bite (1d4+1)",move:"0 (Swim 24)",save:14,AL:"N",CL:3,special:"Feeding frenzy"},1033:{Num:1033,"Catalog Name":"Shark, Giant",name:"Giant Shark",type:"animal",HD:"13",AAC:14,attacks:"1 bite (1d10+8)",move:"0 (Swim 18)",save:3,AL:"N",CL:13,special:"Feeding frenzy"},1034:{Num:1034,"Catalog Name":"Shocker Lizard",name:"Shocker Lizard",type:"beast",HD:"1d6 hp",AAC:13,attacks:"1 bite (1d3)",move:"6",save:18,AL:"N",CL:1,special:"Electric shock"},1036:{Num:1036,"Catalog Name":"Shrieker",name:"Shrieker",type:"plant",HD:"3",AAC:12,attacks:"none",move:"1",save:14,AL:"N",CL:3,special:"Shriek"},1041:{Num:1041,"Catalog Name":"Skeleton",name:"Skeleton",type:"undead",HD:"1",AAC:11,attacks:"1 weapon or strike (1d6) or (1d6+1 two-handed)",move:"12",save:17,AL:"N",CL:1,special:"Immune to sleep and charm spells"},1050:{Num:1050,"Catalog Name":"Slug, Giant",name:"Giant Slug",type:"animal",HD:"12",AAC:11,attacks:"1 bite (1d12) or acid",move:"6",save:3,AL:"N",CL:13,special:"Spit acid (6d6)"},1051:{Num:1051,"Catalog Name":"Snake, Viper",name:"Viper",type:"animal",HD:"1d6 hp",AAC:14,attacks:"1 bite (1hp + poison)",move:"18",save:18,AL:"N",CL:2,special:"Lethal poison (+2 save)"},1052:{Num:1052,"Catalog Name":"Snake, Cobra",name:"Cobra",type:"animal",HD:"1",AAC:14,attacks:"1 bite (1hp + poison)",move:"16",save:17,AL:"N",CL:3,special:"Lethal poison"},1053:{Num:1053,"Catalog Name":"Snake, Python",name:"Python",type:"animal",HD:"2",AAC:13,attacks:"1 constriction (1d3)",move:"12",save:16,AL:"N",CL:2,special:"Constriction"},1054:{Num:1054,"Catalog Name":"Snake, Javelin",name:"Javelin Snake",type:"animal",HD:"1",AAC:12,attacks:"1 impale (1d6)",move:"6",save:17,AL:"N",CL:2,special:"Attack as 4 HD creature"},1055:{Num:1055,"Catalog Name":"Snake, Giant Viper",name:"Giant Viper",type:"animal",HD:"4",AAC:14,attacks:"1 bite (1d3 + poison)",move:"12",save:13,AL:"N",CL:6,special:"Lethal poison"},1056:{Num:1056,"Catalog Name":"Snake, Giant Constrictor",name:"Giant Constrictor",type:"animal",HD:"6",AAC:14,attacks:"1 bite (1d3), 1 constrict (2d4)",move:"10",save:11,AL:"N",CL:7,special:"Constrict"},1057:{Num:1057,"Catalog Name":"Snake, Giant Amphisbaena",name:"Amphisbaena",type:"animal",HD:"5",AAC:14,attacks:"2 bite (1d3 + poison)",move:"10",save:12,AL:"N",CL:7,special:"Lethal Poison"},1058:{Num:1058,"Catalog Name":"Snake, Giant Spitting Snake",name:"Giant Spitting Snake",type:"animal",HD:"4",AAC:14,attacks:"1 bite (1d3 + poison) or spit poison",move:"13",save:11,AL:"N",CL:6,special:"Spit or bite with lethal poison"},1059:{Num:1059,"Catalog Name":"Sorcerer Ox",name:"Sorcerer Ox",type:"humanoid",HD:"4+2",AAC:12,attacks:"1 fist (1d6) or weapon (1d8+2)",move:"12",save:13,AL:"L",CL:7,special:"Spells as magic-user level 5, catch and destroy weapon (2/day), horoscope bonus (+2 on one roll), charm"},1063:{Num:1063,"Catalog Name":"Spectre",name:"Spectre",type:"undead",HD:"6",AAC:17,attacks:"1 spectral weapon or touch (1d8 + level drain)",move:"15 (Fly 30)",save:11,AL:"C",CL:9,special:"Drain 2 levels with hit, immune to non-magical weapons"},1069:{Num:1069,"Catalog Name":"Spider, Giant (1 HD)",name:"Giant Spider (1 ft. diameter)",type:"bug",HD:"1+1",AAC:11,attacks:"1 bite (1hp + poison)",move:"9",save:17,AL:"N",CL:3,special:"lethal poison (+2 saving throw)"},1070:{Num:1070,"Catalog Name":"Spider, Giant (2 HD)",name:"Giant Spider (4 ft. diameter)",type:"bug",HD:"2+2",AAC:13,attacks:"1 bite (1d6 + poison)",move:"18",save:16,AL:"N",CL:5,special:"lethal poison, 5 in 6 chance to surprise prey"},1071:{Num:1071,"Catalog Name":"Spider, Giant (4 HD)",name:"Giant Spider (6 ft. diameter)",type:"bug",HD:"4+2",AAC:15,attacks:"1 bite (1d6+2 + poison)",move:"4",save:13,AL:"C",CL:7,special:"lethal poison, webs"},1074:{Num:1074,"Catalog Name":"Spider, Giant Phase",name:"Giant Phase Spider",type:"beast",HD:"2+2",AAC:13,attacks:"1 bite (1d6 + poison)",move:"18",save:16,AL:"N",CL:6,special:"lethal poison (+1 save or die), dimension phasing"},1078:{Num:1078,"Catalog Name":"Squid, Giant",name:"Giant Squid",type:"animal",HD:"6",AAC:12,attacks:"10 tentacles (1d3)",move:"0 (Swim 9)",save:11,AL:"N",CL:9,special:"Jet, ink, constrict, AAC 16 tentacles"},1082:{Num:1082,"Catalog Name":"Stirge",name:"Stirge",type:"beast",HD:"1+1",AAC:12,attacks:"1 proboscis (1d3)",move:"3 (Fly 18)",save:17,AL:"N",CL:2,special:"blood drain (1d4), +2 to hit bonus"},1089:{Num:1089,"Catalog Name":"Tendriculos",name:"Tendriculos",type:"beast",HD:"8",AAC:15,attacks:"2 tendrils (1d6), 1 bite (2d6)",move:"9",save:8,AL:"N",CL:9,special:"Swallow whole"},1093:{Num:1093,"Catalog Name":"Tiger",name:"Tiger",type:"animal",HD:"6",AAC:13,attacks:"2 claws (1d4+1), 1 bite (1d8)",move:"15 (Swim 6)",save:11,AL:"N",CL:7,special:"Rear claws"},1094:{Num:1094,"Catalog Name":"Tiger, Sabre-Tooth",name:"Sabre-tooth Tiger",type:"animal",HD:"7",AAC:13,attacks:"2 claws (1d4+1), 1 bite (2d6)",move:"12 (Swim 6)",save:10,AL:"N",CL:8,special:"Rear claws"},1095:{Num:1095,"Catalog Name":"Titan (17 HD)",name:"Titan",type:"giant-kin",HD:"17",AAC:17,attacks:"1 weapon (7d6)",move:"21",save:3,AL:"Any",CL:19,special:"Spells"},1114:{Num:1114,"Catalog Name":"Treant (7 HD)",name:"Treant",type:"elemental",HD:"7",AAC:17,attacks:"2 strikes (2d6)",move:"6",save:9,AL:"L",CL:7,special:"Control trees"},1121:{Num:1121,"Catalog Name":"Triton",name:"Triton",type:"humanoid",HD:"3",AAC:14,attacks:"1 trident (1d8+1)",move:"1 (Swim 18)",save:14,AL:"L",CL:4,special:"Magic resistance 90%"},1123:{Num:1123,"Catalog Name":"Troglodyte",name:"Troglodyte",type:"humanoid",HD:"2",AAC:15,attacks:"2 claws (1d3), bite (1d4+1) or by weapon with shield (1d8)",move:"12",save:16,AL:"C",CL:3,special:"Stench, chameleon skin"},1124:{Num:1124,"Catalog Name":"Troll",name:"Troll",type:"giant-kin",HD:"6+3",AAC:15,attacks:"2 claws (1d4), 1 bite (1d8)",move:"12",save:11,AL:"C",CL:8,
special:"Regenerate 3hp/round"},1127:{Num:1127,"Catalog Name":"Turtle, Giant Sea",name:"Giant Sea Turtle",type:"animal",HD:"15",AAC:16,attacks:"1 bite (4d6)",move:"3 (Swim 12)",save:3,AL:"N",CL:15,special:"AAC 14 head/flippers"},1128:{Num:1128,"Catalog Name":"Turtle, Giant Snapping (8 HD)",name:"Giant Snapping Turtle",type:"animal",HD:"8",AAC:17,attacks:"1 bite (4d6)",move:"4 (Swim 9)",save:8,AL:"N",CL:8,special:"AAC 14 head/flippers"},1131:{Num:1131,"Catalog Name":"Unicorn",name:"Unicorn",type:"beast",HD:"4",AAC:17,attacks:"2 hoofs (1d8), 1 horn (1d8)",move:"24",save:13,AL:"L",CL:5,special:"double damage for charge, 25% magic resistance, teleport"},1135:{Num:1135,"Catalog Name":"Vampire (7 HD)",name:"Vampire",type:"undead",HD:"7",AAC:17,attacks:"1 bite (1d10 + level drain)",move:"12 (Fly 18)",save:9,AL:"C",CL:10,special:"Immune to non-magic weapons, only killed in coffin, regenerate (3/round), gaseous form, shapeshift, summon rats or wolves, charm gaze, drain 2 levels with hit"},1141:{Num:1141,"Catalog Name":"Vargouille",name:"Vargouille",type:"beast",HD:"1",AAC:11,attacks:"1 bite (1d4)",move:"0 (Fly 12)",save:17,AL:"C",CL:3,special:"permanent hit point loss"},1146:{Num:1146,"Catalog Name":"Wasp, Giant",name:"Giant Wasp",type:"bug",HD:"4",AAC:15,attacks:"1 sting (1d4 + poison), 1 bite (1d8)",move:"1 (Fly 20)",save:13,AL:"N",CL:6,special:"Paralyzing poison, larvae"},1151:{Num:1151,"Catalog Name":"Wight",name:"Wight",type:"undead",HD:"3",AAC:14,attacks:"1 claw (1hp + level drain)",move:"9",save:14,AL:"C",CL:6,special:"Drain 1 level with hit, hit only by magic or silver weapons"},1152:{Num:1152,"Catalog Name":"Wight, Sea",name:"Sea-Wight",type:"undead",HD:"4+3",AAC:15,attacks:"1 touch (level drain)",move:"12 (Swim 9)",save:13,AL:"C",CL:7,special:"Drain 1 level with hit, hit only by magic or silver weapons, command other undead"},1153:{Num:1153,"Catalog Name":"Will-O-The-Wisp",name:"Will-o-the-wisp",type:"fey",HD:"9",AAC:27,attacks:"1 shock (2d6)",move:"18",save:6,AL:"C",CL:10,special:"Lights"},1154:{Num:1154,"Catalog Name":"Wolf",name:"Wolf",type:"animal",HD:"2+2",AAC:12,attacks:"1 bite (1d4+1)",move:"18",save:16,AL:"N",CL:2,special:"None"},1155:{Num:1155,"Catalog Name":"Wolf, Winter",name:"Winter Wolf",type:"beast",HD:"5",AAC:14,attacks:"1 bite (1d6+1)",move:"18",save:12,AL:"N",CL:6,special:"Breathe frost"},1156:{Num:1156,"Catalog Name":"Wolf, Worg",name:"Worg",type:"beast",HD:"4",AAC:13,attacks:"1 bite (1d6+1)",move:"18",save:13,AL:"C",CL:4,special:"None"},1157:{Num:1157,"Catalog Name":"Wolverine",name:"Wolverine",type:"animal",HD:"3",AAC:13,attacks:"1 bite/claw (1d6+3)",move:"12",save:14,AL:"N",CL:4,special:"Musk, +4 to hit bonus"},1158:{Num:1158,"Catalog Name":"Wolverine, Giant",name:"Giant Wolverine",type:"animal",HD:"6",AAC:14,attacks:"2 claws (1d4), 1 bite (1d6)",move:"12",save:11,AL:"N",CL:7,special:"Musk, +4 to hit"},1159:{Num:1159,"Catalog Name":"Wraith",name:"Wraith",type:"undead",HD:"4",AAC:16,attacks:"1 touch (1d6+ level drain)",move:"9 (Fly 24)",save:13,AL:"C",CL:8,special:"drain 1 level with hit, magic or silver weapon to hit"},1160:{Num:1160,"Catalog Name":"Wyvern",name:"Wyvern",type:"beast",HD:"8",AAC:16,attacks:"1 bite (2d8) or 1 sting (1d6+poison)",move:"6 (Fly 24)",save:8,AL:"N",CL:10,special:"Poison sting"},1162:{Num:1162,"Catalog Name":"Xorn",name:"Xorn",type:"beast",HD:"7",AAC:21,attacks:"3 claws (1d3), 1 bite (4d6)",move:"9",save:9,AL:"N",CL:9,special:"Immune to fire and cold, half damage from electricity, travel through stone"},1164:{Num:1164,"Catalog Name":"Yeti",name:"Yeti",type:"beast",HD:"5",AAC:13,attacks:"2 fists (1d6)",move:"14",save:12,AL:"N or C",CL:7,special:"Immune to cold, hug, fear"},1172:{Num:1172,"Catalog Name":"Zombie",name:"Zombie",type:"undead",HD:"2",AAC:11,attacks:"1 weapon or strike (1d8)",move:"6",save:16,AL:"N",CL:2,special:"Immune to sleep and charm"}};for(var d in c)CPX.SW.monsterdb.insert(c[d],function(b,c){1172==c.Num&&a("done")})})},CPX.data.SWNWorldTags=["Abandoned Colony","Out of Contact","Alien Ruins","Outpost World","Altered Humanity","Perimeter Agency","Area 51","Pilgrimage Site","Badlands World","Police State","Bubble Cities","Preceptor Archive","Civil War","Pretech Cultists","Cold War","Primitive Aliens","Colonized Population","Psionics Fear","Desert World","Psionics Worship","Eugenic Cult","Psionics Academy","Exchange Consulate","Quarantined World","Feral World","Radioactive World","Flying Cities","Regional Hegemon","Forbidden Tech","Restrictive Laws","Freak Geology","Rigid Culture","Freak Weather","Seagoing Cities","Friendly Foe","Sealed Menace","Gold Rush","Sectarians","Hatred","Seismic Instability","Heavy Industry","Secret Masters","Heavy Mining","Theocracy","Hostile Biosphere","Tomb World","Hostile Space","Trade Hub","Local Specialty","Tyranny","Local Tech","Unbraked AI","Major Spaceyard","Warlords","Minimal Contact","Xenophiles","Misandry/Misogyny","Xenophobes","Oceanic World","Zombies"],CPX.SWN={},CPX.SWN.atmosphere=function(a){var b=a.diceSum("2d6"),c="";return 2==b?c="Corrosive":3==b?c="Inert gas":4==b?c="Airless or thin atmosphere":b<10?c="Breatheable mix":10==b?c="Thick atmosphere, breathable with a pressure mask":11==b?c="Invasive, toxic atmosphere":12==b&&(c="Corrosive and invasive atmosphere"),c},CPX.SWN.temperature=function(a){var b=a.diceSum("2d6"),c="";return 2==b?c="Frozen":3==b?c="Variable cold-to-temperate":b<6?c="Cold":b<9?c="Temperate":b<11?c="Warm":11==b?c="Variable temperate-to-warm":12==b&&(c="Burning"),c},CPX.SWN.biosphere=function(a){var b=a.diceSum("2d6"),c="";return 2==b?c="Biosphere remnants":3==b?c="Microbial life":b<6?c="No native biosphere":b<9?c="Human-miscible biosphere":b<11?c="Immiscible biosphere":11==b?c="Hybrid biosphere":12==b&&(c="Engineered biosphere"),c},CPX.SWN.population=function(a){var b=a.diceSum("2d6"),c="";return 2==b?c="Failed colony":3==b?c="Outpost":b<6?c="Tens of thousands of inhabitants":b<9?c="Hundreds of thousands of inhabitants":b<11?c="Millions of inhabitants":11==b?c="Billions of inhabitants":12==b&&(c="Alien civilization"),c},CPX.SWN.tech=function(a){var b=a.diceSum("2d6"),c="";return 2==b?c="Tech Level 0. Stone-age technology.":3==b?c="Tech level 1. Medieval technology.":4==b?c="Tech level 2. Nineteenth-century technology.":b<7?c="Tech level 3. Twentieth-century technology.":b<11?c="Tech level 4. Baseline postech":11==b?c="Tech level 4 with specialties or some surviving pretech.":12==b&&(c="Tech level 5. Pretech, pre-Silence technology."),c},CPX.SWN.planetTags=function(a){return[a.pickone(CPX.data.SWNWorldTags),a.pickone(CPX.data.SWNWorldTags)]},CPX.SWN.planet=function(a){var b={class:["planet","terran","main","habitable"]};return b.size=a.natural({min:5,max:10}),b.hydro=a.diceSum("2d6")-7+b.size,b.hydro<0&&(b.hydro=0),b.hydro>10&&(b.hydro=10),b.hydro="("+CHS.DATA.hydro[b.hydro][0]+") "+CHS.DATA.hydro[b.hydro][1],b.atm=CPX.SWN.atmosphere(a),b.temp=CPX.SWN.temperature(a),b.bio=CPX.SWN.biosphere(a),b.pop=CPX.SWN.population(a),b.tech=CPX.SWN.tech(a),b.tags=CPX.SWN.planetTags(a).join(", "),b},CPX.SWN.system=function(a){var b=CHS.system(a);return b.RNG=new Chance(b._id),b.planets.forEach(function(a,c){var d={};a.class.includes("main")&&(d=CPX.SWN.planet(b.RNG),d.orbit=a.orbit,b.planets[c]=d)}),delete b.RNG,b},Vue.component("c-swp-planet",{props:["P","i","O","HZ"],template:'  <div class="header strong">    {{head | capitalize}} ({{P.orbit}} AU)     <div class="pull-right" v-if="HZone">[HabZone]</div>  </div>  <div v-if="P.class.includes(`main`)" class="bottom-pad">    <input class="form-control center" type="text" v-model="P.name" placeholder="NAME">  </div>  <div v-if="P.class[1] == `terran`">    <div class="input-group">      <span class="input-group-addon strong">        Diameter: {{D.size[P.size]*100}} km         ({{Math.round10(D.size[P.size]*100/12742,-2)}} earth)       </span>      <span class="input-group-addon strong">        Gravity:</strong> {{D.g[P.size]}}g      </span>    </div>    <div class="center" v-if="!P.class.includes(`main`)"><strong>Atmosphere:</strong> {{D.atm[P.atm][1]}}</div>    <div v-if="P.class.includes(`main`)">      <div class="input-group">        <span class="input-group-addon strong">Atmosphere</span>        <input class="form-control center" type="text" v-model="P.atm">      </div>      <div class="input-group">         <span class="input-group-addon strong">Hydrosphere</span>         <input class="form-control center" type="text" v-model="P.hydro">      </div>      <div class="input-group">         <span class="input-group-addon strong">Temperature</span>         <input class="form-control center" type="text" v-model="P.temp">      </div>      <div class="input-group">         <span class="input-group-addon strong">Biosphere</span>         <input class="form-control center" type="text" v-model="P.bio">      </div>      <div class="input-group">         <span class="input-group-addon strong">Population</span>         <input class="form-control center" type="text" v-model="P.pop">      </div>      <div class="input-group">         <span class="input-group-addon strong">Tech Level</span>         <input class="form-control center" type="text" v-model="P.tech">      </div>      <div class="input-group">         <span class="input-group-addon strong">Tags</span>         <input class="form-control center" type="text" v-model="P.tags">      </div>    </div>  </div>  ',data:function(){return{D:CHS.DATA}},computed:{HZone:function(){return this.P.orbit>this.HZ.min&&this.P.orbit<this.HZ.max},main:function(){return!!this.P.class.includes("main")},head:function(){return"planet"==this.P.class[0]?"gasgiant"==this.P.class[1]?PLANETS[this.P.class[2]].name+" ["+this.P.mass+"x Juptier]":this.P.class[1]:this.P.class[0]}}}),CPX.data.troubleCategories=["disorder","revolt","poverty","education","despair","corruption"],CPX.data.tdisorder=[{id:"raiders",cat:"disorder",text:"Raiders routinely harrass the populace."},{id:"monsters",cat:"disorder",text:"Monsters lurk in the wilds."},{id:"wildlife",cat:"disorder",text:"The beasts of the regions have no fear."},{id:"gangs",cat:"disorder",text:"Gang violence can't be stopped, and innocents are being hurt."},{id:"thugs",cat:"disorder",text:"Gangs of thugs are making it hard to do honest beisness."},{id:"lurking outsiders",cat:"disorder",text:"Something is lurking in the town, and the people are restless."},{id:"cult",cat:"disorder",text:"A cult has risen in power.  Their god and their worship is unsetteling the people, but they're afraid to act."}],CPX.data.trevolt=[{id:"dark wizard",cat:"uprising",text:"A wizard in the area is practicing dark arts and plaguing the people."},{id:"exiled lord",cat:"uprising",text:"A warlord and his force are approaching. If they don't surrender, the warlord will burn the town to the ground."},{id:"outsiders",cat:"uprising",text:"Beings from beyond are lurking in the wilds and preying upon the people."}],CPX.data.tpoverty=[{id:"barren",cat:"poverty",text:"Times are hard, and the land is not yeilding what it used to."},{id:"contaminated land",cat:"poverty",text:"The land has been tainted by strange power."},{id:"extreme poverty",cat:"poverty",text:"Continued hardships have reduced the people to poverty. THere's nothing here help them recover."},{id:"inaccessible",cat:"poverty",text:"The town is simply hard to reach - you're amazed you found it.  They need help taiming the wilds and developing roads."},{id:"famine",cat:"poverty",text:"Droughts have make food scarce and the people are hungry."},{id:"ruination",cat:"poverty",text:"Recent storms have left numerous houses and buildings in ruins."},{id:"undeveloped",cat:"poverty",text:"The area has potential, but it needs a lot of work, and the locals need your help."}],CPX.data.teducation=[{id:"hazardous resource",cat:"education",text:"The resources that the people depend upon are actually hazardous, and the locals are suffering."},{id:"sickness",cat:"education",text:"A plague has settled on the town. People only stay well for a short time before falling ill again."},{id:"toxic process",cat:"education",text:"Some livelihood of the people is actually posioning them."},{id:"wasted effort",cat:"education",text:"They are spending a lot of effort to make very little - there's got to be a better way."}],CPX.data.tdespair=[{id:"class hatred",cat:"despair",text:"Two factions are bitter enemies, and the constant conflicts are tearing the town apart."},{id:"crushed spirits",cat:"despair",text:"The people have suffered hardship for too long. They lack the will to carry on."},{id:"demagogue",cat:"despair",text:"Someone has snared the majority of the people with sweet words and false promises."},{id:"disunity",cat:"despair",text:"Everyone is holding a grudge, no one can agree on anything. And anyone who visists doesn't stay long."}],CPX.data.tcorruption=[{id:"corrupt leaders",cat:"corruption",text:"Corruption is rempant amongst the elite. The people need your help exposing and removing them from power."},{id:"mob",cat:"corruption",text:"Mobs rule the town and the people can't do buisness without answering to them."},{id:"secret society",cat:"corruption",text:"There is a power behind the throne and they don't want to let go of the reigns."}],CPX.AB={},CPX.AB.template={_id:"",seed:[],name:"",notes:"",areas:[{name:"",notes:"",explored:!1}]},Vue.component("c-cab-area",{props:["A","i"],template:'  <div class="box center bottom-pad pwd-area" v-bind:class="{ explored: A.explored }">  <h4 class="header">{{A.name}}<span v-if="A.name.length==0">Area {{i+1}}</span>  <button v-on:click="remove" type="button" class="close"><span aria-hidden="true">&times;</span></button>  </h4>  <input class="form-control input-lg center" type="text" v-model="A.name" placeholder="NAME">  <div class="input-group">  <span class="input-group-addon" id="pwd-addon-i">Notes</span>  <textarea class="form-control" type="textarea" v-model="A.notes" placeholder="INFO"></textarea>  </div>  <div class="center"><input type="checkbox" v-model="A.explored" > Explored</div>  ',methods:{remove:function(){HUB.$emit("CAB-remove",this.i)}}}),Vue.component("c-cab",{template:'<div><h2 class="center">CPX Area Builder</h2><c-menubar id="CAB" v-bind:show="showmenu"></c-menubar><c-loadselect id="CAB" v-bind:list="allgens" v-bind:show="showlist.load"></c-loadselect><div class="content"><input class="form-control input-lg center" type="text" v-model="area.name" placeholder="NAME"><textarea class="form-control" type="textarea" v-model="area.notes" placeholder="ADD NOTES"></textarea></div><h4 class="center bar-bottom">Areas <button v-on:click="addArea" type="button" class="btn btn-sm"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></button></h4><c-cab-area v-for="area in area.areas" v-bind:A="area" v-bind:i="$index"></c-cab-area></div>',data:function(){return{vid:"CAB",showmenu:{new:!0,load:!0,save:!0,close:!0},showlist:{load:!1},area:objCopy(CPX.AB.template),allgens:{}}},created:function(){CPX.vue.page.onCreated(this)},beforeDestroy:function(){CPX.vue.page.onBeforeDestroy(this)},methods:{remove:function(a){this.area.areas.splice(a,1)},addArea:function(){this.area.areas.unshift({name:"",notes:"",explored:!1})},save:function(){CPXSAVE.setItem(this.area._id,this.area).then(function(){}),objExists(this.allgens[this.area._id])||Vue.set(this.allgens,this.area._id,this.area.name)},load:function(a){this.area=a},new:function(){this.area=objCopy(CPX.AB.template),this.generate()},generate:function(){this.area.seed=["CAB","-",CPXC.string({length:21,pool:base62})],this.area._id=this.area.seed.join("")},close:function(){CPX.vue.page.close(),this.area={},this.allgens=[]}}}),start(initialize);